/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["wod"] = factory();
	else
		root["wod"] = factory();
})(self, () => {
return /******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/glm-js/build/glm-js.min.js":
/*!*************************************************!*\
  !*** ./node_modules/glm-js/build/glm-js.min.js ***!
  \*************************************************/
/***/ (function(module, __unused_webpack_exports, __webpack_require__) {

eval("/*! glm-js built 2017-04-02 11:34:38-04:00 | (c) humbletim | http://humbletim.github.io/glm-js */\n(function declare_glmjs_glmatrix(globals, $GLM_log, $GLM_console_log) { var GLM, GLMAT, GLMAT_VERSION, GLMJS_PREFIX, $GLM_console_factory, glm; ArrayBuffer.exists;\n/*\n\n --------------------------------------------------------------------------\n glm-js | (c) humbletim | http://humbletim.github.io/glm-js\n --------------------------------------------------------------------------\n\n The MIT License (MIT)\n\n Copyright (c) 2015-2016 humbletim\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n\n --------------------------------------------------------------------------\n gl-matrix | (c) Brandon Jones, Colin MacKenzie IV | http://glmatrix.net/\n --------------------------------------------------------------------------\n\n Copyright (c) 2013 Brandon Jones, Colin MacKenzie IV\n\n This software is provided 'as-is', without any express or implied\n warranty. In no event will the authors be held liable for any damages\n arising from the use of this software.\n\n Permission is granted to anyone to use this software for any purpose,\n including commercial applications, and to alter it and redistribute it\n freely, subject to the following restrictions:\n\n  1. The origin of this software must not be misrepresented; you must not\n     claim that you wrote the original software. If you use this software\n     in a product, an acknowledgment in the product documentation would be\n     appreciated but is not required.\n\n  2. Altered source versions must be plainly marked as such, and must not\n     be misrepresented as being the original software.\n\n  3. This notice may not be removed or altered from any source distribution.\n*/\nGLMAT={};GLMAT_VERSION=\"2.2.2\";\n(function(a){a.VERSION=GLMAT_VERSION;if(!b)var b=1E-6;if(!c)var c=\"undefined\"!==typeof Float32Array?Float32Array:Array;if(!e)var e=Math.random;var d={setMatrixArrayType:function(y){c=y}};\"undefined\"!==typeof a&&(a.glMatrix=d);var h=Math.PI/180;d.toRadian=function(y){return y*h};d={create:function(){var y=new c(2);y[0]=0;y[1]=0;return y},clone:function(y){var a=new c(2);a[0]=y[0];a[1]=y[1];return a},fromValues:function(y,a){var v=new c(2);v[0]=y;v[1]=a;return v},copy:function(y,a){y[0]=a[0];y[1]=a[1];\nreturn y},set:function(y,a,v){y[0]=a;y[1]=v;return y},add:function(y,a,v){y[0]=a[0]+v[0];y[1]=a[1]+v[1];return y},subtract:function(y,a,v){y[0]=a[0]-v[0];y[1]=a[1]-v[1];return y}};d.sub=d.subtract;d.multiply=function(y,a,v){y[0]=a[0]*v[0];y[1]=a[1]*v[1];return y};d.mul=d.multiply;d.divide=function(y,a,v){y[0]=a[0]/v[0];y[1]=a[1]/v[1];return y};d.div=d.divide;d.min=function(y,a,v){y[0]=Math.min(a[0],v[0]);y[1]=Math.min(a[1],v[1]);return y};d.max=function(y,a,v){y[0]=Math.max(a[0],v[0]);y[1]=Math.max(a[1],\nv[1]);return y};d.scale=function(y,a,v){y[0]=a[0]*v;y[1]=a[1]*v;return y};d.scaleAndAdd=function(y,a,v,b){y[0]=a[0]+v[0]*b;y[1]=a[1]+v[1]*b;return y};d.distance=function(a,f){var v=f[0]-a[0],b=f[1]-a[1];return Math.sqrt(v*v+b*b)};d.dist=d.distance;d.squaredDistance=function(a,f){var v=f[0]-a[0],b=f[1]-a[1];return v*v+b*b};d.sqrDist=d.squaredDistance;d.length=function(a){var f=a[0];a=a[1];return Math.sqrt(f*f+a*a)};d.len=d.length;d.squaredLength=function(a){var f=a[0];a=a[1];return f*f+a*a};d.sqrLen=\nd.squaredLength;d.negate=function(a,f){a[0]=-f[0];a[1]=-f[1];return a};d.inverse=function(a,f){a[0]=1/f[0];a[1]=1/f[1];return a};d.normalize=function(a,f){var v=f[0],b=f[1],v=v*v+b*b;0<v&&(v=1/Math.sqrt(v),a[0]=f[0]*v,a[1]=f[1]*v);return a};d.dot=function(a,f){return a[0]*f[0]+a[1]*f[1]};d.cross=function(a,f,v){f=f[0]*v[1]-f[1]*v[0];a[0]=a[1]=0;a[2]=f;return a};d.lerp=function(a,f,v,b){var c=f[0];f=f[1];a[0]=c+b*(v[0]-c);a[1]=f+b*(v[1]-f);return a};d.random=function(a,f){f=f||1;var v=2*e()*Math.PI;\na[0]=Math.cos(v)*f;a[1]=Math.sin(v)*f;return a};d.transformMat2=function(a,f,v){var b=f[0];f=f[1];a[0]=v[0]*b+v[2]*f;a[1]=v[1]*b+v[3]*f;return a};d.transformMat2d=function(a,f,v){var b=f[0];f=f[1];a[0]=v[0]*b+v[2]*f+v[4];a[1]=v[1]*b+v[3]*f+v[5];return a};d.transformMat3=function(a,f,b){var c=f[0];f=f[1];a[0]=b[0]*c+b[3]*f+b[6];a[1]=b[1]*c+b[4]*f+b[7];return a};d.transformMat4=function(a,f,b){var c=f[0];f=f[1];a[0]=b[0]*c+b[4]*f+b[12];a[1]=b[1]*c+b[5]*f+b[13];return a};var j=d.create();d.forEach=function(a,\nf,b,c,d,e){f||(f=2);b||(b=0);for(c=c?Math.min(c*f+b,a.length):a.length;b<c;b+=f)j[0]=a[b],j[1]=a[b+1],d(j,j,e),a[b]=j[0],a[b+1]=j[1];return a};d.str=function(a){return\"vec2(\"+a[0]+\", \"+a[1]+\")\"};\"undefined\"!==typeof a&&(a.vec2=d);var g={create:function(){var a=new c(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var f=new c(3);f[0]=a[0];f[1]=a[1];f[2]=a[2];return f},fromValues:function(a,f,b){var P=new c(3);P[0]=a;P[1]=f;P[2]=b;return P},copy:function(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];return a},\nset:function(a,f,b,c){a[0]=f;a[1]=b;a[2]=c;return a},add:function(a,f,b){a[0]=f[0]+b[0];a[1]=f[1]+b[1];a[2]=f[2]+b[2];return a},subtract:function(a,f,b){a[0]=f[0]-b[0];a[1]=f[1]-b[1];a[2]=f[2]-b[2];return a}};g.sub=g.subtract;g.multiply=function(a,f,b){a[0]=f[0]*b[0];a[1]=f[1]*b[1];a[2]=f[2]*b[2];return a};g.mul=g.multiply;g.divide=function(a,f,b){a[0]=f[0]/b[0];a[1]=f[1]/b[1];a[2]=f[2]/b[2];return a};g.div=g.divide;g.min=function(a,f,b){a[0]=Math.min(f[0],b[0]);a[1]=Math.min(f[1],b[1]);a[2]=Math.min(f[2],\nb[2]);return a};g.max=function(a,f,b){a[0]=Math.max(f[0],b[0]);a[1]=Math.max(f[1],b[1]);a[2]=Math.max(f[2],b[2]);return a};g.scale=function(a,f,b){a[0]=f[0]*b;a[1]=f[1]*b;a[2]=f[2]*b;return a};g.scaleAndAdd=function(a,f,b,c){a[0]=f[0]+b[0]*c;a[1]=f[1]+b[1]*c;a[2]=f[2]+b[2]*c;return a};g.distance=function(a,f){var b=f[0]-a[0],c=f[1]-a[1],d=f[2]-a[2];return Math.sqrt(b*b+c*c+d*d)};g.dist=g.distance;g.squaredDistance=function(a,f){var b=f[0]-a[0],c=f[1]-a[1],d=f[2]-a[2];return b*b+c*c+d*d};g.sqrDist=\ng.squaredDistance;g.length=function(a){var f=a[0],b=a[1];a=a[2];return Math.sqrt(f*f+b*b+a*a)};g.len=g.length;g.squaredLength=function(a){var f=a[0],b=a[1];a=a[2];return f*f+b*b+a*a};g.sqrLen=g.squaredLength;g.negate=function(a,f){a[0]=-f[0];a[1]=-f[1];a[2]=-f[2];return a};g.inverse=function(a,f){a[0]=1/f[0];a[1]=1/f[1];a[2]=1/f[2];return a};g.normalize=function(a,f){var b=f[0],c=f[1],d=f[2],b=b*b+c*c+d*d;0<b&&(b=1/Math.sqrt(b),a[0]=f[0]*b,a[1]=f[1]*b,a[2]=f[2]*b);return a};g.dot=function(a,f){return a[0]*\nf[0]+a[1]*f[1]+a[2]*f[2]};g.cross=function(a,f,b){var c=f[0],d=f[1];f=f[2];var e=b[0],l=b[1];b=b[2];a[0]=d*b-f*l;a[1]=f*e-c*b;a[2]=c*l-d*e;return a};g.lerp=function(a,f,b,c){var d=f[0],e=f[1];f=f[2];a[0]=d+c*(b[0]-d);a[1]=e+c*(b[1]-e);a[2]=f+c*(b[2]-f);return a};g.random=function(a,f){f=f||1;var b=2*e()*Math.PI,c=2*e()-1,d=Math.sqrt(1-c*c)*f;a[0]=Math.cos(b)*d;a[1]=Math.sin(b)*d;a[2]=c*f;return a};g.transformMat4=function(a,f,b){var c=f[0],d=f[1];f=f[2];var e=b[3]*c+b[7]*d+b[11]*f+b[15],e=e||1;a[0]=\n(b[0]*c+b[4]*d+b[8]*f+b[12])/e;a[1]=(b[1]*c+b[5]*d+b[9]*f+b[13])/e;a[2]=(b[2]*c+b[6]*d+b[10]*f+b[14])/e;return a};g.transformMat3=function(a,f,b){var c=f[0],d=f[1];f=f[2];a[0]=c*b[0]+d*b[3]+f*b[6];a[1]=c*b[1]+d*b[4]+f*b[7];a[2]=c*b[2]+d*b[5]+f*b[8];return a};g.transformQuat=function(a,f,b){var c=f[0],d=f[1],e=f[2];f=b[0];var l=b[1],x=b[2];b=b[3];var u=b*c+l*e-x*d,J=b*d+x*c-f*e,g=b*e+f*d-l*c,c=-f*c-l*d-x*e;a[0]=u*b+c*-f+J*-x-g*-l;a[1]=J*b+c*-l+g*-f-u*-x;a[2]=g*b+c*-x+u*-l-J*-f;return a};g.rotateX=\nfunction(a,f,b,c){var d=[],e=[];d[0]=f[0]-b[0];d[1]=f[1]-b[1];d[2]=f[2]-b[2];e[0]=d[0];e[1]=d[1]*Math.cos(c)-d[2]*Math.sin(c);e[2]=d[1]*Math.sin(c)+d[2]*Math.cos(c);a[0]=e[0]+b[0];a[1]=e[1]+b[1];a[2]=e[2]+b[2];return a};g.rotateY=function(a,f,b,c){var d=[],e=[];d[0]=f[0]-b[0];d[1]=f[1]-b[1];d[2]=f[2]-b[2];e[0]=d[2]*Math.sin(c)+d[0]*Math.cos(c);e[1]=d[1];e[2]=d[2]*Math.cos(c)-d[0]*Math.sin(c);a[0]=e[0]+b[0];a[1]=e[1]+b[1];a[2]=e[2]+b[2];return a};g.rotateZ=function(a,f,b,c){var d=[],e=[];d[0]=f[0]-\nb[0];d[1]=f[1]-b[1];d[2]=f[2]-b[2];e[0]=d[0]*Math.cos(c)-d[1]*Math.sin(c);e[1]=d[0]*Math.sin(c)+d[1]*Math.cos(c);e[2]=d[2];a[0]=e[0]+b[0];a[1]=e[1]+b[1];a[2]=e[2]+b[2];return a};var k=g.create();g.forEach=function(a,f,b,c,d,e){f||(f=3);b||(b=0);for(c=c?Math.min(c*f+b,a.length):a.length;b<c;b+=f)k[0]=a[b],k[1]=a[b+1],k[2]=a[b+2],d(k,k,e),a[b]=k[0],a[b+1]=k[1],a[b+2]=k[2];return a};g.str=function(a){return\"vec3(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\")\"};\"undefined\"!==typeof a&&(a.vec3=g);var i={create:function(){var a=\nnew c(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var f=new c(4);f[0]=a[0];f[1]=a[1];f[2]=a[2];f[3]=a[3];return f},fromValues:function(a,f,b,d){var e=new c(4);e[0]=a;e[1]=f;e[2]=b;e[3]=d;return e},copy:function(a,f){a[0]=f[0];a[1]=f[1];a[2]=f[2];a[3]=f[3];return a},set:function(a,f,b,c,d){a[0]=f;a[1]=b;a[2]=c;a[3]=d;return a},add:function(a,f,b){a[0]=f[0]+b[0];a[1]=f[1]+b[1];a[2]=f[2]+b[2];a[3]=f[3]+b[3];return a},subtract:function(a,f,b){a[0]=f[0]-b[0];a[1]=f[1]-b[1];a[2]=f[2]-b[2];\na[3]=f[3]-b[3];return a}};i.sub=i.subtract;i.multiply=function(a,f,b){a[0]=f[0]*b[0];a[1]=f[1]*b[1];a[2]=f[2]*b[2];a[3]=f[3]*b[3];return a};i.mul=i.multiply;i.divide=function(a,f,b){a[0]=f[0]/b[0];a[1]=f[1]/b[1];a[2]=f[2]/b[2];a[3]=f[3]/b[3];return a};i.div=i.divide;i.min=function(a,f,b){a[0]=Math.min(f[0],b[0]);a[1]=Math.min(f[1],b[1]);a[2]=Math.min(f[2],b[2]);a[3]=Math.min(f[3],b[3]);return a};i.max=function(a,f,b){a[0]=Math.max(f[0],b[0]);a[1]=Math.max(f[1],b[1]);a[2]=Math.max(f[2],b[2]);a[3]=\nMath.max(f[3],b[3]);return a};i.scale=function(a,f,b){a[0]=f[0]*b;a[1]=f[1]*b;a[2]=f[2]*b;a[3]=f[3]*b;return a};i.scaleAndAdd=function(a,f,b,c){a[0]=f[0]+b[0]*c;a[1]=f[1]+b[1]*c;a[2]=f[2]+b[2]*c;a[3]=f[3]+b[3]*c;return a};i.distance=function(a,f){var b=f[0]-a[0],c=f[1]-a[1],d=f[2]-a[2],e=f[3]-a[3];return Math.sqrt(b*b+c*c+d*d+e*e)};i.dist=i.distance;i.squaredDistance=function(a,f){var b=f[0]-a[0],c=f[1]-a[1],d=f[2]-a[2],e=f[3]-a[3];return b*b+c*c+d*d+e*e};i.sqrDist=i.squaredDistance;i.length=function(a){var f=\na[0],b=a[1],c=a[2];a=a[3];return Math.sqrt(f*f+b*b+c*c+a*a)};i.len=i.length;i.squaredLength=function(a){var f=a[0],b=a[1],c=a[2];a=a[3];return f*f+b*b+c*c+a*a};i.sqrLen=i.squaredLength;i.negate=function(a,f){a[0]=-f[0];a[1]=-f[1];a[2]=-f[2];a[3]=-f[3];return a};i.inverse=function(a,f){a[0]=1/f[0];a[1]=1/f[1];a[2]=1/f[2];a[3]=1/f[3];return a};i.normalize=function(a,f){var b=f[0],c=f[1],d=f[2],e=f[3],b=b*b+c*c+d*d+e*e;0<b&&(b=1/Math.sqrt(b),a[0]=f[0]*b,a[1]=f[1]*b,a[2]=f[2]*b,a[3]=f[3]*b);return a};\ni.dot=function(a,f){return a[0]*f[0]+a[1]*f[1]+a[2]*f[2]+a[3]*f[3]};i.lerp=function(a,f,b,c){var d=f[0],e=f[1],l=f[2];f=f[3];a[0]=d+c*(b[0]-d);a[1]=e+c*(b[1]-e);a[2]=l+c*(b[2]-l);a[3]=f+c*(b[3]-f);return a};i.random=function(a,f){f=f||1;a[0]=e();a[1]=e();a[2]=e();a[3]=e();i.normalize(a,a);i.scale(a,a,f);return a};i.transformMat4=function(a,f,b){var c=f[0],d=f[1],e=f[2];f=f[3];a[0]=b[0]*c+b[4]*d+b[8]*e+b[12]*f;a[1]=b[1]*c+b[5]*d+b[9]*e+b[13]*f;a[2]=b[2]*c+b[6]*d+b[10]*e+b[14]*f;a[3]=b[3]*c+b[7]*d+\nb[11]*e+b[15]*f;return a};i.transformQuat=function(a,b,c){var d=b[0],e=b[1],n=b[2];b=c[0];var l=c[1],x=c[2];c=c[3];var u=c*d+l*n-x*e,J=c*e+x*d-b*n,g=c*n+b*e-l*d,d=-b*d-l*e-x*n;a[0]=u*c+d*-b+J*-x-g*-l;a[1]=J*c+d*-l+g*-b-u*-x;a[2]=g*c+d*-x+u*-l-J*-b;return a};var w=i.create();i.forEach=function(a,b,c,d,e,n){b||(b=4);c||(c=0);for(d=d?Math.min(d*b+c,a.length):a.length;c<d;c+=b)w[0]=a[c],w[1]=a[c+1],w[2]=a[c+2],w[3]=a[c+3],e(w,w,n),a[c]=w[0],a[c+1]=w[1],a[c+2]=w[2],a[c+3]=w[3];return a};i.str=function(a){return\"vec4(\"+\na[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\")\"};\"undefined\"!==typeof a&&(a.vec4=i);d={create:function(){var a=new c(4);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},clone:function(a){var b=new c(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(a===b){var c=b[1];a[1]=b[2];a[2]=c}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},invert:function(a,b){var c=\nb[0],d=b[1],e=b[2],n=b[3],l=c*n-e*d;if(!l)return null;l=1/l;a[0]=n*l;a[1]=-d*l;a[2]=-e*l;a[3]=c*l;return a},adjoint:function(a,b){var c=b[0];a[0]=b[3];a[1]=-b[1];a[2]=-b[2];a[3]=c;return a},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},multiply:function(a,b,c){var d=b[0],e=b[1],n=b[2];b=b[3];var l=c[0],x=c[1],u=c[2];c=c[3];a[0]=d*l+n*x;a[1]=e*l+b*x;a[2]=d*u+n*c;a[3]=e*u+b*c;return a}};d.mul=d.multiply;d.rotate=function(a,b,c){var d=b[0],e=b[1],n=b[2];b=b[3];var l=Math.sin(c);c=Math.cos(c);a[0]=\nd*c+n*l;a[1]=e*c+b*l;a[2]=d*-l+n*c;a[3]=e*-l+b*c;return a};d.scale=function(a,b,c){var d=b[1],e=b[2],n=b[3],l=c[0];c=c[1];a[0]=b[0]*l;a[1]=d*l;a[2]=e*c;a[3]=n*c;return a};d.str=function(a){return\"mat2(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\")\"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};d.LDU=function(a,b,c,d){a[2]=d[2]/d[0];c[0]=d[0];c[1]=d[1];c[3]=d[3]-a[2]*c[1];return[a,b,c]};\"undefined\"!==typeof a&&(a.mat2=d);d={create:function(){var a=\nnew c(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new c(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=b[4],x=b[5],u=c*n-d*e;if(!u)return null;u=1/u;a[0]=n*u;a[1]=-d*u;a[2]=-e*u;a[3]=c*u;a[4]=(e*x-n*l)*u;a[5]=(d*l-c*x)*u;return a},\ndeterminant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,c){var d=b[0],e=b[1],n=b[2],l=b[3],x=b[4];b=b[5];var u=c[0],g=c[1],h=c[2],K=c[3],j=c[4];c=c[5];a[0]=d*u+n*g;a[1]=e*u+l*g;a[2]=d*h+n*K;a[3]=e*h+l*K;a[4]=d*j+n*c+x;a[5]=e*j+l*c+b;return a}};d.mul=d.multiply;d.rotate=function(a,b,c){var d=b[0],e=b[1],n=b[2],l=b[3],x=b[4];b=b[5];var u=Math.sin(c);c=Math.cos(c);a[0]=d*c+n*u;a[1]=e*c+l*u;a[2]=d*-u+n*c;a[3]=e*-u+l*c;a[4]=x;a[5]=b;return a};d.scale=function(a,b,c){var d=b[1],e=b[2],\nn=b[3],l=b[4],x=b[5],u=c[0];c=c[1];a[0]=b[0]*u;a[1]=d*u;a[2]=e*c;a[3]=n*c;a[4]=l;a[5]=x;return a};d.translate=function(a,b,c){var d=b[0],e=b[1],n=b[2],l=b[3],x=b[4];b=b[5];var u=c[0];c=c[1];a[0]=d;a[1]=e;a[2]=n;a[3]=l;a[4]=d*u+n*c+x;a[5]=e*u+l*c+b;return a};d.str=function(a){return\"mat2d(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\", \"+a[4]+\", \"+a[5]+\")\"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};\"undefined\"!==\ntypeof a&&(a.mat2d=d);d={create:function(){var a=new c(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a},clone:function(a){var b=new c(9);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},\nidentity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(a===b){var c=b[1],d=b[2],e=b[5];a[1]=b[3];a[2]=b[6];a[3]=c;a[5]=b[7];a[6]=d;a[7]=e}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=b[4],x=b[5],u=b[6],g=b[7],h=b[8],K=h*l-x*g,j=-h*n+x*u,m=g*n-l*u,i=c*K+d*j+e*m;if(!i)return null;i=1/i;a[0]=K*i;a[1]=(-h*d+e*g)*i;a[2]=(x*\nd-e*l)*i;a[3]=j*i;a[4]=(h*c-e*u)*i;a[5]=(-x*c+e*n)*i;a[6]=m*i;a[7]=(-g*c+d*u)*i;a[8]=(l*c-d*n)*i;return a},adjoint:function(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=b[4],x=b[5],u=b[6],g=b[7],h=b[8];a[0]=l*h-x*g;a[1]=e*g-d*h;a[2]=d*x-e*l;a[3]=x*u-n*h;a[4]=c*h-e*u;a[5]=e*n-c*x;a[6]=n*g-l*u;a[7]=d*u-c*g;a[8]=c*l-d*n;return a},determinant:function(a){var b=a[3],c=a[4],d=a[5],e=a[6],n=a[7],l=a[8];return a[0]*(l*c-d*n)+a[1]*(-l*b+d*e)+a[2]*(n*b-c*e)},multiply:function(a,b,c){var d=b[0],e=b[1],n=b[2],l=b[3],\nx=b[4],u=b[5],g=b[6],h=b[7];b=b[8];var j=c[0],m=c[1],i=c[2],k=c[3],q=c[4],t=c[5],s=c[6],r=c[7];c=c[8];a[0]=j*d+m*l+i*g;a[1]=j*e+m*x+i*h;a[2]=j*n+m*u+i*b;a[3]=k*d+q*l+t*g;a[4]=k*e+q*x+t*h;a[5]=k*n+q*u+t*b;a[6]=s*d+r*l+c*g;a[7]=s*e+r*x+c*h;a[8]=s*n+r*u+c*b;return a}};d.mul=d.multiply;d.translate=function(a,b,c){var d=b[0],e=b[1],n=b[2],l=b[3],x=b[4],u=b[5],g=b[6],h=b[7];b=b[8];var j=c[0];c=c[1];a[0]=d;a[1]=e;a[2]=n;a[3]=l;a[4]=x;a[5]=u;a[6]=j*d+c*l+g;a[7]=j*e+c*x+h;a[8]=j*n+c*u+b;return a};d.rotate=\nfunction(a,b,c){var d=b[0],e=b[1],n=b[2],l=b[3],x=b[4],u=b[5],g=b[6],h=b[7];b=b[8];var j=Math.sin(c);c=Math.cos(c);a[0]=c*d+j*l;a[1]=c*e+j*x;a[2]=c*n+j*u;a[3]=c*l-j*d;a[4]=c*x-j*e;a[5]=c*u-j*n;a[6]=g;a[7]=h;a[8]=b;return a};d.scale=function(a,b,c){var d=c[0];c=c[1];a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=c*b[3];a[4]=c*b[4];a[5]=c*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};d.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};d.fromQuat=\nfunction(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=c+c,x=d+d,u=e+e,c=c*l,g=d*l,d=d*x,h=e*l,j=e*x,e=e*u,l=n*l,x=n*x,n=n*u;a[0]=1-d-e;a[3]=g-n;a[6]=h+x;a[1]=g+n;a[4]=1-c-e;a[7]=j-l;a[2]=h-x;a[5]=j+l;a[8]=1-c-d;return a};d.normalFromMat4=function(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=b[4],x=b[5],u=b[6],g=b[7],h=b[8],j=b[9],m=b[10],i=b[11],k=b[12],q=b[13],t=b[14],s=b[15],r=c*x-d*l,z=c*u-e*l,w=c*g-n*l,A=d*u-e*x,E=d*g-n*x,F=e*g-n*u,G=h*q-j*k,H=h*t-m*k,h=h*s-i*k,I=j*t-m*q,j=j*s-i*q,m=m*s-i*t,i=r*m-z*j+w*I+\nA*h-E*H+F*G;if(!i)return null;i=1/i;a[0]=(x*m-u*j+g*I)*i;a[1]=(u*h-l*m-g*H)*i;a[2]=(l*j-x*h+g*G)*i;a[3]=(e*j-d*m-n*I)*i;a[4]=(c*m-e*h+n*H)*i;a[5]=(d*h-c*j-n*G)*i;a[6]=(q*F-t*E+s*A)*i;a[7]=(t*w-k*F-s*z)*i;a[8]=(k*E-q*w+s*r)*i;return a};d.str=function(a){return\"mat3(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\", \"+a[4]+\", \"+a[5]+\", \"+a[6]+\", \"+a[7]+\", \"+a[8]+\")\"};d.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],\n2)+Math.pow(a[7],2)+Math.pow(a[8],2))};\"undefined\"!==typeof a&&(a.mat3=d);var r={create:function(){var a=new c(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new c(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=\nb[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(a===b){var c=b[1],d=b[2],e=b[3],n=b[6],l=b[7],g=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=c;a[6]=b[9];a[7]=b[13];a[8]=d;a[9]=n;a[11]=b[14];a[12]=e;a[13]=l;a[14]=g}else a[0]=\nb[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},invert:function(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=b[4],g=b[5],u=b[6],h=b[7],j=b[8],m=b[9],i=b[10],k=b[11],q=b[12],t=b[13],s=b[14],r=b[15],z=c*g-d*l,w=c*u-e*l,B=c*h-n*l,A=d*u-e*g,E=d*h-n*g,F=e*h-n*u,G=j*t-m*q,H=j*s-i*q,I=j*r-k*q,L=m*s-i*t,M=m*r-k*t,O=i*r-k*s,D=z*O-w*M+B*L+A*I-E*H+F*G;if(!D)return null;D=1/D;a[0]=(g*O-u*\nM+h*L)*D;a[1]=(e*M-d*O-n*L)*D;a[2]=(t*F-s*E+r*A)*D;a[3]=(i*E-m*F-k*A)*D;a[4]=(u*I-l*O-h*H)*D;a[5]=(c*O-e*I+n*H)*D;a[6]=(s*B-q*F-r*w)*D;a[7]=(j*F-i*B+k*w)*D;a[8]=(l*M-g*I+h*G)*D;a[9]=(d*I-c*M-n*G)*D;a[10]=(q*E-t*B+r*z)*D;a[11]=(m*B-j*E-k*z)*D;a[12]=(g*H-l*L-u*G)*D;a[13]=(c*L-d*H+e*G)*D;a[14]=(t*w-q*A-s*z)*D;a[15]=(j*A-m*w+i*z)*D;return a},adjoint:function(a,b){var c=b[0],d=b[1],e=b[2],n=b[3],l=b[4],g=b[5],h=b[6],j=b[7],m=b[8],i=b[9],k=b[10],q=b[11],t=b[12],s=b[13],r=b[14],z=b[15];a[0]=g*(k*z-q*r)-\ni*(h*z-j*r)+s*(h*q-j*k);a[1]=-(d*(k*z-q*r)-i*(e*z-n*r)+s*(e*q-n*k));a[2]=d*(h*z-j*r)-g*(e*z-n*r)+s*(e*j-n*h);a[3]=-(d*(h*q-j*k)-g*(e*q-n*k)+i*(e*j-n*h));a[4]=-(l*(k*z-q*r)-m*(h*z-j*r)+t*(h*q-j*k));a[5]=c*(k*z-q*r)-m*(e*z-n*r)+t*(e*q-n*k);a[6]=-(c*(h*z-j*r)-l*(e*z-n*r)+t*(e*j-n*h));a[7]=c*(h*q-j*k)-l*(e*q-n*k)+m*(e*j-n*h);a[8]=l*(i*z-q*s)-m*(g*z-j*s)+t*(g*q-j*i);a[9]=-(c*(i*z-q*s)-m*(d*z-n*s)+t*(d*q-n*i));a[10]=c*(g*z-j*s)-l*(d*z-n*s)+t*(d*j-n*g);a[11]=-(c*(g*q-j*i)-l*(d*q-n*i)+m*(d*j-n*g));a[12]=\n-(l*(i*r-k*s)-m*(g*r-h*s)+t*(g*k-h*i));a[13]=c*(i*r-k*s)-m*(d*r-e*s)+t*(d*k-e*i);a[14]=-(c*(g*r-h*s)-l*(d*r-e*s)+t*(d*h-e*g));a[15]=c*(g*k-h*i)-l*(d*k-e*i)+m*(d*h-e*g);return a},determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],n=a[4],l=a[5],g=a[6],h=a[7],j=a[8],i=a[9],m=a[10],k=a[11],q=a[12],s=a[13],t=a[14];a=a[15];return(b*l-c*n)*(m*a-k*t)-(b*g-d*n)*(i*a-k*s)+(b*h-e*n)*(i*t-m*s)+(c*g-d*l)*(j*a-k*q)-(c*h-e*l)*(j*t-m*q)+(d*h-e*g)*(j*s-i*q)},multiply:function(a,b,c){var d=b[0],e=b[1],n=b[2],\nl=b[3],g=b[4],h=b[5],j=b[6],i=b[7],m=b[8],k=b[9],q=b[10],s=b[11],t=b[12],r=b[13],z=b[14];b=b[15];var w=c[0],C=c[1],B=c[2],A=c[3];a[0]=w*d+C*g+B*m+A*t;a[1]=w*e+C*h+B*k+A*r;a[2]=w*n+C*j+B*q+A*z;a[3]=w*l+C*i+B*s+A*b;w=c[4];C=c[5];B=c[6];A=c[7];a[4]=w*d+C*g+B*m+A*t;a[5]=w*e+C*h+B*k+A*r;a[6]=w*n+C*j+B*q+A*z;a[7]=w*l+C*i+B*s+A*b;w=c[8];C=c[9];B=c[10];A=c[11];a[8]=w*d+C*g+B*m+A*t;a[9]=w*e+C*h+B*k+A*r;a[10]=w*n+C*j+B*q+A*z;a[11]=w*l+C*i+B*s+A*b;w=c[12];C=c[13];B=c[14];A=c[15];a[12]=w*d+C*g+B*m+A*t;a[13]=\nw*e+C*h+B*k+A*r;a[14]=w*n+C*j+B*q+A*z;a[15]=w*l+C*i+B*s+A*b;return a}};r.mul=r.multiply;r.translate=function(a,b,c){var d=c[0],e=c[1];c=c[2];var n,l,g,h,j,i,m,k,q,s,t,r;b===a?(a[12]=b[0]*d+b[4]*e+b[8]*c+b[12],a[13]=b[1]*d+b[5]*e+b[9]*c+b[13],a[14]=b[2]*d+b[6]*e+b[10]*c+b[14],a[15]=b[3]*d+b[7]*e+b[11]*c+b[15]):(n=b[0],l=b[1],g=b[2],h=b[3],j=b[4],i=b[5],m=b[6],k=b[7],q=b[8],s=b[9],t=b[10],r=b[11],a[0]=n,a[1]=l,a[2]=g,a[3]=h,a[4]=j,a[5]=i,a[6]=m,a[7]=k,a[8]=q,a[9]=s,a[10]=t,a[11]=r,a[12]=n*d+j*e+q*c+\nb[12],a[13]=l*d+i*e+s*c+b[13],a[14]=g*d+m*e+t*c+b[14],a[15]=h*d+k*e+r*c+b[15]);return a};r.scale=function(a,b,c){var d=c[0],e=c[1];c=c[2];a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*c;a[9]=b[9]*c;a[10]=b[10]*c;a[11]=b[11]*c;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};r.rotate=function(a,c,d,e){var g=e[0],n=e[1];e=e[2];var l=Math.sqrt(g*g+n*n+e*e),h,j,i,m,k,q,s,t,r,z,w,Q,C,B,A,E,F,G,H,I;if(Math.abs(l)<b)return null;l=1/l;g*=\nl;n*=l;e*=l;h=Math.sin(d);j=Math.cos(d);i=1-j;d=c[0];l=c[1];m=c[2];k=c[3];q=c[4];s=c[5];t=c[6];r=c[7];z=c[8];w=c[9];Q=c[10];C=c[11];B=g*g*i+j;A=n*g*i+e*h;E=e*g*i-n*h;F=g*n*i-e*h;G=n*n*i+j;H=e*n*i+g*h;I=g*e*i+n*h;g=n*e*i-g*h;n=e*e*i+j;a[0]=d*B+q*A+z*E;a[1]=l*B+s*A+w*E;a[2]=m*B+t*A+Q*E;a[3]=k*B+r*A+C*E;a[4]=d*F+q*G+z*H;a[5]=l*F+s*G+w*H;a[6]=m*F+t*G+Q*H;a[7]=k*F+r*G+C*H;a[8]=d*I+q*g+z*n;a[9]=l*I+s*g+w*n;a[10]=m*I+t*g+Q*n;a[11]=k*I+r*g+C*n;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a};\nr.rotateX=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[4],g=b[5],l=b[6],h=b[7],j=b[8],i=b[9],m=b[10],k=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*c+j*d;a[5]=g*c+i*d;a[6]=l*c+m*d;a[7]=h*c+k*d;a[8]=j*c-e*d;a[9]=i*c-g*d;a[10]=m*c-l*d;a[11]=k*c-h*d;return a};r.rotateY=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],g=b[1],l=b[2],h=b[3],j=b[8],i=b[9],m=b[10],k=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],\na[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c-j*d;a[1]=g*c-i*d;a[2]=l*c-m*d;a[3]=h*c-k*d;a[8]=e*d+j*c;a[9]=g*d+i*c;a[10]=l*d+m*c;a[11]=h*d+k*c;return a};r.rotateZ=function(a,b,c){var d=Math.sin(c);c=Math.cos(c);var e=b[0],g=b[1],l=b[2],h=b[3],j=b[4],i=b[5],m=b[6],k=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*c+j*d;a[1]=g*c+i*d;a[2]=l*c+m*d;a[3]=h*c+k*d;a[4]=j*c-e*d;a[5]=i*c-g*d;a[6]=m*c-l*d;a[7]=k*c-h*d;return a};r.fromRotationTranslation=\nfunction(a,b,c){var d=b[0],e=b[1],g=b[2],h=b[3],j=d+d,i=e+e,m=g+g;b=d*j;var k=d*i,d=d*m,q=e*i,e=e*m,g=g*m,j=h*j,i=h*i,h=h*m;a[0]=1-(q+g);a[1]=k+h;a[2]=d-i;a[3]=0;a[4]=k-h;a[5]=1-(b+g);a[6]=e+j;a[7]=0;a[8]=d+i;a[9]=e-j;a[10]=1-(b+q);a[11]=0;a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;return a};r.fromQuat=function(a,b){var c=b[0],d=b[1],e=b[2],g=b[3],h=c+c,j=d+d,i=e+e,c=c*h,m=d*h,d=d*j,k=e*h,q=e*j,e=e*i,h=g*h,j=g*j,g=g*i;a[0]=1-d-e;a[1]=m+g;a[2]=k-j;a[3]=0;a[4]=m-g;a[5]=1-c-e;a[6]=q+h;a[7]=0;a[8]=k+j;\na[9]=q-h;a[10]=1-c-d;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};r.frustum=function(a,b,c,d,e,g,h){var j=1/(c-b),i=1/(e-d),m=1/(g-h);a[0]=2*g*j;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*g*i;a[6]=0;a[7]=0;a[8]=(c+b)*j;a[9]=(e+d)*i;a[10]=(h+g)*m;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*(h*g)*m;a[15]=0;return a};r.perspective=function(a,b,c,d,e){b=1/Math.tan(b/2);var g=1/(d-e);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(e+d)*g;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*e*d*g;a[15]=0;\nreturn a};r.ortho=function(a,b,c,d,e,g,h){var j=1/(b-c),i=1/(d-e),m=1/(g-h);a[0]=-2*j;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*i;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*m;a[11]=0;a[12]=(b+c)*j;a[13]=(e+d)*i;a[14]=(h+g)*m;a[15]=1;return a};r.lookAt=function(a,c,d,e){var g,h,j,i,m,k,q,s,t=c[0],z=c[1];c=c[2];j=e[0];i=e[1];h=e[2];q=d[0];e=d[1];g=d[2];if(Math.abs(t-q)<b&&Math.abs(z-e)<b&&Math.abs(c-g)<b)return r.identity(a);d=t-q;e=z-e;q=c-g;s=1/Math.sqrt(d*d+e*e+q*q);d*=s;e*=s;q*=s;g=i*q-h*e;h=h*d-j*q;j=j*e-i*\nd;(s=Math.sqrt(g*g+h*h+j*j))?(s=1/s,g*=s,h*=s,j*=s):j=h=g=0;i=e*j-q*h;m=q*g-d*j;k=d*h-e*g;(s=Math.sqrt(i*i+m*m+k*k))?(s=1/s,i*=s,m*=s,k*=s):k=m=i=0;a[0]=g;a[1]=i;a[2]=d;a[3]=0;a[4]=h;a[5]=m;a[6]=e;a[7]=0;a[8]=j;a[9]=k;a[10]=q;a[11]=0;a[12]=-(g*t+h*z+j*c);a[13]=-(i*t+m*z+k*c);a[14]=-(d*t+e*z+q*c);a[15]=1;return a};r.str=function(a){return\"mat4(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\", \"+a[4]+\", \"+a[5]+\", \"+a[6]+\", \"+a[7]+\", \"+a[8]+\", \"+a[9]+\", \"+a[10]+\", \"+a[11]+\", \"+a[12]+\", \"+a[13]+\", \"+a[14]+\", \"+\na[15]+\")\"};r.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};\"undefined\"!==typeof a&&(a.mat4=r);var m={create:function(){var a=new c(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},q=g.create(),s=g.fromValues(1,0,0),t=g.fromValues(0,1,0);m.rotationTo=\nfunction(a,b,c){var d=g.dot(b,c);if(-0.999999>d)return g.cross(q,s,b),1E-6>g.length(q)&&g.cross(q,t,b),g.normalize(q,q),m.setAxisAngle(a,q,Math.PI),a;if(0.999999<d)return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a;g.cross(q,b,c);a[0]=q[0];a[1]=q[1];a[2]=q[2];a[3]=1+d;return m.normalize(a,a)};var z=d.create();m.setAxes=function(a,b,c,d){z[0]=c[0];z[3]=c[1];z[6]=c[2];z[1]=d[0];z[4]=d[1];z[7]=d[2];z[2]=-b[0];z[5]=-b[1];z[8]=-b[2];return m.normalize(a,m.fromMat3(a,z))};m.clone=i.clone;m.fromValues=i.fromValues;m.copy=\ni.copy;m.set=i.set;m.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};m.setAxisAngle=function(a,b,c){c*=0.5;var d=Math.sin(c);a[0]=d*b[0];a[1]=d*b[1];a[2]=d*b[2];a[3]=Math.cos(c);return a};m.add=i.add;m.multiply=function(a,b,c){var d=b[0],e=b[1],g=b[2];b=b[3];var h=c[0],j=c[1],i=c[2];c=c[3];a[0]=d*c+b*h+e*i-g*j;a[1]=e*c+b*j+g*h-d*i;a[2]=g*c+b*i+d*j-e*h;a[3]=b*c-d*h-e*j-g*i;return a};m.mul=m.multiply;m.scale=i.scale;m.rotateX=function(a,b,c){c*=0.5;var d=b[0],e=b[1],g=b[2];b=b[3];var h=Math.sin(c);\nc=Math.cos(c);a[0]=d*c+b*h;a[1]=e*c+g*h;a[2]=g*c-e*h;a[3]=b*c-d*h;return a};m.rotateY=function(a,b,c){c*=0.5;var d=b[0],e=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c-g*h;a[1]=e*c+b*h;a[2]=g*c+d*h;a[3]=b*c-e*h;return a};m.rotateZ=function(a,b,c){c*=0.5;var d=b[0],e=b[1],g=b[2];b=b[3];var h=Math.sin(c);c=Math.cos(c);a[0]=d*c+e*h;a[1]=e*c-d*h;a[2]=g*c+b*h;a[3]=b*c-g*h;return a};m.calculateW=function(a,b){var c=b[0],d=b[1],e=b[2];a[0]=c;a[1]=d;a[2]=e;a[3]=Math.sqrt(Math.abs(1-c*c-d*d-\ne*e));return a};m.dot=i.dot;m.lerp=i.lerp;m.slerp=function(a,b,c,d){var e=b[0],g=b[1],h=b[2];b=b[3];var j=c[0],i=c[1],m=c[2];c=c[3];var k,q,s;q=e*j+g*i+h*m+b*c;0>q&&(q=-q,j=-j,i=-i,m=-m,c=-c);1E-6<1-q?(k=Math.acos(q),s=Math.sin(k),q=Math.sin((1-d)*k)/s,d=Math.sin(d*k)/s):q=1-d;a[0]=q*e+d*j;a[1]=q*g+d*i;a[2]=q*h+d*m;a[3]=q*b+d*c;return a};m.invert=function(a,b){var c=b[0],d=b[1],e=b[2],g=b[3],h=c*c+d*d+e*e+g*g,h=h?1/h:0;a[0]=-c*h;a[1]=-d*h;a[2]=-e*h;a[3]=g*h;return a};m.conjugate=function(a,b){a[0]=\n-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};m.length=i.length;m.len=m.length;m.squaredLength=i.squaredLength;m.sqrLen=m.squaredLength;m.normalize=i.normalize;m.fromMat3=function(a,b){var c=b[0]+b[4]+b[8];if(0<c)c=Math.sqrt(c+1),a[3]=0.5*c,c=0.5/c,a[0]=(b[5]-b[7])*c,a[1]=(b[6]-b[2])*c,a[2]=(b[1]-b[3])*c;else{var d=0;b[4]>b[0]&&(d=1);b[8]>b[3*d+d]&&(d=2);var e=(d+1)%3,g=(d+2)%3,c=Math.sqrt(b[3*d+d]-b[3*e+e]-b[3*g+g]+1);a[d]=0.5*c;c=0.5/c;a[3]=(b[3*e+g]-b[3*g+e])*c;a[e]=(b[3*e+d]+b[3*d+e])*c;a[g]=\n(b[3*g+d]+b[3*d+g])*c}return a};m.str=function(a){return\"quat(\"+a[0]+\", \"+a[1]+\", \"+a[2]+\", \"+a[3]+\")\"};\"undefined\"!==typeof a&&(a.quat=m)})(GLMAT);try{module.exports=GLMAT}catch(e$$10){}try{glm.exists&&alert(\"glm.common.js loaded over exist glm instance: \"+glm)}catch(e$$11){}glm=null;GLMJS_PREFIX=\"glm-js: \";\nGLM={$DEBUG:\"undefined\"!==typeof $GLM_DEBUG&&$GLM_DEBUG,version:\"0.0.6c\",GLM_VERSION:96,$outer:{polyfills:GLM_polyfills(),functions:{},intern:function(a,b){if(a)if(void 0===b&&\"object\"===typeof a)for(var c in a)GLM.$outer.intern(c,a[c]);else return GLM.$DEBUG&&GLM.$outer.console.debug(\"intern \"+a,b&&(b.name||typeof b)),GLM.$outer[a]=b},$import:function(a){GLM.$outer.$import=function(){throw Error(\"glm.$outer.$import already called...\");};GLM.$outer.intern(a.statics);GLM.$template.extend(GLM,GLM.$template[\"declare<T,V,number>\"](a[\"declare<T,V,number>\"]),\nGLM.$template[\"declare<T,V,...>\"](a[\"declare<T,V,...>\"]),GLM.$template[\"declare<T,...>\"](a[\"declare<T,...>\"]),GLM.$template[\"declare<T>\"](a[\"declare<T>\"]));GLM.$init(a)},console:$GLM_reset_logging(),quat_array_from_xyz:function(a){var b=glm.quat(),c=glm.mat3(1);b[\"*=\"](glm.angleAxis(a.x,c[0]));b[\"*=\"](glm.angleAxis(a.y,c[1]));b[\"*=\"](glm.angleAxis(a.z,c[2]));return b.elements},Array:Array,ArrayBuffer:ArrayBuffer,Float32Array:Float32Array,Float64Array:Float64Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,\nUint32Array:Uint32Array,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,DataView:\"undefined\"!==typeof DataView&&DataView,$rebindTypedArrays:function(a){var b=Object.keys(GLM.$outer).filter(RegExp.prototype.test.bind(/.Array$|^ArrayBuffer$|^DataView$/)).map(function(b){var e=a.call(this,b,GLM.$outer[b]);e!==GLM.$outer[b]&&(GLM.$outer.console.warn(\"$rebindTypedArrays(\"+b+\")... replacing\"),GLM.$outer[b]=e);return e});GLM.$subarray=GLM.patch_subarray();return b}},$extern:$GLM_extern,$log:$GLM_log,\nGLMJSError:$GLM_GLMJSError(\"GLMJSError\"),_radians:function(a){return a*this.PI/180}.bind(Math),_degrees:function(a){return 180*a/this.PI}.bind(Math),normalize:$GLM_extern(\"normalize\"),inverse:$GLM_extern(\"inverse\"),distance:$GLM_extern(\"distance\"),length:$GLM_extern(\"length\"),length2:$GLM_extern(\"length2\"),transpose:$GLM_extern(\"transpose\"),slerp:$GLM_extern(\"slerp\"),mix:$GLM_extern(\"mix\"),clamp:$GLM_extern(\"clamp\"),angleAxis:$GLM_extern(\"angleAxis\"),rotate:$GLM_extern(\"rotate\"),scale:$GLM_extern(\"scale\"),\ntranslate:$GLM_extern(\"translate\"),lookAt:$GLM_extern(\"lookAt\"),cross:$GLM_extern(\"cross\"),dot:$GLM_extern(\"dot\"),perspective:function(a,b,c,e){return GLM.$outer.mat4_perspective(a,b,c,e)},ortho:function(a,b,c,e,d,h){return GLM.$outer.mat4_ortho(a,b,c,e,d,h)},_eulerAngles:function(a){return GLM.$outer.vec3_eulerAngles(a)},angle:function(a){return 2*Math.acos(a.w)},axis:function(a){var b=1-a.w*a.w;if(0>=b)return glm.vec3(0,0,1);b=1/Math.sqrt(b);return glm.vec3(a.x*b,a.y*b,a.z*b)},$from_ptr:function(a,\nb,c){if(this!==GLM)throw new GLM.GLMJSError(\"... use glm.make_<type>() (not new glm.make<type>())\");b=new GLM.$outer.Float32Array(b.buffer||b,c||0,a.componentLength);b=new GLM.$outer.Float32Array(b);return new a(b)},make_vec2:function(a,b){return GLM.$from_ptr.call(this,GLM.vec2,a,2===arguments.length?b:a.byteOffset)},make_vec3:function(a,b){return GLM.$from_ptr.call(this,GLM.vec3,a,2===arguments.length?b:a.byteOffset)},make_vec4:function(a,b){return GLM.$from_ptr.call(this,GLM.vec4,a,2===arguments.length?\nb:a.byteOffset)},make_quat:function(a,b){return GLM.$from_ptr.call(this,GLM.quat,a,2===arguments.length?b:a.byteOffset)},make_mat3:function(a,b){return GLM.$from_ptr.call(this,GLM.mat3,a,2===arguments.length?b:a.byteOffset)},make_mat4:function(a,b){return GLM.$from_ptr.call(this,GLM.mat4,a,2===arguments.length?b:a.byteOffset)},diagonal4x4:function(a){if(\"vec4\"!==GLM.$typeof(a))throw new GLM.GLMJSError(\"unsupported argtype to GLM.diagonal4x4: \"+[\"type:\"+GLM.$typeof(a)]);a=a.elements;return new GLM.mat4([a[0],\n0,0,0,0,a[1],0,0,0,0,a[2],0,0,0,0,a[3]])},diagonal3x3:function(a){if(\"vec3\"!==GLM.$typeof(a))throw new GLM.GLMJSError(\"unsupported argtype to GLM.diagonal3x3: \"+[\"type:\"+GLM.$typeof(a)]);a=a.elements;return new GLM.mat3([a[0],0,0,0,a[1],0,0,0,a[2]])},_toMat4:function(a){return new GLM.mat4(GLM.$outer.mat4_array_from_quat(a))},FAITHFUL:!0,to_string:function(a,b){try{var c=a.$type||typeof a;if(!GLM[c])throw new GLM.GLMJSError(\"unsupported argtype to GLM.to_string: \"+[\"type:\"+c,a]);return GLM.FAITHFUL?\nGLM.$to_string(a,b).replace(/[\\t\\n]/g,\"\"):GLM.$to_string(a,b)}catch(e){return GLM.$DEBUG&&GLM.$outer.console.error(\"to_string error: \",c,a+\"\",e),e+\"\"}},$sizeof:function(a){return a.BYTES_PER_ELEMENT},$types:[],$isGLMConstructor:function(a){return!!(a&&a.prototype instanceof GLM.$GLMBaseType)},$getGLMType:function(a){return a instanceof GLM.$GLMBaseType&&a.constructor||\"string\"===typeof a&&GLM[a]},$isGLMObject:function(a){return!!(a instanceof GLM.$GLMBaseType&&a.$type)},$typeof:function(a){return a instanceof\nGLM.$GLMBaseType?a.$type:\"undefined\"},$to_array:function(a){return[].slice.call(a.elements)},$to_json:function(a,b,c){this instanceof GLM.$GLMBaseType&&(c=b,b=a,a=this);return JSON.stringify(GLM.$to_object(a),b,c)},$inspect:function(a){this instanceof GLM.$GLMBaseType&&(a=this);return GLM.$to_json(a,null,2)},_clamp:function(a,b,c){return a<b?b:a>c?c:a},_abs:function(a){return Math.abs(a)},_equal:function(a,b){return a===b},_epsilonEqual:function(a,b,c){return Math.abs(a-b)<c},_fract:function(a){return a-\nMath.floor(a)},_frexp:function(){function a(b,c){var e=GLM.$outer.DataView||a._DataView;if(0==b)return c&&Array.isArray(c)?c[0]=c[1]=0:[0,0];e=new e(new GLM.$outer.ArrayBuffer(8));e.setFloat64(0,b);var d=e.getUint32(0)>>>20&2047;0===d&&(e.setFloat64(0,b*Math.pow(2,64)),d=(e.getUint32(0)>>>20&2047)-64);e=d-1022;d=GLM.ldexp(b,-e);return c&&Array.isArray(c)?(c[0]=e,c[1]=d):[d,e]}a._DataView=function(a){this.buffer=a;this.setFloat64=function(a,b){if(0!==a)throw Error(\"...this is a very limited DataView emulator\");\n(new Uint8Array(this.buffer)).set([].reverse.call(new Uint8Array((new Float64Array([b])).buffer)),a)};this.getUint32=function(a){if(0!==a)throw Error(\"...this is a very limited DataView emulator\");return(new Uint32Array((new Uint8Array([].slice.call(new Uint8Array(this.buffer)).reverse())).buffer))[1]}};return a}(),_ldexp:function(a,b){return 1023<b?a*Math.pow(2,1023)*Math.pow(2,b-1023):-1074>b?a*Math.pow(2,-1074)*Math.pow(2,b+1074):a*Math.pow(2,b)},_max:Math.max,_min:Math.min,sqrt:Math.sqrt,__sign:function(a){return 0<\na?1:0>a?-1:+a},$constants:{epsilon:1E-6,euler:0.5772156649015329,e:Math.E,ln_ten:Math.LN10,ln_two:Math.LN2,pi:Math.PI,half_pi:Math.PI/2,quarter_pi:Math.PI/4,one_over_pi:1/Math.PI,two_over_pi:2/Math.PI,root_pi:Math.sqrt(Math.PI),root_two:Math.sqrt(2),root_three:Math.sqrt(3),two_over_root_pi:2/Math.sqrt(Math.PI),one_over_root_two:Math.SQRT1_2,root_two:Math.SQRT2},FIXEDPRECISION:6,$toFixedString:function(a,b,c,e){void 0===e&&(e=GLM.FIXEDPRECISION);if(!c||!c.map)throw Error(\"unsupported argtype to $toFixedString(..,..,props=\"+\ntypeof c+\")\");try{var d=\"\";c.map(function(c){c=b[d=c];if(!c.toFixed)throw Error(\"!toFixed in w\"+[c,a,JSON.stringify(b)]);return c.toFixed(0)})}catch(h){throw GLM.$DEBUG&&GLM.$outer.console.error(\"$toFixedString error\",a,typeof b,Object.prototype.toString.call(b),d),GLM.$DEBUG&&glm.$log(\"$toFixedString error\",a,typeof b,Object.prototype.toString.call(b),d),new GLM.GLMJSError(h);}c=c.map(function(a){return b[a].toFixed(e)});return a+\"(\"+c.join(\", \")+\")\"}};GLM._sign=Math.sign||GLM.__sign;\nfor(var p in GLM.$constants)(function(a,b){GLM[b]=function(){return a};GLM[b].valueOf=GLM[b]})(GLM.$constants[p],p);\nGLM.$GLMBaseType=function(){function a(a,c){var e=a.$||{};this.$type=c;this.$type_name=e.name||\"<\"+c+\">\";e.components&&(this.$components=e.components[0]);this.$len=this.components=a.componentLength;this.constructor=a;this.byteLength=a.BYTES_PER_ELEMENT;GLM.$types.push(c)}a.prototype={clone:function(){return new this.constructor(new this.elements.constructor(this.elements))},toString:function(){return GLM.$to_string(this)},inspect:function(){return GLM.$inspect(this)},toJSON:function(){return GLM.$to_object(this)}};\nObject.defineProperty(a.prototype,\"address\",{get:function(){var a=this.elements.byteOffset.toString(16);return\"0x00000000\".substr(0,10-a.length)+a}});return a}();\n(function(){function a(a,b,c){return a.subarray(b,c||a.length)}function b(a,b,c){var e=a.constructor;c=c||a.length;return new e(a.buffer,a.byteOffset+b*e.BYTES_PER_ELEMENT,c-b)}function c(){var a=new GLM.$outer.Float32Array([0,0]);a.subarray(1).subarray(0)[0]=1;var b=c.result=[a[1],(new GLM.$outer.Float32Array(16)).subarray(12,16).length];return!(a[1]!==b[0]||4!==b[1])}function e(a){var b=new GLM.$outer.Float32Array([0,0]);a(a(b,1),0)[0]=1;a=e.result=[b[1],a(new GLM.$outer.Float32Array(16),12,16).length];\nreturn!(b[1]!==a[0]||4!==a[1])}Object.defineProperty(GLM,\"patch_subarray\",{configurable:!0,value:function(){var d=!c()?b:a;d.workaround_broken_spidermonkey_subarray=b;d.native_subarray=a;if(!e(d))throw Error(\"failed to resolve working TypedArray.subarray implementation... \"+e.result);return d}})})();GLM.$subarray=GLM.patch_subarray();\nvar GLM_template=GLM.$template={_genArgError:function(a,b,c,e){~e.indexOf(void 0)&&(e=e.slice(0,e.indexOf(void 0)));var d=RegExp.prototype.test.bind(/^[^$_]/);return new GLM.GLMJSError(\"unsupported argtype to \"+b+\" \"+a.$sig+\": [typ=\"+c+\"] :: got arg types: \"+e.map(GLM.$template.jstypes.get)+\" // supported types: \"+Object.keys(a).filter(d).join(\"||\"))},jstypes:{get:function(a){return null===a?\"null\":void 0===a?\"undefined\":a.$type||GLM.$template.jstypes[typeof a]||GLM.$template.jstypes[a+\"\"]||function(a){if(\"object\"===\ntypeof a){if(a instanceof GLM.$outer.Float32Array)return\"Float32Array\";if(a instanceof GLM.$outer.ArrayBuffer)return\"ArrayBuffer\";if(Array.isArray(a))return\"array\"}return\"<unknown \"+[typeof a,a]+\">\"}(a)},\"0\":\"float\",\"boolean\":\"bool\",number:\"float\",string:\"string\",\"[object Float32Array]\":\"Float32Array\",\"[object ArrayBuffer]\":\"ArrayBuffer\",\"function\":\"function\"},_add_overrides:function(a,b){for(var c in b)b[c]&&GLM[c].override(a,b[c])},_add_inline_override:function(a,b,c){this[b]=eval(GLM.$template._traceable(\"glm_\"+\na+\"_\"+b,c))();return this},_inline_helpers:function(a,b){Object.defineProperty(a,\"GLM\",{value:GLM});return{$type:\"built-in\",$type_name:b,$template:a,F:a,dbg:b,override:this._add_inline_override.bind(a,b),link:function(c){var e=a[c];e||(e=a[[c,\"undefined\"]]);if(!e)throw new GLM.GLMJSError(\"error linking direct function for \"+b+\"<\"+c+\"> or \"+b+\"<\"+[c,void 0]+\">\");return/\\bthis[\\[.]/.test(e+\"\")?e.bind(a):e}}},\"template<T>\":function(a,b){a.$sig=\"template<T>\";var c=GLM.$template.jstypes,e=GLM.$template._genArgError,\nd=GLM.$GLMBaseType;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable(\"Tglm_\"+b,function(b){this instanceof d&&(b=this);var j=[b&&b.$type||c[typeof b]||c.get(b)||\"null\"];if(!a[j])throw e(a,arguments.callee.dbg,j,[b]);return a[j](b)}))())},\"template<T,...>\":function(a,b){a.$sig=\"template<T,...>\";var c=GLM.$template.jstypes,e=GLM.$template._genArgError,d=GLM.$GLMBaseType;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable(\"Tdotglm_\"+b,function(b){for(var j=Array(arguments.length),\ng=0;g<j.length;g++)j[g]=arguments[g];this instanceof d&&j.unshift(b=this);g=[b&&b.$type||c[typeof b]||c.get(b)||\"null\"];if(!a[g])throw e(a,arguments.callee.dbg,g,j);return a[g].apply(a,j)}))())},\"template<T,V,number>\":function(a,b){a.$sig=\"template<T,V,number>\";var c=GLM.$template.jstypes,e=GLM.$template._genArgError,d=GLM.GLMJSError,h=GLM.$GLMBaseType;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable(\"TVnglm_\"+b,function(){for(var b=Array(arguments.length),g=0;g<b.length;g++)b[g]=\narguments[g];this instanceof h&&b.unshift(this);var g=b[0],k=b[1],b=b[2],i=[g&&g.$type||c[typeof g]||c[g+\"\"]||\"<unknown \"+g+\">\",k&&k.$type||c[typeof k]||c[k+\"\"]||\"<unknown \"+k+\">\"];if(!a[i])throw e(a,arguments.callee.dbg,i,[g,k,b]);if(\"number\"!==typeof b)throw new d(arguments.callee.dbg+a.$sig+\": unsupported n type: \"+[typeof b,b]);return a[i](g,k,b)}))())},\"template<T,V,...>\":function(a,b){a.$sig=\"template<T,V,...>\";var c=GLM.$template.jstypes,e=GLM.$GLMBaseType,d=GLM.$template._genArgError,h=GLM.$outer.Array;\nreturn this.slingshot(this._inline_helpers(a,b),eval(this._traceable(\"TVglm_\"+b,function(){for(var b=new h(arguments.length),g=0;g<b.length;g++)b[g]=arguments[g];this instanceof e&&b.unshift(this);var g=b[0],k=b[1],g=[g&&g.$type||c[typeof g],k&&k.$type||c[typeof k]||c[k+\"\"]||h.isArray(k)&&\"array\"+k.length+\"\"||\"\"+k+\"\"];if(!a[g])throw d(a,arguments.callee.dbg,g,b);return a[g].apply(a,b)}))())},override:function(a,b,c,e,d){function h(a,c){GLM.$outer.console.debug(\"glm.$template.override: \"+b+\" ... \"+\nObject.keys(a.$template).filter(function(a){return!~a.indexOf(\"$\")}).map(function(a){return!~c.indexOf(a)?\"*\"+a+\"*\":a}).join(\" | \"))}GLM.$DEBUG&&GLM.$outer.console.debug(\"glm.$template.override: \",a,b,c.$op?'$op: [\"'+c.$op+'\"]':\"\");if(!e)throw Error(\"unspecified target group \"+e+' (expected override(<TV>, \"p\", {TSP}, ret={GROUP}))');var j=e[b];if(j&&j.$op!==c.$op)throw Error('glm.$template.override: mismatch merging existing override: .$op \"'+[j.$op,\"!=\",c.$op].join(\" \")+'\"  p='+[b,j.$op,c.$op,\"||\"+\nObject.keys(j.$template).join(\"||\")]);var g=GLM.$template[a](GLM.$template.deNify(c,b),b);if(j&&j.F.$sig!==g.F.$sig)throw Error('glm.$template.override: mismatch merging existing override: .$sig \"'+[j&&j.F.$sig,\"!=\",g.F.$sig].join(\" \")+'\"  p='+[b,j&&j.F.$sig,g.F.$sig,\"||\"+Object.keys(j&&j.$template||{}).join(\"||\")]);g.$op=c.$op;if(j){for(var k in g.$template)\"$op\"===k||\"$sig\"===k||(a=k in j.$template,!a||!0===d?(GLM.$DEBUG&&GLM.$outer.console.debug(\"glm.$template.override: \"+b+\" ... \"+k+\" merged\"),\nj.$template[k]=g.$template[k]):a&&GLM.$DEBUG&&GLM.$outer.console.debug(\"glm.$template.override: \"+b+\" ... \"+k+\" skipped\"));if(GLM.$DEBUG){var i=[];Object.keys(j.$template).forEach(function(a){a in g.$template||(GLM.$DEBUG&&GLM.$outer.console.debug(\"glm.$template.override: \"+b+\" ... \"+a+\" carried-forward\"),i.push(a))});h(e[b],i)}}else e[b]=g,GLM.$DEBUG&&h(e[b],[]);return e},_override:function(a,b,c){for(var e in b){if(\"mat4_scale\"!==e&&\"object\"!==typeof b[e])throw new GLM.GLMJSError(\"expect object property overrides\"+\n[e,b[e],Object.keys(c)]);\"object\"===typeof b[e]?this.override(a,e,b[e],c,!0):ret_scale=5}return c},slingshot:function(){return this.extend.apply(this,[].reverse.call(arguments))},extend:function(a,b){[].slice.call(arguments,1).forEach(function(b){if(b)for(var e in b)b.hasOwnProperty(e)&&(a[e]=b[e])});return a},\"declare<T,V,...>\":function(a){return!a?{}:this._override(\"template<T,V,...>\",a,GLM.$outer.functions)},\"declare<T>\":function(a){return!a?{}:this._override(\"template<T>\",a,GLM.$outer.functions)},\n\"declare<T,...>\":function(a){return!a?{}:this._override(\"template<T,...>\",a,GLM.$outer.functions)},\"declare<T,V,number>\":function(a){return!a?{}:this._override(\"template<T,V,number>\",a,GLM.$outer.functions)},_tojsname:function(a){return(a||\"_\").replace(/[^$a-zA-Z0-9_]/g,\"_\")},_traceable:function(a,b){var c=b;if(\"function\"!==typeof c)throw new GLM.GLMJSError(\"_traceable expects tidy function as second arg \"+c);if(!a)throw new GLM.GLMJSError(\"_traceable expects hint or what's the point\"+[c,a]);a=this._tojsname(a||\n\"_traceable\");c=c.toString().replace(/^(\\s*var\\s*(\\w+)\\s*=\\s*)__VA_ARGS__;/mg,function(a,b,c){return b+\"new Array(arguments.length);for(var I=0;I<varname.length;I++)varname[I]=arguments[I];\".replace(/I/g,\"__VA_ARGS__I\").replace(/varname/g,c)}).replace(/\\barguments[.]callee\\b/g,a);if(/^function _traceable/.test(c))throw new GLM.GLMJSError(\"already wrapped in a _traceable: \"+[c,a]);c='function _traceable(){ \"use strict\"; SRC; return HINT; }'.replace(\"HINT\",a.replace(/[$]/g,\"$$$$\")).replace(\"SRC\",c.replace(/[$]/g,\n\"$$$$\").replace(/^function\\s*\\(/,\"function \"+a+\"(\"));c=\"1,\"+c;if(GLM.$DEBUG)try{eval(c)}catch(e){throw console.error(\"_traceable error\",a,c,b,e),e;}return c},deNify:function(a,b){var c={vec:[2,3,4],mat:[3,4]},e=this._tojsname.bind(this),d;for(d in a){var h=!1;d.replace(/([vV]ec|[mM]at)(?:\\w*)<N>/,function(j,g){h=!0;var k=a[d];delete a[d];c[g.toLowerCase()].forEach(function(c){var g=d.replace(/<N[*]N>/g,c*c).replace(/<N>/g,c);if(!(g in a)){var h=e(\"glm_\"+b+\"_\"+g);a[g]=eval(\"'use strict'; 1,\"+(k+\"\").replace(/^function\\s*\\(/,\n\"function \"+h+\"(\").replace(/N[*]N/g,c*c).replace(/N/g,c))}})}.bind(this));/^[$]/.test(d)?GLM.$DEBUG&&GLM.$outer.console.debug(\"@ NOT naming \"+d):!h&&(\"function\"===typeof a[d]&&!a[d].name)&&(GLM.$DEBUG&&GLM.$outer.console.debug(\"naming \"+e(b+\"_\"+d)),a[d]=eval(this._traceable(\"glm_\"+b+\"_\"+d,a[d]))())}return a},$_module_stamp:+new Date,_iso:\"/[*][^/*]*[*]/\",_get_argnames:function(a){return(a+\"\").replace(/\\s+/g,\"\").replace(RegExp(this._iso,\"g\"),\"\").split(\"){\",1)[0].replace(/^[^(]*[(]/,\"\").replace(/=[^,]+/g,\n\"\").split(\",\").filter(Boolean)},_fix_$_names:function(a,b){Object.keys(b).filter(function(a){return\"function\"===typeof b[a]&&!b[a].name}).map(function(c){var e=a+\"_\"+c;GLM.$DEBUG&&GLM.$outer.console.debug(\"naming $.\"+c+\" == \"+e,this._traceable(e,b[c]));b[c]=eval(this._traceable(\"glm_\"+e,b[c]))()}.bind(this));return b},_typedArrayMaker:function(a,b){return function(c){if(c.length===a)return new b(c);var e=new b(a);e.set(c);return e}},GLMType:function(a,b){var c=this._fix_$_names(a,b),e=c.identity.length,\nd,h=Object,j=GLM.$template._get_argnames.bind(GLM.$template),g=GLM.GLMJSError,k={},i;for(i in c)\"function\"===typeof c[i]&&function(a){k[i]=function(b){return a.apply(c,b)}}(c[i]);d=function(b){var d=k[typeof b[0]+b.length];if(!d){var e=\"glm.\"+a;b=e+\"(\"+b.map(function(a){return typeof a})+\")\";d=h.keys(c).filter(function(a){return\"function\"===typeof c[a]&&/^\\w+\\d+$/.test(a)}).map(function(a){return e+\"(\"+j(c[a])+\")\"});throw new g(\"no constructor found for: \"+b+\"\\nsupported signatures:\\n\\t\"+d.join(\"\\n\\t\"));\n}return d};var w,r=GLM;GLM.$template._get_argnames.bind(GLM.$template);w=function(b,c){2<r.$DEBUG&&r.$outer.console.info(\"adopting elements...\",typeof b);if(b.length!=e){if(!1===c)return c;r.$outer.console.error(a+\" elements size mismatch: \"+[\"wanted:\"+e,\"handed:\"+b.length]);var d=r.$subarray(b,0,e);throw new r.GLMJSError(a+\" elements size mismatch: \"+[\"wanted:\"+e,\"handed:\"+b.length,\"theoreticaly-correctable?:\"+(d.length===e)]);}return b};var m=this._typedArrayMaker(e,GLM.$outer.Float32Array),q,s=\nGLM.$outer;q=function(a){return a instanceof s.Float32Array};var t=function(a,b,c,g,h,i,j,k){return eval(k(\"glm_\"+h+\"$class\",function(c){for(var f=new a(arguments.length),g=0;g<f.length;g++)f[g]=arguments[g];var h=d(f),g=t;if(this instanceof g)f=q(c)?w(c):m(h(f)),b.defineProperty(this,\"elements\",{enumerable:!1,configurable:!0,value:f});else return f=q(c)&&c.length===e?m(c):h(f),new g(f)}))()}(Array,Object,GLM,c,a,GLM.$template._get_argnames.bind(GLM.$template),GLM.GLMJSError,GLM.$template._traceable.bind(GLM.$template));\nc.components=c.components?c.components.map(function(a){return\"string\"===typeof a?a.split(\"\"):a}):[];t.$=c;t.componentLength=e;t.BYTES_PER_ELEMENT=e*GLM.$outer.Float32Array.BYTES_PER_ELEMENT;t.prototype=new GLM.$GLMBaseType(t,a);t.toJSON=function(){var b={glm$type:a,glm$class:t.prototype.$type_name,glm$eg:(new t).object},c;for(c in t)/function |^[$]/.test(c+t[c])||(b[c]=t[c]);return b};return t}};\nGLM.$template[\"declare<T,V,...>\"]({cross:{\"vec2,vec2\":function(a,b){return this.GLM.vec3(0,0,a.x*b.y-a.y*b.x)}},distance:{\"vec<N>,vec<N>\":function(a,b){return this.GLM.length(b.sub(a))}}});\nGLM.$template[\"declare<T,V,number>\"]({mix:{\"float,float\":function(a,b,c){return b*c+a*(1-c)},\"vec<N>,vec<N>\":function(a,b,c){var e=1-c,d=new this.GLM.vecN(new a.elements.constructor(N)),h=d.elements;a=a.elements;b=b.elements;for(var j=0;j<N;j++)h[j]=b[j]*c+a[j]*e;return d}},clamp:{\"float,float\":function(a,b,c){return GLM._clamp(a,b,c)},\"vec<N>,float\":function(a,b,c){return new GLM.vecN(GLM.$to_array(a).map(function(a){return GLM._clamp(a,b,c)}))}},epsilonEqual:{\"float,float\":GLM._epsilonEqual,\"vec<N>,vec<N>\":function(a,\nb,c){for(var e=this[\"float,float\"],d=glm.bvecN(),h=0;h<N;h++)d[h]=e(a[h],b[h],c);return d},\"ivec<N>,ivec<N>\":function(a,b,c){return this[\"vecN,vecN\"](a,b,c)},\"uvec<N>,uvec<N>\":function(a,b,c){return this[\"vecN,vecN\"](a,b,c)},\"quat,quat\":function(a,b,c){for(var e=this[\"float,float\"],d=glm.bvec4(),h=0;4>h;h++)d[h]=e(a[h],b[h],c);return d},\"mat<N>,mat<N>\":function(){throw new GLM.GLMJSError(\"error: 'epsilonEqual' only accept floating-point and integer scalar or vector inputs\");}}});\nGLM.$template.extend(GLM,GLM.$template[\"declare<T>\"]({degrees:{\"float\":function(a){return this.GLM._degrees(a)},\"vec<N>\":function(a){return new this.GLM.vecN(this.GLM.$to_array(a).map(this.GLM._degrees))}},radians:{\"float\":function(a){return this.GLM._radians(a)},\"vec<N>\":function(a){return new this.GLM.vecN(this.GLM.$to_array(a).map(this.GLM._radians))}},sign:{\"null\":function(){return 0},undefined:function(){return NaN},string:function(){return NaN},\"float\":function(a){return GLM._sign(a)},\"vec<N>\":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._sign))},\n\"ivec<N>\":function(a){return new GLM.ivecN(GLM.$to_array(a).map(GLM._sign))}},abs:{\"float\":function(a){return GLM._abs(a)},\"vec<N>\":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._abs))}},fract:{\"float\":function(a){return GLM._fract(a)},\"vec<N>\":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._fract))}},all:{\"vec<N>\":function(a){return N===GLM.$to_array(a).filter(Boolean).length},\"bvec<N>\":function(a){return N===GLM.$to_array(a).filter(Boolean).length},\"ivec<N>\":function(a){return N===\nGLM.$to_array(a).filter(Boolean).length},\"uvec<N>\":function(a){return N===GLM.$to_array(a).filter(Boolean).length},quat:function(a){return 4===GLM.$to_array(a).filter(Boolean).length}},$to_object:{vec2:function(a){return{x:a.x,y:a.y}},vec3:function(a){return{x:a.x,y:a.y,z:a.z}},vec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},uvec2:function(a){return{x:a.x,y:a.y}},uvec3:function(a){return{x:a.x,y:a.y,z:a.z}},uvec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},ivec2:function(a){return{x:a.x,y:a.y}},\nivec3:function(a){return{x:a.x,y:a.y,z:a.z}},ivec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},bvec2:function(a){return{x:!!a.x,y:!!a.y}},bvec3:function(a){return{x:!!a.x,y:!!a.y,z:!!a.z}},bvec4:function(a){return{x:!!a.x,y:!!a.y,z:!!a.z,w:!!a.w}},quat:function(a){return{w:a.w,x:a.x,y:a.y,z:a.z}},mat3:function(a){return{\"0\":this.vec3(a[0]),1:this.vec3(a[1]),2:this.vec3(a[2])}},mat4:function(a){return{\"0\":this.vec4(a[0]),1:this.vec4(a[1]),2:this.vec4(a[2]),3:this.vec4(a[3])}}},roll:{$atan2:Math.atan2,\nquat:function(a){return this.$atan2(2*(a.x*a.y+a.w*a.z),a.w*a.w+a.x*a.x-a.y*a.y-a.z*a.z)}},pitch:{$atan2:Math.atan2,quat:function(a){return this.$atan2(2*(a.y*a.z+a.w*a.x),a.w*a.w-a.x*a.x-a.y*a.y+a.z*a.z)}},yaw:{$asin:Math.asin,quat:function(a){return this.$asin(this.GLM.clamp(-2*(a.x*a.z-a.w*a.y),-1,1))}},eulerAngles:{quat:function(a){return this.GLM.vec3(this.GLM.pitch(a),this.GLM.yaw(a),this.GLM.roll(a))}}}),GLM.$template[\"declare<T,...>\"]({$from_glsl:{string:function(a,b){var c;a.replace(/^([$\\w]+)\\(([-.0-9ef, ]+)\\)$/,\nfunction(a,d,h){a=glm[d]||glm[\"$\"+d];if(!a)throw new GLM.GLMJSError(\"glsl decoding issue: unknown type '\"+d+\"'\");c=h.split(\",\").map(parseFloat);if(!b||b===a)c=a.apply(glm,c);else{if(!0===b||b===Array){for(;c.length<a.componentLength;)c.push(c[c.length-1]);return c}throw new GLM.GLMJSError(\"glsl decoding issue: second argument expected to be undefined|true|Array\");}});return c}},$to_glsl:{\"vec<N>\":function(a,b){var c=GLM.$to_array(a);b&&(\"object\"===typeof b&&\"precision\"in b)&&(c=c.map(function(a){return a.toFixed(b.precision)}));\nfor(;c.length&&c[c.length-2]===c[c.length-1];)c.pop();return a.$type+\"(\"+c+\")\"},\"uvec<N>\":function(a,b){return this.vecN(a,b)},\"ivec<N>\":function(a,b){return this.vecN(a,b)},\"bvec<N>\":function(a,b){return this.vecN(a,b)},quat:function(a,b){var c;b&&(\"object\"===typeof b&&\"precision\"in b)&&(c=b.precision);return 0===a.x+a.y+a.z?\"quat(\"+(void 0===c?a.w:a.w.toFixed(c))+\")\":this.vec4(a,b)},\"mat<N>\":function(a,b){var c;b&&(\"object\"===typeof b&&\"precision\"in b)&&(c=b.precision);var e=GLM.$to_array(a);void 0!==\nc&&(e=e.map(function(a){return a.toFixed(c)}));return e.reduce(function(a,b){return a+1*b},0)===e[0]*N?\"matN(\"+e[0]+\")\":\"matN(\"+e+\")\"}},frexp:{\"float\":function(a,b){return 1===arguments.length?this[\"float,undefined\"](a):this[\"float,array\"](a,b)},\"vec<N>\":function(a,b){if(2>arguments.length)throw new GLM.GLMJSError(\"frexp(vecN, ivecN) expected ivecN as second parameter\");return GLM.vecN(GLM.$to_array(a).map(function(a,e){var d=GLM._frexp(a);b[e]=d[1];return d[0]}))},\"float,undefined\":function(a){return GLM._frexp(a)},\n\"float,array\":function(a,b){return GLM._frexp(a,b)}},ldexp:{\"float\":GLM._ldexp,\"vec<N>\":function(a,b){return GLM.vecN(GLM.$to_array(a).map(function(a,e){return GLM._ldexp(a,b[e])}))}}}));\nGLM.$template[\"declare<T,V,...>\"]({rotate:{\"float,vec3\":function(a,b){return this.GLM.$outer.mat4_angleAxis(a,b)},\"mat4,float\":function(a,b,c){return a.mul(this.GLM.$outer.mat4_angleAxis(b,c))}},scale:{$outer:GLM.$outer,\"mat4,vec3\":function(a,b){return a.mul(this.$outer.mat4_scale(b))},\"vec3,undefined\":function(a){return this.$outer.mat4_scale(a)}},translate:{\"mat4,vec3\":function(a,b){return a.mul(this.GLM.$outer.mat4_translation(b))},\"vec3,undefined\":function(a){return this.GLM.$outer.mat4_translation(a)}},\nangleAxis:{\"float,vec3\":function(a,b){return this.GLM.$outer.quat_angleAxis(a,b)}},min:{\"float,float\":function(a,b){return this.GLM._min(a,b)},\"vec<N>,float\":function(a,b){return new this.GLM.vecN(this.GLM.$to_array(a).map(function(a){return this.GLM._min(a,b)}.bind(this)))}},max:{\"float,float\":function(a,b){return this.GLM._max(a,b)},\"vec<N>,float\":function(a,b){return new this.GLM.vecN(this.GLM.$to_array(a).map(function(a){return this.GLM._max(a,b)}.bind(this)))}},equal:{\"float,float\":GLM._equal,\n\"vec<N>,vec<N>\":function(a,b){for(var c=this[\"float,float\"],e=glm.bvecN(),d=0;d<N;d++)e[d]=c(a[d],b[d]);return e},\"bvec<N>,bvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"ivec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"uvec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"quat,quat\":function(a,b){for(var c=this[\"float,float\"],e=glm.bvec4(),d=0;4>d;d++)e[d]=c(a[d],b[d]);return e}},_slerp:{\"quat,quat\":function(a,b,c){var e=b,d=glm.dot(glm.vec4(a),glm.vec4(b));0>d&&(e=\nb.mul(-1),d=-d);if(d>1-glm.epsilon())return glm.quat(glm.mix(a.w,e.w,c),glm.mix(a.x,e.x,c),glm.mix(a.y,e.y,c),glm.mix(a.z,e.z,c));b=Math.acos(d);return(a.mul(Math.sin((1-c)*b))+e.mul(Math.sin(c*b)))/Math.sin(b)}},rotation:{\"vec3,vec3\":function(a,b){var c=this.$dot(a,b),e=new a.constructor(new a.elements.constructor(3));if(c>=1-this.$epsilon)return this.$quat();if(c<-1+this.$epsilon)return e=this.$cross(this.$m[2],a),this.$length2(e)<this.$epsilon&&(e=this.$cross(this.$m[0],a)),e=this.$normalize(e),\nthis.$angleAxis(this.$pi,e);var e=this.$cross(a,b),c=this.$sqrt(2*(1+c)),d=1/c;return this.$quat(0.5*c,e.x*d,e.y*d,e.z*d)}},project:{\"vec3,mat4\":function(a,b,c,e){a=glm.vec4(a,1);a=b[\"*\"](a);a=c[\"*\"](a);a[\"/=\"](a.w);a=a[\"*\"](0.5)[\"+\"](0.5);a[0]=a[0]*e[2]+e[0];a[1]=a[1]*e[3]+e[1];return glm.vec3(a)}},unProject:{\"vec3,mat4\":function(a,b,c,e){b=glm.inverse(c[\"*\"](b));a=glm.vec4(a,1);a.x=(a.x-e[0])/e[2];a.y=(a.y-e[1])/e[3];a=a[\"*\"](2)[\"-\"](glm.vec4(1));e=b[\"*\"](a);e[\"/=\"](e.w);return glm.vec3(e)}},orientedAngle:{\"vec3,vec3\":function(a,\nb,c){var e=Math.acos(glm.clamp(glm.dot(a,b),0,1));return glm.mix(e,-e,0>glm.dot(c,glm.cross(a,b))?1:0)}}});\nGLM.$to_string=GLM.$template[\"declare<T,...>\"]({$to_string:{\"function\":function(a){return\"[function \"+(a.name||\"anonymous\")+\"]\"},ArrayBuffer:function(a){return\"[object ArrayBuffer \"+JSON.stringify({byteLength:a.byteLength})+\"]\"},Float32Array:function(a){return\"[object Float32Array \"+JSON.stringify({length:a.length,byteOffset:a.byteOffset,byteLength:a.byteLength,BPE:a.BYTES_PER_ELEMENT})+\"]\"},\"float\":function(a,b){return GLM.$toFixedString(\"float\",{value:a},[\"value\"],b&&b.precision)},string:function(a){return a},\nbool:function(a){return\"bool(\"+a+\")\"},\"vec<N>\":function(a,b){return GLM.$toFixedString(a.$type_name,a,a.$components,b&&b.precision)},\"uvec<N>\":function(a,b){return GLM.$toFixedString(a.$type_name,a,a.$components,b&&\"object\"===typeof b&&b.precision||0)},\"ivec<N>\":function(a,b){return GLM.$toFixedString(a.$type_name,a,a.$components,b&&\"object\"===typeof b&&b.precision||0)},\"bvec<N>\":function(a){return a.$type_name+\"(\"+GLM.$to_array(a).map(Boolean).join(\", \")+\")\"},\"mat<N>\":function(a,b){var c=[0,1,2,\n3].slice(0,N).map(function(b){return a[b]}).map(function(a){return GLM.$toFixedString(\"\\t\",a,a.$components,b&&b.precision)});return a.$type_name+\"(\\n\"+c.join(\", \\n\")+\"\\n)\"},quat:function(a,b){a=GLM.degrees(GLM.eulerAngles(a));return GLM.$toFixedString(\"<quat>\"+a.$type_name,a,[\"x\",\"y\",\"z\"],b&&b.precision)}}}).$to_string;\nGLM.$template[\"declare<T,V,...>\"]({copy:{$op:\"=\",\"vec<N>,vec<N>\":function(a,b){a.elements.set(b.elements);return a},\"vec<N>,array<N>\":function(a,b){a.elements.set(b);return a},\"vec<N>,uvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"vec<N>,ivec<N>\":function(a,b){a.elements.set(b.elements);return a},\"vec<N>,bvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"uvec<N>,uvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"uvec<N>,array<N>\":function(a,b){a.elements.set(b);return a},\n\"uvec<N>,vec<N>\":function(a,b){a.elements.set(b.elements);return a},\"uvec<N>,ivec<N>\":function(a,b){a.elements.set(b.elements);return a},\"uvec<N>,bvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"ivec<N>,ivec<N>\":function(a,b){a.elements.set(b.elements);return a},\"ivec<N>,array<N>\":function(a,b){a.elements.set(b);return a},\"ivec<N>,vec<N>\":function(a,b){a.elements.set(b.elements);return a},\"ivec<N>,uvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"ivec<N>,bvec<N>\":function(a,\nb){a.elements.set(b.elements);return a},\"bvec<N>,ivec<N>\":function(a,b){a.elements.set(b.elements);return a},\"bvec<N>,array<N>\":function(a,b){a.elements.set(b);return a},\"bvec<N>,vec<N>\":function(a,b){a.elements.set(b.elements);return a},\"bvec<N>,uvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"bvec<N>,bvec<N>\":function(a,b){a.elements.set(b.elements);return a},\"quat,quat\":function(a,b){a.elements.set(b.elements);return a},\"mat<N>,mat<N>\":function(a,b){a.elements.set(b.elements);return a},\n\"mat<N>,array<N>\":function(a,b){b=b.reduce(function(a,b){if(!a.concat)throw new GLM.GLMJSError(\"matN,arrayN -- [[.length===4] x 4] expected\");return a.concat(b)});if(b===N)throw new GLM.GLMJSError(\"matN,arrayN -- [[N],[N],[N],[N]] expected\");return a[\"=\"](b)},\"mat<N>,array<N*N>\":function(a,b){a.elements.set(b);return a},\"mat4,array9\":function(a,b){a.elements.set((new GLM.mat4(b)).elements);return a}},sub:{$op:\"-\",_sub:function(a,b){return this.GLM.$to_array(a).map(function(a,e){return a-b[e]})},\"vec<N>,vec<N>\":function(a,\nb){return new this.GLM.vecN(this._sub(a,b))},\"vec<N>,uvec<N>\":function(a,b){return new this.GLM.vecN(this._sub(a,b))},\"uvec<N>,uvec<N>\":function(a,b){return new this.GLM.uvecN(this._sub(a,b))},\"uvec<N>,ivec<N>\":function(a,b){return new this.GLM.uvecN(this._sub(a,b))},\"vec<N>,ivec<N>\":function(a,b){return new this.GLM.vecN(this._sub(a,b))},\"ivec<N>,uvec<N>\":function(a,b){return new this.GLM.ivecN(this._sub(a,b))},\"ivec<N>,ivec<N>\":function(a,b){return new this.GLM.ivecN(this._sub(a,b))}},sub_eq:{$op:\"-=\",\n\"vec<N>,vec<N>\":function(a,b){for(var c=a.elements,e=b.elements,d=0;d<N;d++)c[d]-=e[d];return a},\"vec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"uvec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"uvec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"vec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"ivec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"ivec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)}},add:{$op:\"+\",_add:function(a,\nb){return this.GLM.$to_array(a).map(function(a,e){return a+b[e]})},\"vec<N>,float\":function(a,b){return new this.GLM.vecN(this._add(a,[b,b,b,b]))},\"vec<N>,vec<N>\":function(a,b){return new this.GLM.vecN(this._add(a,b))},\"vec<N>,uvec<N>\":function(a,b){return new this.GLM.vecN(this._add(a,b))},\"uvec<N>,uvec<N>\":function(a,b){return new this.GLM.uvecN(this._add(a,b))},\"uvec<N>,ivec<N>\":function(a,b){return new this.GLM.uvecN(this._add(a,b))},\"vec<N>,ivec<N>\":function(a,b){return new this.GLM.vecN(this._add(a,\nb))},\"ivec<N>,ivec<N>\":function(a,b){return new this.GLM.ivecN(this._add(a,b))},\"ivec<N>,uvec<N>\":function(a,b){return new this.GLM.ivecN(this._add(a,b))}},add_eq:{$op:\"+=\",\"vec<N>,vec<N>\":function(a,b){for(var c=a.elements,e=b.elements,d=0;d<N;d++)c[d]+=e[d];return a},\"vec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"uvec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"uvec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"vec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,\nb)},\"ivec<N>,ivec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)},\"ivec<N>,uvec<N>\":function(a,b){return this[\"vecN,vecN\"](a,b)}},div:{$op:\"/\",\"vec<N>,float\":function(a,b){return new this.GLM.vecN(this.GLM.$to_array(a).map(function(a){return a/b}))}},div_eq:{$op:\"/=\",\"vec<N>,float\":function(a,b){for(var c=0;c<N;c++)a.elements[c]/=b;return a}},mul:{$op:\"*\",\"vec<N>,vec<N>\":function(a,b){return new this.GLM.vecN(this.GLM.$to_array(a).map(function(a,e){return a*b[e]}))}},eql_epsilon:function(a){return{$op:\"~=\",\n\"vec<N>,vec<N>\":a,\"mat<N>,mat<N>\":a,\"quat,quat\":a,\"uvec<N>,uvec<N>\":a,\"ivec<N>,ivec<N>\":a}}(function(a,b){return this.GLM.all(this.GLM.epsilonEqual(a,b,this.GLM.epsilon()))}),eql:function(a){return{$op:\"==\",\"mat<N>,mat<N>\":function(a,c){return c.elements.length===glm.$to_array(a).filter(function(a,b){return a===c.elements[b]}).length},\"vec<N>,vec<N>\":a,\"quat,quat\":a,\"uvec<N>,uvec<N>\":a,\"ivec<N>,ivec<N>\":a,\"bvec<N>,bvec<N>\":a}}(function(a,b){return GLM.all(GLM.equal(a,b))})});\nGLM.string={$type_name:\"string\",$:{}};GLM.number={$type_name:\"float\",$:{}};GLM[\"boolean\"]={$type:\"bool\",$type_name:\"bool\",$:{}};\nGLM.vec2=GLM.$template.GLMType(\"vec2\",{name:\"fvec2\",identity:[0,0],components:[\"xy\",\"01\"],undefined0:function(){return this.identity},number1:function(a){return[a,a]},number2:function(a,b){return[a,b]},object1:function(a){if(null!==a)switch(a.length){case 4:case 3:case 2:return[a[0],a[1]];default:if(\"y\"in a&&\"x\"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError(\"unrecognized .x-ish object passed to GLM.vec2: \"+a);return\"string\"===typeof a.x?[1*a.x,1*a.y]:[a.x,a.y]}}throw new GLM.GLMJSError(\"unrecognized object passed to GLM.vec2: \"+\na);}});\nGLM.uvec2=GLM.$template.GLMType(\"uvec2\",{name:\"uvec2\",identity:[0,0],components:[\"xy\",\"01\"],_clamp:function(a){return~~a},undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b]},object1:function(a){switch(a.length){case 4:case 3:case 2:return[a[0],a[1]].map(this._clamp);default:if(\"y\"in a&&\"x\"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError(\"unrecognized .x-ish object passed to GLM.\"+this.name+\n\": \"+a);return[a.x,a.y].map(this._clamp)}}throw new GLM.GLMJSError(\"unrecognized object passed to GLM.\"+this.name+\": \"+a);}});\nGLM.vec3=GLM.$template.GLMType(\"vec3\",{name:\"fvec3\",identity:[0,0,0],components:[\"xyz\",\"012\",\"rgb\"],undefined0:function(){return GLM.vec3.$.identity},number1:function(a){return[a,a,a]},number2:function(a,b){return[a,b,b]},number3:function(a,b,c){return[a,b,c]},Error:GLM.GLMJSError,object1:function(a){if(a)switch(a.length){case 4:case 3:return[a[0],a[1],a[2]];case 2:return[a[0],a[1],a[1]];default:if(\"z\"in a&&\"x\"in a){if(typeof a.x!==typeof a.y)throw new this.Error(\"unrecognized .x-ish object passed to GLM.vec3: \"+\na);return\"string\"===typeof a.x?[1*a.x,1*a.y,1*a.z]:[a.x,a.y,a.z]}}throw new this.Error(\"unrecognized object passed to GLM.vec3: \"+a);},object2:function(a,b){if(a instanceof GLM.vec2||a instanceof GLM.uvec2||a instanceof GLM.ivec2||a instanceof GLM.bvec2)return[a.x,a.y,b];throw new GLM.GLMJSError(\"unrecognized object passed to GLM.vec3(o,z): \"+[a,b]);}});\nGLM.uvec3=GLM.$template.GLMType(\"uvec3\",{name:\"uvec3\",identity:[0,0,0],components:[\"xyz\",\"012\"],_clamp:GLM.uvec2.$._clamp,undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b,b]},number3:function(a,b,c){a=this._clamp(a);b=this._clamp(b);c=this._clamp(c);return[a,b,c]},object1:function(a){if(a)switch(a.length){case 4:case 3:return[a[0],a[1],a[2]].map(this._clamp);case 2:return[a[0],a[1],a[1]].map(this._clamp);\ndefault:if(\"z\"in a&&\"x\"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError(\"unrecognized .x-ish object passed to GLM.\"+this.name+\": \"+a);return[a.x,a.y,a.z].map(this._clamp)}}throw new GLM.GLMJSError(\"unrecognized object passed to GLM.\"+this.name+\": \"+a);},object2:function(a,b){if(a instanceof GLM.vec2)return[a.x,a.y,b].map(this._clamp);if(a instanceof GLM.uvec2||a instanceof GLM.ivec2||a instanceof GLM.bvec2)return[a.x,a.y,this._clamp(b)];throw new GLM.GLMJSError(\"unrecognized object passed to GLM.\"+\nthis.name+\"(o,z): \"+[a,b]);}});\nGLM.vec4=GLM.$template.GLMType(\"vec4\",{name:\"fvec4\",identity:[0,0,0,0],components:[\"xyzw\",\"0123\",\"rgba\"],undefined0:function(){return this.identity},number1:function(a){return[a,a,a,a]},number2:function(a,b){return[a,b,b,b]},number3:function(a,b,c){return[a,b,c,c]},number4:function(a,b,c,e){return[a,b,c,e]},Error:GLM.GLMJSError,object1:function(a){if(a)switch(a.length){case 4:return[a[0],a[1],a[2],a[3]];case 3:return[a[0],a[1],a[2],a[2]];case 2:return[a[0],a[1],a[1],a[1]];default:if(\"w\"in a&&\"x\"in\na){if(typeof a.x!==typeof a.w)throw new this.Error(\"unrecognized .x-ish object passed to GLM.vec4: \"+a);return\"string\"===typeof a.x?[1*a.x,1*a.y,1*a.z,1*a.w]:[a.x,a.y,a.z,a.w]}}throw new this.Error(\"unrecognized object passed to GLM.vec4: \"+[a,a&&a.$type]);},$GLM:GLM,object2:function(a,b){if(a instanceof this.$GLM.vec3||a instanceof this.$GLM.uvec3||a instanceof this.$GLM.ivec3||a instanceof this.$GLM.bvec3)return[a.x,a.y,a.z,b];throw new this.$GLM.GLMJSError(\"unrecognized object passed to GLM.vec4(o,w): \"+\n[a,b]);},object3:function(a,b,c){if(a instanceof this.$GLM.vec2||a instanceof this.$GLM.uvec2||a instanceof this.$GLM.ivec2||a instanceof this.$GLM.bvec2)return[a.x,a.y,b,c];throw new this.$GLM.GLMJSError(\"unrecognized object passed to GLM.vec4(o,z,w): \"+[a,b,c]);}});\nGLM.uvec4=GLM.$template.GLMType(\"uvec4\",{name:\"uvec4\",identity:[0,0,0,0],components:[\"xyzw\",\"0123\"],_clamp:GLM.uvec2.$._clamp,undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a,a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b,b,b]},number3:function(a,b,c){a=this._clamp(a);b=this._clamp(b);c=this._clamp(c);return[a,b,c,c]},number4:function(a,b,c,e){return[a,b,c,e].map(this._clamp)},Error:GLM.GLMJSError,object1:function(a){if(a)switch(a.length){case 4:return[a[0],\na[1],a[2],a[3]].map(this._clamp);case 3:return[a[0],a[1],a[2],a[2]].map(this._clamp);case 2:return[a[0],a[1],a[1],a[1]].map(this._clamp);default:if(\"w\"in a&&\"x\"in a){if(typeof a.x!==typeof a.y)throw new this.Error(\"unrecognized .x-ish object passed to GLM.\"+this.name+\": \"+a);return[a.x,a.y,a.z,a.w].map(this._clamp)}}throw new GLM.GLMJSError(\"unrecognized object passed to GLM.\"+this.name+\": \"+[a,a&&a.$type]);},object2:function(a,b){if(a instanceof GLM.vec3)return[a.x,a.y,a.z,b].map(this._clamp);if(a instanceof\nGLM.uvec3||a instanceof GLM.ivec3||a instanceof GLM.bvec3)return[a.x,a.y,a.z,this._clamp(b)];throw new GLM.GLMJSError(\"unrecognized object passed to GLM.\"+this.name+\"(o,w): \"+[a,b]);},object3:function(a,b,c){if(a instanceof GLM.vec2)return[a.x,a.y,b,c].map(this._clamp);if(a instanceof GLM.uvec2||a instanceof GLM.ivec2||a instanceof GLM.bvec2)return[a.x,a.y,this._clamp(b),this._clamp(c)];throw new GLM.GLMJSError(\"unrecognized object passed to GLM.\"+this.name+\"(o,z,w): \"+[a,b,c]);}});\nGLM.ivec2=GLM.$template.GLMType(\"ivec2\",GLM.$template.extend({},GLM.uvec2.$,{name:\"ivec2\"}));GLM.ivec3=GLM.$template.GLMType(\"ivec3\",GLM.$template.extend({},GLM.uvec3.$,{name:\"ivec3\"}));GLM.ivec4=GLM.$template.GLMType(\"ivec4\",GLM.$template.extend({},GLM.uvec4.$,{name:\"ivec4\"}));GLM.bvec2=GLM.$template.GLMType(\"bvec2\",GLM.$template.extend({},GLM.uvec2.$,{name:\"bvec2\",boolean1:GLM.uvec2.$.number1,boolean2:GLM.uvec2.$.number2}));\nGLM.bvec3=GLM.$template.GLMType(\"bvec3\",GLM.$template.extend({},GLM.uvec3.$,{name:\"bvec3\",boolean1:GLM.uvec3.$.number1,boolean2:GLM.uvec3.$.number2,boolean3:GLM.uvec3.$.number3}));GLM.bvec4=GLM.$template.GLMType(\"bvec4\",GLM.$template.extend({},GLM.uvec4.$,{name:\"bvec4\",boolean1:GLM.uvec4.$.number1,boolean2:GLM.uvec4.$.number2,boolean3:GLM.uvec4.$.number3,boolean4:GLM.uvec4.$.number4}));GLM.bvec2.$._clamp=GLM.bvec3.$._clamp=GLM.bvec4.$._clamp=function(a){return!!a};\nGLM.mat3=GLM.$template.GLMType(\"mat3\",{name:\"mat3x3\",identity:[1,0,0,0,1,0,0,0,1],undefined0:function(){return this.identity},number1:function(a){return 1===a?this.identity:[a,0,0,0,a,0,0,0,a]},number9:function(a,b,c,e,d,h,j,g,k){return arguments},Error:GLM.GLMJSError,$vec3:GLM.vec3,object1:function(a){if(a){var b=a.elements||a;if(16===b.length)return[b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]];if(9===b.length)return b;if(0 in b&&1 in b&&2 in b&&!(3 in b)&&\"object\"===typeof b[2])return[b[0],b[1],\nb[2]].map(this.$vec3.$.object1).reduce(function(a,b){return a.concat(b)})}throw new this.Error(\"unrecognized object passed to GLM.mat3: \"+a);},object3:function(a,b,c){return[a,b,c].map(glm.$to_array).reduce(function(a,b){return a.concat(b)})}});\nGLM.mat4=GLM.$template.GLMType(\"mat4\",{name:\"mat4x4\",identity:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],undefined0:function(){return this.identity},number16:function(a,b,c,e,d,h,j,g,k,i,w,r,m,q,s,t){return arguments},number1:function(a){return 1===a?this.identity:[a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,a]},Error:GLM.GLMJSError,$vec4:GLM.vec4,object1:function(a){var b;if(a){b=a.elements||a;if(9===b.length)return[b[0],b[1],b[2],0,b[3],b[4],b[5],0,b[6],b[7],b[8],0,0,0,0,1];if(4===b.length&&b[0]&&4===b[0].length)return b[0].concat(b[1],\nb[2],b[3]);if(16===b.length)return b;if(0 in b&&1 in b&&2 in b&&3 in b&&!(4 in b)&&\"object\"===typeof b[3])return[b[0],b[1],b[2],b[3]].map(this.$vec4.$.object1).reduce(function(a,b){return a.concat(b)})}throw new this.Error(\"unrecognized object passed to GLM.mat4: \"+[a,b&&b.length]);},object4:function(a,b,c,e){return[a,b,c,e].map(glm.$to_array).reduce(function(a,b){return a.concat(b)})}});\nGLM.quat=GLM.$template.GLMType(\"quat\",{identity:[0,0,0,1],components:[\"xyzw\",\"0123\"],undefined0:function(){return this.identity},number1:function(a){if(1!==a)throw Error(\"only quat(1) syntax supported for quat(number1 args)...\");return this.identity},number4:function(a,b,c,e){return[b,c,e,a]},$GLM:GLM,$M3:GLM.mat3(),$quat_array_from_zyx:function(a){var b=this.$M3;return this.$GLM.$outer.quat_angleAxis(a.z,b[2]).mul(this.$GLM.$outer.quat_angleAxis(a.y,b[1])).mul(this.$GLM.$outer.quat_angleAxis(a.x,\nb[0])).elements},object1:function(a){if(a){if(a instanceof this.$GLM.mat4)return this.$GLM.$outer.quat_array_from_mat4(a);if(4===a.length)return[a[0],a[1],a[2],a[3]];if(a instanceof this.$GLM.quat)return[a.x,a.y,a.z,a.w];if(a instanceof this.$GLM.vec3)return this.$quat_array_from_zyx(a);if(\"w\"in a&&\"x\"in a)return\"string\"===typeof a.x?[1*a.x,1*a.y,1*a.z,1*a.w]:[a.x,a.y,a.z,a.w]}throw new this.$GLM.GLMJSError(\"unrecognized object passed to GLM.quat.object1: \"+[a,a&&a.$type,typeof a,a&&a.constructor]);\n}});\n(function(){var a=function(a,b,c,e){var k={def:function(b,c){this[b]=c;Object.defineProperty(a.prototype,b,c)}};a.$properties=a.$properties||k;var i=a.$properties.def.bind(a.$properties),w=[0,1,2,3].map(function(a){return{enumerable:c,get:function(){return this.elements[a]},set:function(b){this.elements[a]=b}}});b.forEach(function(a,b){i(a,w[b])});if(isNaN(b[0])&&!/^_/.test(b[0])){var k=b.slice(),r=GLM.$subarray;do(function(a,b,c){\"quat\"===b&&(b=\"vec\"+c);var d=GLM[b];i(a,{enumerable:!1,get:function(){return new d(r(this.elements,0*\nc,1*c))},set:function(a){return(new d(r(this.elements,0*c,1*c)))[\"=\"](a)}})})(k.join(\"\"),a.prototype.$type.replace(/[1-9]$/,k.length),k.length);while(k[1]!=k.pop());if(e)return a.$properties;k=b.slice();if(b={xyz:{yz:1},xyzw:{yzw:1,yz:1,zw:2}}[k.join(\"\")])for(var m in b)(function(a,b,c,d){i(a,{enumerable:!1,get:function(){return new GLM[b](GLM.$subarray(this.elements,0*c+d,1*c+d))},set:function(a){return(new GLM[b](GLM.$subarray(this.elements,0*c+d,1*c+d)))[\"=\"](a)}})})(m,a.prototype.$type.replace(/[1-9]$/,\nm.length),m.length,b[m])}return a.$properties};a(GLM.vec2,GLM.vec2.$.components[0],!0);a(GLM.vec2,GLM.vec2.$.components[1]);a(GLM.vec3,GLM.vec3.$.components[0],!0);a(GLM.vec3,GLM.vec3.$.components[1]);a(GLM.vec3,GLM.vec3.$.components[2]);a(GLM.vec4,GLM.vec4.$.components[0],!0);a(GLM.vec4,GLM.vec4.$.components[1]);a(GLM.vec4,GLM.vec4.$.components[2]);a(GLM.quat,GLM.quat.$.components[0],!0,\"noswizzles\");a(GLM.quat,GLM.quat.$.components[1]);GLM.quat.$properties.def(\"wxyz\",{enumerable:!1,get:function(){return new GLM.vec4(this.w,\nthis.x,this.y,this.z)},set:function(a){a=GLM.vec4(a);return this[\"=\"](GLM.quat(a.x,a.y,a.z,a.w))}});\"uvec2 uvec3 uvec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4\".split(\" \").forEach(function(b){a(GLM[b],GLM[b].$.components[0],!0);a(GLM[b],GLM[b].$.components[1])});Object.defineProperty(GLM.quat.prototype,\"_x\",{get:function(){throw Error(\"erroneous quat._x access\");}});var b={2:{yx:{enumerable:!1,get:function(){return new GLM.vec2(this.y,this.x)},set:function(a){a=GLM.vec2(a);this.y=a[0];this.x=a[1]}}},3:{xz:{enumerable:!1,\nget:function(){return new GLM.vec2(this.x,this.z)},set:function(a){a=GLM.vec2(a);this.x=a[0];this.z=a[1]}},zx:{enumerable:!1,get:function(){return new GLM.vec2(this.z,this.x)},set:function(a){a=GLM.vec2(a);this.z=a[0];this.x=a[1]}},xzy:{enumerable:!1,get:function(){return new GLM.vec3(this.x,this.z,this.y)},set:function(a){a=GLM.vec3(a);this.x=a[0];this.z=a[1];this.y=a[2]}}},4:{xw:{enumerable:!1,get:function(){return new GLM.vec2(this.x,this.w)},set:function(a){a=GLM.vec2(a);this.x=a[0];this.w=a[1]}},\nwz:{enumerable:!1,get:function(){return new GLM.vec2(this.w,this.z)},set:function(a){a=GLM.vec2(a);this.w=a[0];this.z=a[1]}},wxz:{enumerable:!1,get:function(){return new GLM.vec3(this.w,this.x,this.z)},set:function(a){a=GLM.vec3(a);this.w=a[0];this.x=a[1];this.z=a[2];return this}},xyw:{enumerable:!1,get:function(){return new GLM.vec3(this.x,this.y,this.w)},set:function(a){a=GLM.vec3(a);this.x=a[0];this.y=a[1];this.w=a[2];return this}},xzw:{enumerable:!1,get:function(){return new GLM.vec3(this.x,this.z,\nthis.w)},set:function(a){a=GLM.vec3(a);this.x=a[0];this.z=a[1];this.w=a[2]}},wxyz:{enumerable:!1,get:function(){return new GLM.vec4(this.w,this.x,this.y,this.z)},set:function(a){a=GLM.vec4(a);this.w=a[0];this.x=a[1];this.y=a[2];this.z=a[3];return this}}}},c;for(c in b)for(var e in b[c])2>=c&&GLM.vec2.$properties.def(e,b[c][e]),3>=c&&GLM.vec3.$properties.def(e,b[c][e]),4>=c&&GLM.vec4.$properties.def(e,b[c][e]);GLM.$partition=function(a,b,c,e){if(void 0===c)throw new GLM.GLMJSError(\"nrows is undefined\");\nvar k=b.$.identity.length;c=c||k;for(var i=function(a){3<GLM.$DEBUG&&GLM.$outer.console.debug(\"CACHEDBG: \"+a)},w=0;w<c;w++)(function(c){var j=e&&e+c,q=c*k;Object.defineProperty(a,c,{configurable:!0,enumerable:!0,set:function(e){if(e instanceof b)this.elements.set(e.elements,q);else if(e&&e.length===k)this.elements.set(e,q);else throw new GLM.GLMJSError(\"unsupported argtype to \"+(a&&a.$type)+\"[\"+c+\"] setter: \"+[typeof e,e]);},get:function(){if(e){if(this[j])return c||i(\"cache hit \"+j),this[j];c||i(\"cache miss \"+\nj)}var a,d=new b(a=GLM.$subarray(this.elements,q,q+k));if(d.elements!==a)throw new GLM.GLMJSError(\"v.elements !== t \"+[GLM.$subarray,d.elements.constructor===a.constructor,d.elements.buffer===a.buffer]);e&&Object.defineProperty(this,j,{configurable:!0,enumerable:!1,value:d});return d}})})(w)};GLM.$partition(GLM.mat4.prototype,GLM.vec4,4,\"_cache_\");GLM.$partition(GLM.mat3.prototype,GLM.vec3,3,\"_cache_\")})();\nGLM.$dumpTypes=function(a){GLM.$types.forEach(function(b){GLM[b].componentLength&&a(\"GLM.\"+b,JSON.stringify({\"#type\":GLM[b].prototype.$type_name,\"#floats\":GLM[b].componentLength,\"#bytes\":GLM[b].BYTES_PER_ELEMENT}))})};\nGLM.$init=function(a){a.prefix&&(GLMJS_PREFIX=a.prefix);GLM.$prefix=GLMJS_PREFIX;var b=a.log||function(){};try{b(\"GLM-js: ENV: \"+_ENV._VERSION)}catch(c){}b(\"GLM-JS: initializing: \"+JSON.stringify(a,0,2));b(JSON.stringify({functions:Object.keys(GLM.$outer.functions)}));var e=GLM.mat4,d=GLM.$outer;GLM.toMat4=function(a){return new e(d.mat4_array_from_quat(a))};GLM.$template.extend(GLM.rotation.$template,{$quat:GLM.quat,$dot:GLM.dot.link(\"vec3,vec3\"),$epsilon:GLM.epsilon(),$m:GLM.mat3(),$pi:GLM.pi(),\n$length2:GLM.length2.link(\"vec3\"),$cross:GLM.cross.link(\"vec3,vec3\"),$normalize:GLM.normalize.link(\"vec3\"),$angleAxis:GLM.angleAxis.link(\"float,vec3\"),$sqrt:GLM.sqrt});GLM.$symbols=[];for(var h in GLM)\"function\"===typeof GLM[h]&&/^[a-z]/.test(h)&&GLM.$symbols.push(h);GLM.$types.forEach(function(a){var b=GLM[a].prototype.$type,c;for(c in GLM.$outer.functions){var d=GLM.$outer.functions[c];d.$op&&(GLM.$DEBUG&&GLM.$outer.console.debug(\"mapping operator<\"+b+\"> \"+c+\" / \"+d.$op),GLM[a].prototype[c]=d,GLM[a].prototype[d.$op]=\nd)}});b(\"GLM-JS: \"+GLM.version+\" emulating GLM_VERSION=\"+GLM.GLM_VERSION+\" vendor_name=\"+a.vendor_name+\" vendor_version=\"+a.vendor_version);glm.vendor=a};\nGLM.using_namespace=function(a){GLM.$DEBUG&&GLM.$outer.console.debug(\"GLM.using_namespace munges globals; it should probably not be used!\");GLM.using_namespace.$tmp={ret:void 0,tpl:a,names:GLM.$symbols,saved:{},evals:[],restore:[],before:[],after:[]};eval(GLM.using_namespace.$tmp.names.map(function(a,c){return\"GLM.using_namespace.$tmp.saved['\"+a+\"'] = GLM.using_namespace.$tmp.before[\"+c+\"] = 'undefined' !== typeof \"+a+\";\"}).join(\"\\n\"));GLM.$DEBUG&&console.warn(\"GLM.using_namespace before #globals: \"+\nGLM.using_namespace.$tmp.before.length);GLM.using_namespace.$tmp.names.map(function(a){GLM.using_namespace.$tmp.restore.push(a+\"=GLM.using_namespace.$tmp.saved['\"+a+\"'];\"+(\"GLM.using_namespace.$tmp.saved['\"+a+\"']=undefined;delete GLM.using_namespace.$tmp.saved['\"+a+\"'];\"));GLM.using_namespace.$tmp.evals.push(a+\"=GLM.\"+a+\";\")});eval(GLM.using_namespace.$tmp.evals.join(\"\\n\"));GLM.using_namespace.$tmp.ret=a();eval(GLM.using_namespace.$tmp.restore.join(\"\\n\"));eval(GLM.using_namespace.$tmp.names.map(function(a,\nc){return\"GLM.using_namespace.$tmp.after[\"+c+\"] = 'undefined' !== typeof \"+a+\";\"}).join(\"\\n\"));GLM.$DEBUG&&console.warn(\"GLM.using_namespace after #globals: \"+GLM.using_namespace.$tmp.after.length);a=GLM.using_namespace.$tmp.ret;delete GLM.using_namespace.$tmp;return a};\nfunction $GLM_extern(a,b){b=b||a;return function(){GLM[b]=GLM.$outer.functions[a]||GLM.$outer[a];if(!GLM[b])throw new GLM.GLMJSError(\"$GLM_extern: unresolved external symbol: \"+a);GLM.$DEBUG&&GLM.$outer.console.debug(\"$GLM_extern: resolved external symbol \"+a+\" \"+typeof GLM[b]);return GLM[b].apply(this,arguments)}}\nfunction GLM_polyfills(){var a={};\"bind\"in Function.prototype||(a.bind=Function.prototype.bind=function(a){function c(){}if(\"function\"!==typeof this)throw new TypeError(\"not callable\");var e=[].slice,d=e.call(arguments,1),h=this,j=function(){return h.apply(this instanceof c?this:a||__webpack_require__.g,d.concat(e.call(arguments)))};c.prototype=this.prototype||c.prototype;j.prototype=new c;return j});return a}\n$GLM_reset_logging.current=function(){return{$GLM_log:\"undefined\"!==typeof $GLM_log&&$GLM_log,$GLM_console_log:\"undefined\"!==typeof $GLM_console_log&&$GLM_console_log,$GLM_console_prefixed:\"undefined\"!==typeof $GLM_console_prefixed&&$GLM_console_prefixed,console:GLM.$outer.console}};\nfunction $GLM_reset_logging(a){a&&\"object\"===typeof a&&($GLM_log=a.$GLM_log,$GLM_console_log=a.$GLM_console_log,$GLM_console_factory=a.$GLM_console_factory,GLM.$outer.console=a.console,a=!1);if(a||\"undefined\"===typeof $GLM_log)$GLM_log=function(a,b){GLM.$outer.console.log.apply(GLM.$outer.console,[].slice.call(arguments).map(function(a){var b=typeof a;return\"xboolean\"===b||\"string\"===b?a+\"\":GLM.$isGLMObject(a)||!isNaN(a)?GLM.to_string(a):a+\"\"}))};if(a||\"undefined\"===typeof $GLM_console_log)$GLM_console_log=\nfunction(a,b){(console[a]||function(){}).apply(console,[].slice.call(arguments,1))};if(a||\"undefined\"===typeof $GLM_console_factory)$GLM_console_factory=function(a){return $GLM_console_log.bind($GLM_console_log,a)};var b=$GLM_console_factory,c={};\"debug,warn,info,error,log,write\".replace(/\\w+/g,function(a){c[a]=b(a)});\"object\"===typeof GLM&&(GLM.$outer&&(GLM.$outer.console=c),GLM.$log=$GLM_log);return c}try{window.$GLM_reset_logging=this.$GLM_reset_logging=$GLM_reset_logging}catch(e$$19){}\nGLM.$reset_logging=$GLM_reset_logging;GLM.$log=GLM.$log||$GLM_log;function $GLM_GLMJSError(a,b){function c(c){this.name=a;this.stack=Error().stack;Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor);this.message=c;b&&b.apply(this,arguments)}c.prototype=Error();c.prototype.name=a;return c.prototype.constructor=c}GLMAT.mat4.exists;glm=GLM;var DLL={_version:\"0.0.2\",_name:\"glm.gl-matrix.js\",_glm_version:glm.version,prefix:\"glm-js[glMatrix]: \",vendor_version:GLMAT.VERSION,vendor_name:\"glMatrix\"};\nDLL.statics={$outer:GLM.$outer,$typeArray:function(a){return new this.$outer.Float32Array(a)},$mat4:GLM.mat4,$quat:GLM.quat,$mat4$perspective:GLMAT.mat4.perspective,$mat4$ortho:GLMAT.mat4.ortho,mat4_perspective:function(a,b,c,e){return new this.$mat4(this.$mat4$perspective(this.$typeArray(16),a,b,c,e))},mat4_ortho:function(a,b,c,e,d,h){return new this.$mat4(this.$mat4$ortho(this.$typeArray(16),a,b,c,e,d||-1,h||1))},$quat$setAxisAngle:GLMAT.quat.setAxisAngle,$mat4$fromQuat:GLMAT.mat4.fromQuat,mat4_angleAxis:function(a,\nb){var c=this.$quat$setAxisAngle(this.$typeArray(4),b,a);return new this.$mat4(this.$mat4$fromQuat(this.$typeArray(16),c))},quat_angleAxis:function(a,b){return new this.$quat(this.$quat$setAxisAngle(this.$typeArray(4),b,a))},$mat4$translate:GLMAT.mat4.translate,mat4_translation:function(a){var b=new this.$mat4;this.$mat4$translate(b.elements,b.elements,a.elements);return b},$mat4$scale:GLMAT.mat4.scale,mat4_scale:function(a){var b=new this.$mat4;this.$mat4$scale(b.elements,b.elements,a.elements);\nreturn b},toJSON:function(){var a={},b;for(b in this)0!==b.indexOf(\"$\")&&(a[b]=this[b]);return a},$vec3:GLM.vec3,$clamp:GLM.clamp,mat4_array_from_quat:function(a){return this.$mat4$fromQuat(this.$typeArray(16),a.elements)},$qtmp:new GLM.$outer.Float32Array(9),$quat$fromMat3:GLMAT.quat.fromMat3,$mat3$fromMat4:GLMAT.mat3.fromMat4,quat_array_from_mat4:function(a){return this.$quat$fromMat3(this.$typeArray(4),this.$mat3$fromMat4(this.$qtmp,a.elements))}};\nDLL[\"declare<T,V,...>\"]={mul:{$op:\"*\",$typeArray:function(a){return new this.GLM.$outer.Float32Array(a)},$vec3$transformQuat:GLMAT.vec3.transformQuat,\"quat,vec3\":function(a,b){return new this.GLM.vec3(this.$vec3$transformQuat(this.$typeArray(3),b.elements,a.elements))},\"vec3,quat\":function(a,b){return this[\"quat,vec3\"](this.GLM.inverse(b),a)},\"quat,vec4\":function(a,b){return this[\"mat4,vec4\"](this.GLM.toMat4(a),b)},\"vec4,quat\":function(a,b){return this[\"quat,vec4\"](this.GLM.inverse(b),a)},\"$vec<N>$scale\":\"GLMAT.vecN.scale\",\n\"vec<N>,float\":function(a,b){return new this.GLM.vecN(this.$vecN$scale(this.$typeArray(N),a.elements,b))},\"quat,float\":function(a,b){return new a.constructor(this[\"vec4,float\"](a,b).elements)},$vec4$transformMat4:GLMAT.vec4.transformMat4,\"mat4,vec4\":function(a,b){return new GLM.vec4(this.$vec4$transformMat4(this.$typeArray(4),b.elements,a.elements))},\"vec4,mat4\":function(a,b){return this[\"mat4,vec4\"](GLM.inverse(b),a)},\"$mat<N>mul\":\"GLMAT.matN.mul\",\"mat<N>,mat<N>\":function(a,b){return new a.constructor(this.$matNmul(this.$typeArray(N*\nN),a.elements,b.elements))},$quat$multiply:GLMAT.quat.multiply,\"quat,quat\":function(a,b){return new a.constructor(this.$quat$multiply(this.$typeArray(4),a.elements,b.elements))}},mul_eq:{$op:\"*=\",\"$mat<N>$multiply\":\"GLMAT.matN.multiply\",\"mat<N>,mat<N>\":function(a,b){this.$matN$multiply(a.elements,a.elements,b.elements);return a},\"$vec<N>$scale\":\"GLMAT.vecN.scale\",\"vec<N>,float\":function(a,b){this.$vecN$scale(a.elements,a.elements,b);return a},$quat$multiply:GLMAT.quat.multiply,\"quat,quat\":function(a,\nb){this.$quat$multiply(a.elements,a.elements,b.elements);return a},$quat$invert:GLMAT.quat.invert,$vec3$transformQuat:GLMAT.vec3.transformQuat,\"inplace:vec3,quat\":function(a,b){var c=this.$quat$invert(new this.GLM.$outer.Float32Array(4),b.elements);this.$vec3$transformQuat(a.elements,a.elements,c);return a},$mat4$invert:GLMAT.mat4.invert,$vec4$transformMat4:GLMAT.vec4.transformMat4,\"inplace:vec4,mat4\":function(a,b){var c=this.$mat4$invert(new this.GLM.$outer.Float32Array(16),b.elements);this.$vec4$transformMat4(a.elements,\na.elements,c);return a}},cross:{$vec2$cross:GLMAT.vec2.cross,\"vec2,vec2\":function(a,b){return new this.GLM.vec3(this.$vec2$cross(new this.GLM.$outer.Float32Array(3),a,b))},$vec3$cross:GLMAT.vec3.cross,\"vec3,vec3\":function(a,b){return new this.GLM.vec3(this.$vec3$cross(new this.GLM.$outer.Float32Array(3),a,b))}},dot:{\"$vec<N>$dot\":\"GLMAT.vecN.dot\",\"vec<N>,vec<N>\":function(a,b){return this.$vecN$dot(a,b)}},lookAt:{$mat4$lookAt:GLMAT.mat4.lookAt,\"vec3,vec3\":function(a,b,c){return new this.GLM.mat4(this.$mat4$lookAt(new this.GLM.$outer.Float32Array(16),\na.elements,b.elements,c.elements))}}};DLL[\"declare<T,V,number>\"]={mix:{$quat$slerp:GLMAT.quat.slerp,\"quat,quat\":function(a,b,c){return new GLM.quat(this.$quat$slerp(new GLM.$outer.Float32Array(4),a.elements,b.elements,c))}}};DLL[\"declare<T,V,number>\"].slerp=DLL[\"declare<T,V,number>\"].mix;\nDLL[\"declare<T>\"]={normalize:{\"$vec<N>normalize\":\"GLMAT.vecN.normalize\",$typeArray:function(a){return new this.GLM.$outer.Float32Array(a)},\"vec<N>\":function(a){return new this.GLM.vecN(this.$vecNnormalize(this.$typeArray(N),a))},$quat$normalize:GLMAT.quat.normalize,quat:function(a){return new this.GLM.quat(this.$quat$normalize(new this.GLM.$outer.Float32Array(4),a.elements))}},length:{$quat$length:GLMAT.quat.length,quat:function(a){return this.$quat$length(a.elements)},\"$vec<N>$length\":\"GLMAT.vecN.length\",\n\"vec<N>\":function(a){return this.$vecN$length(a.elements)}},length2:{$quat$squaredLength:GLMAT.quat.squaredLength,quat:function(a){return this.$quat$squaredLength(a.elements)},\"$vec<N>$squaredLength\":\"GLMAT.vecN.squaredLength\",\"vec<N>\":function(a){return this.$vecN$squaredLength(a.elements)}},inverse:{$quatinvert:GLMAT.quat.invert,quat:function(a){return this.GLM.quat(this.$quatinvert(new this.GLM.$outer.Float32Array(4),a.elements))},$mat4invert:GLMAT.mat4.invert,mat4:function(a){a=a.clone();return null===\nthis.$mat4invert(a.elements,a.elements)?a[\"=\"](this.GLM.mat4()):a}},transpose:{$mat4$transpose:GLMAT.mat4.transpose,mat4:function(a){a=a.clone();this.$mat4$transpose(a.elements,a.elements);return a}}};glm.$outer.$import(DLL);try{module.exports=glm}catch(e$$20){}\nfunction $GLMVector(a,b,c){this.typearray=c=c||GLM.$outer.Float32Array;if(!(this instanceof $GLMVector))throw new GLM.GLMJSError(\"use new\");if(\"function\"!==typeof a||!GLM.$isGLMConstructor(a))throw new GLM.GLMJSError(\"expecting typ to be GLM.$isGLMConstructor: \"+[typeof a,a?a.$type:a]+\" // \"+GLM.$isGLMConstructor(a));if(1===a.componentLength&&GLM[a.prototype.$type.replace(\"$\",\"$$v\")])throw new GLM.GLMJSError(\"unsupported argtype to glm.$vectorType - for single-value types use glm.\"+a.prototype.$type.replace(\"$\",\n\"$$v\")+\"...\"+a.prototype.$type);this.glmtype=a;if(!this.glmtype.componentLength)throw Error(\"need .componentLength \"+[a,b,c]);this.componentLength=this.glmtype.componentLength;this.BYTES_PER_ELEMENT=this.glmtype.BYTES_PER_ELEMENT;this._set_$elements=function(a){Object.defineProperty(this,\"$elements\",{enumerable:!1,configurable:!0,value:a});return this.$elements};Object.defineProperty(this,\"elements\",{enumerable:!0,configurable:!0,get:function(){return this.$elements},set:function(a){this._kv&&!this._kv.dynamic&&\nGLM.$DEBUG&&GLM.$outer.console.warn(\"WARNING: setting .elements on frozen (non-dynamic) GLMVector...\");if(a){var b=this.length;this.length=a.length/this.componentLength;this.byteLength=this.length*this.BYTES_PER_ELEMENT;if(this.length!==Math.round(this.length))throw new GLM.GLMJSError(\"$vectorType.length alignment mismatch \"+JSON.stringify({componentLength:this.componentLength,length:this.length,rounded_length:Math.round(this.length),elements_length:a.length,old_length:b}));}else this.length=this.byteLength=\n0;return this._set_$elements(a)}});this.elements=b&&new c(b*a.componentLength)}GLM.$vectorType=$GLMVector;GLM.$vectorType.version=\"0.0.2\";\n$GLMVector.prototype=GLM.$template.extend(new GLM.$GLMBaseType($GLMVector,\"$vectorType\"),{toString:function(){return\"[$GLMVector .elements=#\"+(this.elements&&this.elements.length)+\" .elements[0]=\"+(this.elements&&this.elements[0])+\" ->[0]\"+(this[\"->\"]&&this[\"->\"][0])+\"]\"},\"=\":function(a){if(a instanceof this.constructor||glm.$isGLMObject(a))a=a.elements;return this._set(new this.typearray(a))},_typed_concat:function(a,b,c){var e=a.length+b.length;c=c||new a.constructor(e);c.set(a);c.set(b,a.length);\nreturn c},\"+\":function(a){if(a instanceof this.constructor||glm.$isGLMObject(a))a=a.elements;return new this.constructor(this._typed_concat(this.elements,a))},\"+=\":function(a){if(a instanceof this.constructor||glm.$isGLMObject(a))a=a.elements;return this._set(this._typed_concat(this.elements,a))},_set:function(a){a instanceof this.constructor&&(a=new this.typearray(a.elements));if(!(a instanceof this.typearray))throw new GLM.GLMJSError(\"unsupported argtype to $GLMVector._set \"+(a&&a.constructor));\nGLM.$DEBUG&&GLM.$outer.console.debug(\"$GLMVector.prototype.set...this.elements:\"+[this.elements&&this.elements.constructor.name,this.elements&&this.elements.length]+\"elements:\"+[a.constructor.name,a.length]);var b=this._kv;this._kv=void 0;this.elements=a;if(this.elements!==a)throw new GLM.GLMJSError(\"err with .elements: \"+[this.glmtype.prototype.$type,this.elements,a]);b&&this._setup(b);return this},arrayize:function(a,b){return this._setup({dynamic:b,setters:a},this.length)},$destroy:function(a){if(a){for(var b=\nArray.isArray(a),c=function(c){Object.defineProperty(a,c,{enumerable:!0,configurable:!0,value:void 0});delete a[c];b||(a[c]=void 0,delete a[c])},e=0;e<a.length;e++)e in a&&c(e);for(;e in a;)GLM.$DEBUG&&GLM.$outer.console.debug(\"$destroy\",this.name,e),c(e++);b&&(a.length=0)}},_arrlike_toJSON:function(){return this.slice(0)},_mixinArray:function(a){a.toJSON=this._arrlike_toJSON;\"forEach map slice filter join reduce\".split(\" \").forEach(function(b){a[b]=Array.prototype[b]});return a},_setup:function(a,\nb){var c=this.glmtype,e=this.typearray,d=this.length;this._kv=a;var h=a.stride||this.glmtype.BYTES_PER_ELEMENT,j=a.offset||this.elements.byteOffset,g=a.elements||this.elements,k=a.container||this.arr||[],i=a.setters||!1,w=a.dynamic||!1;\"self\"===k&&(k=this);if(!g)throw new GLMJSError(\"GLMVector._setup - neither kv.elements nor this.elements...\");this.$destroy(this.arr,b);var r=this.arr=this[\"->\"]=k;Array.isArray(r)||this._mixinArray(r);var m=this.componentLength;if(!m)throw new GLM.GLMJSError(\"no componentLength!?\"+\nObject.keys(this));for(var q=g.buffer.byteLength,s=this,t=0;t<d;t++){var k=j+t*h,z=k+this.glmtype.BYTES_PER_ELEMENT,y=function(){a.i=t;a.next=z;a.last=q;a.offset=a.offset||j;a.stride=a.stride||h;return JSON.stringify(a)};if(k>q)throw Error(\"[\"+t+\"] off \"+k+\" > last \"+q+\" \"+y());if(z>q)throw Error(\"[\"+t+\"] next \"+z+\" > last \"+q+\" \"+y());r[t]=null;var f=function(a,b){var d=new c(new e(a.buffer,b,m));w&&Object.defineProperty(d,\"$elements\",{value:a});return d},y=f(g,k);!i&&!w?r[t]=y:function(a,b,c){Object.defineProperty(r,\nb,{enumerable:!0,configurable:!0,get:w?function(){a.$elements!==s.elements&&(GLM.$log(\"dynoget rebinding ti\",b,c,a.$elements===s.elements),a=f(s.elements,c));return a}:function(){return a},set:i&&(w?function(d){GLM.$log(\"dynoset\",b,c,a.$elements===s.elements);a.$elements!==s.elements&&(GLM.$log(\"dynoset rebinding ti\",b,c,a.$elements===s.elements),a=f(s.elements,c));return a.copy(d)}:function(b){return a.copy(b)})||void 0})}(y,t,k)}return this},setFromBuffers:function(a){var b=this.elements,c=0;a.forEach(function(a){var d=\na.length;if(c+d>b.length){d=Math.min(b.length-c,a.length);if(0>=d)return;a=glm.$subarray(a,0,d);d=a.length}if(c+d>b.length)throw new glm.GLMJSError(\"$vectorType.fromBuffers mismatch \"+[c,d,b.length]);b.set(a,c);c+=a.length});return c},setFromPointer:function(a){if(!(a instanceof GLM.$outer.ArrayBuffer))throw new glm.GLMJSError(\"unsupported argtype \"+[typeof a]+\" - $GLMVector.setFromPointer\");return this._set(new this.typearray(a))}});GLM.exists;GLM.$vectorType.exists;\nif(GLM.$toTypedArray)throw\"error: glm.experimental.js double-included\";\nGLM.$toTypedArray=function(a,b,c){var e=b||0,d=typeof e;if(\"number\"===d){if(\"number\"!==typeof c)throw new GLM.GLMJSError(\"GLM.$toTypedArray: unsupported argtype for componentLength (\"+typeof c+\")\");return new a(e*c)}if(\"object\"!==d)throw new GLM.GLMJSError(\"GLM.$toTypedArray: unsupported arrayType: \"+[typeof a,a]);if(e instanceof a)return e;if(e instanceof GLM.$outer.ArrayBuffer||Array.isArray(e))return new a(e);GLM.$isGLMObject(e)&&(d=e.elements,e=new a(d.length),e.set(d));if(!(e instanceof a)&&\n\"byteOffset\"in e&&\"buffer\"in e)return GLM.$DEBUG&&GLM.$outer.console.warn(\"coercing \"+e.constructor.name+\".buffer into \"+[a.name,e.byteOffset,e.byteLength+\" bytes\",\"~\"+e.byteLength/a.BYTES_PER_ELEMENT+\" coerced elements\"]+\"...\",{byteOffset:e.byteOffset,byteLength:e.byteLength,ecount:e.byteLength/a.BYTES_PER_ELEMENT}),new a(e.buffer,e.byteOffset,e.byteLength/a.BYTES_PER_ELEMENT);if(e instanceof a)return e;throw new GLM.GLMJSError(\"GLM.$toTypedArray: unsupported argtype initializers: \"+[a,b,c]);};\nGLM.$make_primitive=function(a,b){GLM[a]=function(c){if(!(this instanceof GLM[a]))return new GLM[a](c);\"object\"!==typeof c&&(c=[c]);this.elements=GLM.$toTypedArray(b,c,1)};GLM[a]=eval(GLM.$template._traceable(\"glm_\"+a+\"$class\",GLM[a]))();GLM.$template._add_overrides(a,{$to_string:function(a){return a.$type.replace(/[^a-z]/g,\"\")+\"(\"+a.elements[0]+\")\"},$to_object:function(a){return a.elements[0]},$to_glsl:function(a){return a.$type.replace(/[^a-z]/g,\"\")+\"(\"+a.elements[0]+\")\"}});GLM.$template._add_overrides(a.substr(1),\n{$to_string:!(a.substr(1)in GLM.$to_string.$template)&&function(a){return a.$type.replace(/[^a-z]/g,\"\")+\"(\"+a.elements[0]+\")\"},$to_object:function(a){return a},$to_glsl:function(a){return a.$type.replace(/[^a-z]/g,\"\")+\"(\"+a+\")\"}});GLM.$template.extend(GLM[a],{componentLength:1,BYTES_PER_ELEMENT:b.BYTES_PER_ELEMENT,prototype:GLM.$template.extend(new GLM.$GLMBaseType(GLM[a],a),{copy:function(a){this.elements.set(GLM.$isGLMObject(a)?a.elements:[a]);return this},valueOf:function(){return this.elements[0]}})});\nGLM[a].prototype[\"=\"]=GLM[a].prototype.copy;return GLM[a]};GLM.$make_primitive(\"$bool\",GLM.$outer.Int32Array);GLM.$template._add_overrides(\"$bool\",{$to_object:function(a){return!!a}});GLM.$make_primitive(\"$int32\",GLM.$outer.Int32Array);GLM.$make_primitive(\"$uint32\",GLM.$outer.Uint32Array);GLM.$make_primitive(\"$uint16\",GLM.$outer.Uint16Array);GLM.$make_primitive(\"$uint8\",GLM.$outer.Uint8Array);GLM.$float32=GLM.$make_primitive(\"$float\",GLM.$outer.Float32Array);\nGLM.$make_primitive_vector=function(a,b,c){c=c||(new b).elements.constructor;var e=function(d){if(!(this instanceof e))return new e(d);this.$type=a;this.$type_name=\"vector<\"+a+\">\";(d=GLM.$toTypedArray(c,d,b.componentLength))&&this._set(d)},e=eval(GLM.$template._traceable(\"glm_\"+a+\"$class\",e))();e.prototype=new GLM.$vectorType(b,0,c);GLM.$template._add_overrides(a,{$to_string:function(a){return\"[GLM.\"+a.$type+\" elements[0]=\"+(a.elements&&a.elements[0])+\"]\"},$to_object:function(a){return a.map(GLM.$to_object)},\n$to_glsl:function(a,b){var c=a.$type.substr(2).replace(/[^a-z]/g,\"\");b=\"string\"===typeof b?b:\"example\";var e=[];b&&e.push(c+\" \"+b+\"[\"+a.length+\"]\");return e.concat(a.map(function(a,c){return b+\"[\"+c+\"] = \"+a})).join(\";\")+\";\"}});GLM.$types.push(a);GLM.$template.extend(e.prototype,{$type:a,constructor:e,_setup:function(){throw new GLM.GLMJSError(\"._setup not available on primitive vectors yet...\");},_set:function(a){this.elements=a;this.length=!this.elements?0:this.elements.length/this.glmtype.componentLength;\nthis.arrayize();return this},arrayize:function(){for(var a=Object.defineProperty.bind(Object,this),b=0;b<this.length;b++)(function(b){a(b,{configurable:!0,enumerable:!0,get:function(){return this.elements[b]},set:function(a){return this.elements[b]=a}})})(b);return this._mixinArray(this)},toString:function(){return\"[vector<\"+a+\"> {\"+[].slice.call(this.elements,0,5)+(5<this.elements.length?\",...\":\"\")+\"}]\"}});return e};GLM.$vint32=GLM.$make_primitive_vector(\"$vint32\",GLM.$int32);\nGLM.$vfloat=GLM.$vfloat32=GLM.$make_primitive_vector(\"$vfloat32\",GLM.$float32);GLM.$vuint8=GLM.$make_primitive_vector(\"$vuint8\",GLM.$uint8);GLM.$vuint16=GLM.$make_primitive_vector(\"$vuint16\",GLM.$uint16);GLM.$vuint32=GLM.$make_primitive_vector(\"$vuint32\",GLM.$uint32);\nGLM.$make_componentized_vector=function(a,b,c){c=c||(new b).elements.constructor;var e=function(a,h){if(!(this instanceof e))return new e(a,h);this._set(GLM.$toTypedArray(c,a,b.componentLength));if(!this.elements)throw new GLM.GLMJSError(\"!this.elements: \"+[GLM.$toTypedArray(c,a,b.componentLength)]);this._setup({setters:!0,dynamic:h,container:\"self\"})},e=eval(GLM.$template._traceable(\"glm_\"+a+\"$class\",e))();e.prototype=new GLM.$vectorType(b,0,c);GLM.$template._add_overrides(a,{$to_string:function(a){return\"[GLM.\"+\na.$type+\" elements[0]=\"+(a.elements&&a.elements[0])+\"]\"},$to_object:function(a){return a.map(GLM.$to_object)},$to_glsl:function(a,b){var c=a.$type.substr(2);b=\"string\"===typeof b?b:\"example\";var e=[];b&&e.push(c+\" \"+b+\"[\"+a.length+\"]\");return e.concat(a.map(GLM.$to_glsl).map(function(a,c){return b+\"[\"+c+\"] = \"+a})).join(\";\\n \")+\";\"}});GLM.$types.push(a);GLM.$template.extend(e.prototype,{$type:a,constructor:e});e.prototype.componentLength||alert(\"!cmop \"+p);return e};\n(function(){var a=GLM.$template.deNify({\"$vvec<N>\":function(){return GLM.$make_componentized_vector(\"$vvecN\",GLM.vecN)},\"$vuvec<N>\":function(){return GLM.$make_componentized_vector(\"$vuvecN\",GLM.uvecN)},\"$vmat<N>\":function(){return GLM.$make_componentized_vector(\"$vmatN\",GLM.matN)},$vquat:function(){return GLM.$make_componentized_vector(\"$vquat\",GLM.quat)}},\"$v\"),b;for(b in a)GLM[b]=a[b]()})();\n(GLM._redefine_base64_helpers=function define_base64_helpers(b,c){function e(b){return(b+\"\").replace(/\\s/g,\"\")}function d(b){return new k(b.split(\"\").map(function(b){return b.charCodeAt(0)}))}function h(b){b instanceof k||(b=new k(b));return[].map.call(b,function(b){return String.fromCharCode(b)}).join(\"\")}function j(b){b=b instanceof i?b:d(b).buffer;return GLM.$b64.encode(b,b.byteOffset,b.byteLength)}function g(b){b=new String(h(GLM.$b64.decode(b)));b.array=d(b);b.buffer=b.array.buffer;return b}\nb=define_base64_helpers.atob=b||define_base64_helpers.atob||g;c=define_base64_helpers.btoa=c||define_base64_helpers.btoa||j;var k=GLM.$outer.Uint8Array,i=GLM.$outer.ArrayBuffer,w,r=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\".indexOf.bind(\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\");w={encode:function(b,c,d){b=new k(b,c,d);d=b.length;var e=\"\";for(c=0;c<d;c+=3)e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[b[c]>>2],e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[(b[c]&\n3)<<4|b[c+1]>>4],e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[(b[c+1]&15)<<2|b[c+2]>>6],e+=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\"[b[c+2]&63];2===d%3?e=e.substring(0,e.length-1)+\"=\":1===d%3&&(e=e.substring(0,e.length-2)+\"==\");return e},decode:function(b){b=e(b);var c=b.length,d=0.75*c,g=0,h,j,f,v;\"=\"===b[c-1]&&(d--,\"=\"===b[c-2]&&d--);for(var w=new i(d),R=new k(w),d=0;d<c;d+=4)h=r(b[d]),j=r(b[d+1]),f=r(b[d+2]),v=r(b[d+3]),R[g++]=h<<2|j>>4,R[g++]=\n(j&15)<<4|f>>2,R[g++]=(f&3)<<6|v&63;return w}};GLM.$template.extend(w,{trim:e,atob:b,btoa:c,$atob:g,$btoa:j,toCharCodes:d,fromCharCodes:h,b64_to_utf8:function(c){return decodeURIComponent(escape(b(e(c))))},utf8_to_b64:function(b){return c(unescape(encodeURIComponent(b)))}});GLM.$template.extend(GLM,{$b64:w,$to_base64:function(b){return GLM.$b64.encode(b.elements.buffer,b.elements.byteOffset,b.elements.byteLength)},$from_base64:function(b,c){var d=GLM.$b64.decode(b);if(!0===c||c==GLM.$outer.ArrayBuffer)return d;\nvoid 0===c&&(c=GLM.$outer.Float32Array);return new c(d);throw new GLM.GLMJSError(\"TODO: $from_base64 not yet supported second argument type: (\"+[typeof c,c]+\")\");}})})(\"function\"===typeof atob&&atob.bind(this),\"function\"===typeof btoa&&btoa.bind(this));\n(function(){function a(a,c){return{get:function(){return a.call(this)},set:function(a){if(this.copy)return this.copy(new this.constructor(c.call(this,a)));this.elements.set(c.call(this,a))}}}\"$bool $float32 $vfloat32 $vuint8 $vuint16 $vuint32 $vvec2 $vvec3 $vvec4 $vmat3 $vmat4 $vquat vec2 vec3 vec4 mat3 mat4 uvec2 uvec3 uvec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 quat\".split(\" \").map(GLM.$getGLMType).forEach(function(b){Object.defineProperty(b.prototype,\"array\",a(function(){return GLM.$to_array(this)},\nfunction(a){return a}));Object.defineProperty(b.prototype,\"base64\",a(function(){return GLM.$to_base64(this)},function(a){return GLM.$from_base64(a,this.elements.constructor)}));Object.defineProperty(b.prototype,\"buffer\",a(function(){return this.elements.buffer},function(a){return new this.elements.constructor(a)}));Object.defineProperty(b.prototype,\"json\",a(function(){return GLM.$to_json(this)},function(a){return JSON.parse(a)}));Object.defineProperty(b.prototype,\"object\",a(function(){return GLM.$to_object(this)},\nfunction(a){return a}));Object.defineProperty(b.prototype,\"glsl\",a(function(){return GLM.$to_glsl(this)},function(a){return GLM.$from_glsl(a,Array)}))})})();\nglm.GLMAT = GLMAT; globals.glm = glm; try { module.exports = glm; } catch(e) { }; try { window.glm = glm; } catch(e) {} ; try { declare.amd && declare(function() { return glm; }); } catch(e) {}; return this.glm = glm; })(this, typeof $GLM_log !== \"undefined\" ? $GLM_log : undefined, typeof $GLM_console_log !== \"undefined\" ? $GLM_console_log : undefined);\n\n\n//# sourceURL=webpack://wod/./node_modules/glm-js/build/glm-js.min.js?");

/***/ }),

/***/ "./node_modules/wbase/dist/wbase.js":
/*!******************************************!*\
  !*** ./node_modules/wbase/dist/wbase.js ***!
  \******************************************/
/***/ ((module) => {

eval("!function(e,r){ true?module.exports=r():0}(self,(()=>(()=>{\"use strict\";var __webpack_modules__={880:(__unused_webpack_module,__nested_webpack_exports__,__nested_webpack_require_294__)=>{__nested_webpack_require_294__.d(__nested_webpack_exports__,{$C:()=>get_program_data,ax:()=>init_program,fh:()=>init_program_fbos});var _vertex_common__WEBPACK_IMPORTED_MODULE_2__=__nested_webpack_require_294__(961),_uniforms_common__WEBPACK_IMPORTED_MODULE_3__=__nested_webpack_require_294__(286),_utils__WEBPACK_IMPORTED_MODULE_1__=__nested_webpack_require_294__(853),_texture_common__WEBPACK_IMPORTED_MODULE_0__=__nested_webpack_require_294__(370);const init_program=_init_program,init_program_fbos=_init_program_fbos,get_program_data=_get_program_data;function _init_program(e,r){let t={};try{let _=[r.vertex_shader,r.fragment_shader].map((e=>_decorate_source(e)));if(r.build_program)t=r.build_program(e,shaders);else{let o=(0,_utils__WEBPACK_IMPORTED_MODULE_1__.jr)(e,_),n=o.program,a=o.shaders;t=_init_program_fbos(Object.assign({program:n,shaders:a},_get_program_data(e,n)),e,r)}}catch(e){console.warn(\"PROGRAM ERROR FOR CURRENT PROGRAM\"),console.warn(e)}return r.add_program_configuration&&(t=r.add_program_configuration(t,e,r)),t}function _get_program_data(e,r){return{vertex_data:(0,_vertex_common__WEBPACK_IMPORTED_MODULE_2__.D)(e,r),uniforms:(0,_uniforms_common__WEBPACK_IMPORTED_MODULE_3__.r)(e,r),start_time:performance.now()}}function _init_program_fbos(e,r,t){const{canvas:_,framebuffers_n:o,framebuffers_offset:n}=t;let a=o||1,i=n||1;return e.has_framebuffer=t.has_framebuffer,t.dont_create_base_texture||(e.base_texture=e.base_texture||_texture_common__WEBPACK_IMPORTED_MODULE_0__.K.init_texture(r,0)),e.fbo_data=_texture_common__WEBPACK_IMPORTED_MODULE_0__.K.create_fbo_textures(e,r,a,i,_.clientWidth,_.clientHeight),e}function _decorate_source(source){return eval(\"`\"+source+\"`\")}},370:(e,r,t)=>{t.d(r,{K:()=>_});const _=function(){return{init_texture:e,draw_into_texture:r,create_fbo_textures:function(t,_,o,n,a,i){let u=[];for(var f=n=n||0;f<o+n;++f){var c=e(_,0);r(_,c,0,null,a,i);var s=_.createFramebuffer();_.bindFramebuffer(_.FRAMEBUFFER,s);var b=_.COLOR_ATTACHMENT0;_.framebufferTexture2D(_.FRAMEBUFFER,b,_.TEXTURE_2D,c,0),u[f]={fbo:s,texture:c}}return _.bindFramebuffer(_.FRAMEBUFFER,null),u},set_framebuffer:function(e,r,t,_){e.bindFramebuffer(e.FRAMEBUFFER,r),e.viewport(0,0,t,_)},get_fbo_texture:function(e,r){return(((e||{}).fbo_data||[])[r]||{}).texture},get_fbo:function(e,r){return(((e||{}).fbo_data||[])[r]||{}).fbo}};function e(e,r){e.activeTexture(e.TEXTURE0+(r||0));var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),t}function r(e,r,t,_,o,n){e.activeTexture(e.TEXTURE0+(t||0)),e.bindTexture(e.TEXTURE_2D,r);var a=e.RGBA,i=e.RGBA,u=e.UNSIGNED_BYTE,f=_,c=f?[e.TEXTURE_2D,0,a,i,u,f]:[e.TEXTURE_2D,0,a,o,n,0,i,u,f];try{e.texImage2D.apply(e,c)}catch(e){console.warn(\"Error loading image\",_)}}}()},286:(e,r,t)=>{t.d(r,{r:()=>o});var _=t(853);function o(e,r){let t=(0,_.Vh)(e,{program:r});return Object.keys(t.uniforms).reduce(((e,r)=>(e[r]={get:()=>t.uniforms[r].loc,set:o.bind(null,t.uniforms[r])},e)),{});function o(e,r,t,_,o){r[\"uniform\"+_].apply(r,[].concat(e.loc,o))}}},853:(e,r,t)=>{t.d(r,{B0:()=>n,HO:()=>a,Lo:()=>u,VU:()=>s,Vh:()=>c,c0:()=>_,jr:()=>i,kQ:()=>o,uX:()=>f});const _=function(e,r,t,_,o){var n=r,a=r+_,i=t,u=t+o;e.bufferData(e.ARRAY_BUFFER,new Float32Array([n,i,a,i,n,u,n,u,a,i,a,u]),e.STATIC_DRAW)},o=function(e,r,t,_,o,n){e.bindBuffer(e.ARRAY_BUFFER,r),e.enableVertexAttribArray(t),e.vertexAttribPointer(t,_,n||e.FLOAT,o||!1,0,0)},n=function(e,r,t,_){const o=_||E,n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)||e.isContextLost()?n:(o(\"*** Error compiling shader '\"+n+\"':\"+e.getShaderInfoLog(n)),e.deleteShader(n),null)},a=function(e,r,t,_,o){const n=o||E,a=e.createProgram();return r.forEach((function(r){e.attachShader(a,r)})),t&&t.forEach((function(r,t){e.bindAttribLocation(a,_?_[t]:t,r)})),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||e.isContextLost()?a:(n(\"Error in program linking:\"+e.getProgramInfoLog(a)),e.deleteProgram(a),null)},i=function(e,r,t,_,o){const i=[];for(let t=0;t<r.length;++t)i.push(n(e,r[t],e[b[t]],o));return{shaders:i,program:a(e,i,t,_,o)}},u=function(e,r){r=r||1;const t=e.clientWidth*r|0,_=e.clientHeight*r|0;return(e.width!==t||e.height!==_)&&(e.width=t,e.height=_,!0)},f=function(e,r,t,_){var o=l(r)||e.TRIANGLES,n=l(t)||0,a=l(_)||6;e.drawArrays(o,n,a)},c=function(e,r){const t=r.program;r.attributes={},r.uniforms={};const _=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);let o=r.attributes;for(let r=0;r<_;r++){const _=e.getActiveAttrib(t,r);o[_.name]={loc:e.getAttribLocation(t,_.name),def:_}}const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);o=r.uniforms;for(let r=0;r<n;r++){const _=e.getActiveUniform(t,r);o[_.name]={loc:e.getUniformLocation(t,_.name),def:_}}return r},s=function(){let e=new Uint32Array([287454020]),r=new Uint8Array(e.buffer);return 68===r[0]||(r[0],!1)},b=[\"VERTEX_SHADER\",\"FRAGMENT_SHADER\"];function E(e){window.top.console&&(window.top.console.error?window.top.console.error(e):window.top.console.log&&window.top.console.log(e))}function l(e){return null!=e?e:null}},961:(e,r,t)=>{t.d(r,{D:()=>o});var _=t(853);const o=function(e,r){let t={};return t.vao=e.createVertexArray(),e.bindVertexArray(t.vao),t.positionAttributeLocation=e.getAttribLocation(r,\"a_position\"),t.texCoodAttributeLocation=e.getAttribLocation(r,\"a_texCoord\"),t.pos_buffer=e.createBuffer(),t.coord_buffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,t.pos_buffer),(0,_.c0)(e,0,0,e.canvas.clientWidth,e.canvas.clientHeight),(0,_.kQ)(e,t.pos_buffer,t.positionAttributeLocation,2),e.bindBuffer(e.ARRAY_BUFFER,t.coord_buffer),(0,_.c0)(e,0,0,1,1),(0,_.kQ)(e,t.coord_buffer,t.texCoodAttributeLocation,2,!0),e.bindVertexArray(null),t}}},__webpack_module_cache__={};function __nested_webpack_require_6223__(e){var r=__webpack_module_cache__[e];if(void 0!==r)return r.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__nested_webpack_require_6223__),t.exports}__nested_webpack_require_6223__.d=(e,r)=>{for(var t in r)__nested_webpack_require_6223__.o(r,t)&&!__nested_webpack_require_6223__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},__nested_webpack_require_6223__.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),__nested_webpack_require_6223__.r=e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})};var __nested_webpack_exports__={};return(()=>{__nested_webpack_require_6223__.r(__nested_webpack_exports__),__nested_webpack_require_6223__.d(__nested_webpack_exports__,{bind_attribute:()=>_.kQ,buffer_data:()=>p,createProgram:()=>_.HO,createProgramFromSources:()=>_.jr,create_program:()=>b,default:()=>A,draw_shapes:()=>_.uX,fill_position_buffer:()=>d,generate_attributes_from_config:()=>l,get_program_data:()=>e.$C,get_program_elements:()=>_.Vh,get_program_uniforms:()=>t.r,get_ubo:()=>n,get_uniforms_in_ubo:()=>a,init_program:()=>e.ax,init_program_fbos:()=>e.fh,init_vao:()=>E,init_vertex_data:()=>o.D,isSystemLittleEndian:()=>_.VU,loadShader:()=>_.B0,resizeCanvasToDisplaySize:()=>_.Lo,set_rectangle_coords:()=>_.c0,set_uniforms:()=>g,set_unique_ubo_in_program:()=>i,setup_indices:()=>m,texture_data:()=>r.K,update_ubo_buffer:()=>u});var e=__nested_webpack_require_6223__(880),r=__nested_webpack_require_6223__(370),t=__nested_webpack_require_6223__(286),_=__nested_webpack_require_6223__(853),o=__nested_webpack_require_6223__(961);const n=function(e,r,t,_){const o=e.getUniformBlockIndex(r,t),n=e.getActiveUniformBlockParameter(r,o,e.UNIFORM_BLOCK_DATA_SIZE),a=e.createBuffer();e.bindBuffer(e.UNIFORM_BUFFER,a),e.bufferData(e.UNIFORM_BUFFER,n,e.DYNAMIC_DRAW);const u={uboIndex:o,uboBuffer:a,blockSize:n,uboUniqueBind:_};return void 0!==_&&(e.bindBufferBase(e.UNIFORM_BUFFER,_,a),i(e,r,u)),e.bindBuffer(e.UNIFORM_BUFFER,null),u},a=function(e,r,t){const{uboIndex:_,uboBuffer:o,uboUniqueBind:n,ubo_variable_names:a}=t,i=e.getUniformIndices(r,a),u=e.getActiveUniforms(r,i,e.UNIFORM_TYPE),f=e.getActiveUniforms(r,i,e.UNIFORM_OFFSET),c=e.getActiveUniforms(r,i,e.UNIFORM_SIZE),s=e.getActiveUniforms(r,i,e.UNIFORM_ARRAY_STRIDE);return Object.assign(t,{ubo_variable_info:a.reduce(((e,r,t)=>Object.assign(e,{[r]:{index:i[t],type:u[t],size:c[t],offset:f[t],stride:s[t]}})),{})})},i=function(e,r,t){const{uboIndex:_,uboUniqueBind:o}=t;e.uniformBlockBinding(r,_,o)},u=function(e,r,t,_){const{uboBuffer:o,ubo_variable_info:n,blockSize:a}=r;e.bindBuffer(e.UNIFORM_BUFFER,o);const i=function(e,r,t,_,o){const n=new ArrayBuffer(r),a=new DataView(n),i=Object.keys(t);for(let r=0;r<i.length;r++){const n=i[r],u=t[n],b=o[n].opts,E=_[n],l=E.buffer||Array.isArray(E)?E:[E],d=c[b.fn],m=u.type===e.FLOAT_VEC2||u.type===e.INT_VEC2?2:u.type===e.FLOAT_VEC3||u.type===e.INT_VEC3?3:1,p=s[b.fn];if(0===u.stride)for(let e=0;e<l.length;e++){const r=u.offset+e*d;a[p](r,l[e],f)}else{let e=0;for(let r=0;r<l.length;r+=m){const t=u.offset+e*u.stride;for(let e=0;e<m;e++)a[p](t+d*e,l[r+e],f);e++}}}return a}(e,a,n,t,_);e.bufferSubData(e.UNIFORM_BUFFER,0,i,0,i.length),e.bindBuffer(e.UNIFORM_BUFFER,null)},f=(0,_.VU)(),c={\"1i\":Int16Array.BYTES_PER_ELEMENT,\"1iv\":Int16Array.BYTES_PER_ELEMENT,\"2iv\":Int16Array.BYTES_PER_ELEMENT,\"3iv\":Int16Array.BYTES_PER_ELEMENT,\"1f\":Float32Array.BYTES_PER_ELEMENT,\"1fv\":Float32Array.BYTES_PER_ELEMENT,\"2fv\":Float32Array.BYTES_PER_ELEMENT,\"3fv\":Float32Array.BYTES_PER_ELEMENT,Matrix2fv:Float32Array.BYTES_PER_ELEMENT,Matrix3fv:Float32Array.BYTES_PER_ELEMENT,Matrix4fv:Float32Array.BYTES_PER_ELEMENT},s={\"1i\":\"setInt16\",\"1iv\":\"setInt16\",\"2iv\":\"setInt16\",\"3iv\":\"setInt16\",\"1f\":\"setFloat32\",\"1fv\":\"setFloat32\",\"2fv\":\"setFloat32\",\"3fv\":\"setFloat32\",Matrix2fv:\"setFloat32\",Matrix3fv:\"setFloat32\",Matrix4fv:\"setFloat32\"},b=function(e,r,t){let o=(0,_.B0)(e,r,e.VERTEX_SHADER),n=(0,_.B0)(e,t,e.FRAGMENT_SHADER);return(0,_.HO)(e,[o,n])},E=function(e,r){const{program:t,attributes:_,uniforms:o}=r,i=r.vao||e.createVertexArray();e.useProgram(t),e.bindVertexArray(i);const u=e.createBuffer(),f=e.ARRAY_BUFFER;return e.bindBuffer(f,u),Object.keys(_).forEach((o=>{let n=_[o],a=e.getAttribLocation(t,n.name);e.vertexAttribPointer.apply(e,[a].concat(n.opts)),e.enableVertexAttribArray(a),Object.assign(r.attributes[n.name],{location:a,buffer:u,buffer_bind:f},{is_position:n.is_position})})),Object.keys(o).forEach((_=>{r.uniforms[_].ubo||Object.assign(r.uniforms[_],{location:e.getUniformLocation(t,_)})})),r=function(e,r){const{program:t,uniforms:_,program_index:o}=r,i=Object.keys(Object.keys(_).reduce(((e,r)=>Object.assign(e,_[r].ubo?{[_[r].ubo]:!0}:{})),{})).length;let u=0;const f=Object.keys(_).reduce(((r,a)=>{if(_[a].ubo){const f=_[a].ubo;if(r[f])r[f].ubo_variable_names.push(a);else{let _=n(e,t,f,u+i*o);_.ubo_variable_names=[a],r[f]=_,u++}}return r}),{});return Object.keys(f).forEach((_=>{r.ubos=r.ubos||{},r.ubos[_]=a(e,t,f[_])})),r}(e,r),e.bindVertexArray(null),e.bindBuffer(f,null),e.useProgram(null),{vao:i}},l=function(e,r,t,_){return Object.assign(r,t,{attributes:Object.keys(t.attributes).reduce(((r,o)=>{let n=t.attributes[o],a=n.opts;return n.opts=[a.size||_||3,e[a.data_type],a.normalized,a.stride,a.offset],Object.assign(r,{[o]:n})}),{})})},d=function(e,r,t){const{attributes:_}=r;return Object.keys(_).filter((e=>_[e].is_position)).forEach((_=>{R(e,{[_]:t},r)})),r},m=function(e,r){const t=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t);const _=r;return e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array(_),e.STATIC_DRAW),t},p=R,g=function(e,r,t){const{program_info:_}=t,{ubos:o,uniforms:n}=_;let a=[];Object.keys(r).forEach((t=>{if(-1!==a.indexOf(t))return;let i=!1;if(Object.keys(o||{}).forEach((_=>{-1!==o[_].ubo_variable_names.indexOf(t)&&(u(e,o[_],r,n),i=!0,a=a.concat(o[_].ubo_variable_names))})),!i){const o=_.uniforms[t],{opts:n,location:a}=o;if(null===a)return;let i=r[t],u=-1===n.fn.indexOf(\"Matrix\")?[a,i]:[a,!1,i];e[\"uniform\"+n.fn].apply(e,u)}}))};function R(e,r,t){e.bindVertexArray(t.vao),Object.keys(r).forEach((_=>{const{buffer:o,buffer_bind:n}=t.attributes[_],a=r[_];e.bindBuffer(n,o),e.bufferData(n,a,e.STATIC_DRAW,0),e.bindBuffer(n,null)})),e.bindVertexArray(null)}const A={init_program:e.ax,init_program_fbos:e.fh,get_program_data:e.$C,texture_data:r.K,get_program_uniforms:t.r,set_rectangle_coords:_.c0,bind_attribute:_.kQ,loadShader:_.B0,createProgram:_.HO,createProgramFromSources:_.jr,resizeCanvasToDisplaySize:_.Lo,draw_shapes:_.uX,get_program_elements:_.Vh,isSystemLittleEndian:_.VU,init_vertex_data:o.D,create_program:b,init_vao:E,generate_attributes_from_config:l,fill_position_buffer:d,setup_indices:m,buffer_data:p,set_uniforms:g,get_ubo:n,get_uniforms_in_ubo:a,set_unique_ubo_in_program:i,update_ubo_buffer:u}})(),__nested_webpack_exports__})()));\n\n//# sourceURL=webpack://wod/./node_modules/wbase/dist/wbase.js?");

/***/ }),

/***/ "./node_modules/wplug/dist/wplug.js":
/*!******************************************!*\
  !*** ./node_modules/wplug/dist/wplug.js ***!
  \******************************************/
/***/ ((module) => {

eval("/*\n * ATTENTION: The \"eval\" devtool has been used (maybe by default in mode: \"development\").\n * This devtool is neither made for production nor for readable output files.\n * It uses \"eval()\" calls to create a separate source file in the browser devtools.\n * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)\n * or disable the default devtool with \"devtool: false\".\n * If you are looking for production-ready output files, see mode: \"production\" (https://webpack.js.org/configuration/mode/).\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(true)\n\t\tmodule.exports = factory();\n\telse {}\n})(self, () => {\nreturn /******/ (() => { // webpackBootstrap\n/******/ \tvar __webpack_modules__ = ({\n\n/***/ \"./node_modules/wbase/dist/wbase.js\":\n/*!******************************************!*\\\n  !*** ./node_modules/wbase/dist/wbase.js ***!\n  \\******************************************/\n/***/ ((module) => {\n\neval(\"!function (e, r) {\\n   true ? module.exports = r() : 0;\\n}(self, () => (() => {\\n  \\\"use strict\\\";\\n\\n  var __webpack_modules__ = {\\n      880: (__unused_webpack_module, __nested_webpack_exports__, __nested_webpack_require_356__) => {\\n        __nested_webpack_require_356__.d(__nested_webpack_exports__, {\\n          $C: () => get_program_data,\\n          ax: () => init_program,\\n          fh: () => init_program_fbos\\n        });\\n        var _vertex_common__WEBPACK_IMPORTED_MODULE_2__ = __nested_webpack_require_356__(961),\\n          _uniforms_common__WEBPACK_IMPORTED_MODULE_3__ = __nested_webpack_require_356__(286),\\n          _utils__WEBPACK_IMPORTED_MODULE_1__ = __nested_webpack_require_356__(853),\\n          _texture_common__WEBPACK_IMPORTED_MODULE_0__ = __nested_webpack_require_356__(370);\\n        const init_program = _init_program,\\n          init_program_fbos = _init_program_fbos,\\n          get_program_data = _get_program_data;\\n        function _init_program(e, r) {\\n          let t = {};\\n          try {\\n            let _ = [r.vertex_shader, r.fragment_shader].map(e => _decorate_source(e));\\n            if (r.build_program) t = r.build_program(e, shaders);else {\\n              let o = (0, _utils__WEBPACK_IMPORTED_MODULE_1__.jr)(e, _),\\n                n = o.program,\\n                a = o.shaders;\\n              t = _init_program_fbos(Object.assign({\\n                program: n,\\n                shaders: a\\n              }, _get_program_data(e, n)), e, r);\\n            }\\n          } catch (e) {\\n            console.warn(\\\"PROGRAM ERROR FOR CURRENT PROGRAM\\\"), console.warn(e);\\n          }\\n          return r.add_program_configuration && (t = r.add_program_configuration(t, e, r)), t;\\n        }\\n        function _get_program_data(e, r) {\\n          return {\\n            vertex_data: (0, _vertex_common__WEBPACK_IMPORTED_MODULE_2__.D)(e, r),\\n            uniforms: (0, _uniforms_common__WEBPACK_IMPORTED_MODULE_3__.r)(e, r),\\n            start_time: performance.now()\\n          };\\n        }\\n        function _init_program_fbos(e, r, t) {\\n          const {\\n            canvas: _,\\n            framebuffers_n: o,\\n            framebuffers_offset: n\\n          } = t;\\n          let a = o || 1,\\n            i = n || 1;\\n          return e.has_framebuffer = t.has_framebuffer, t.dont_create_base_texture || (e.base_texture = e.base_texture || _texture_common__WEBPACK_IMPORTED_MODULE_0__.K.init_texture(r, 0)), e.fbo_data = _texture_common__WEBPACK_IMPORTED_MODULE_0__.K.create_fbo_textures(e, r, a, i, _.clientWidth, _.clientHeight), e;\\n        }\\n        function _decorate_source(source) {\\n          return eval(\\\"`\\\" + source + \\\"`\\\");\\n        }\\n      },\\n      370: (e, r, t) => {\\n        t.d(r, {\\n          K: () => _\\n        });\\n        const _ = function () {\\n          return {\\n            init_texture: e,\\n            draw_into_texture: r,\\n            create_fbo_textures: function (t, _, o, n, a, i) {\\n              let u = [];\\n              for (var f = n = n || 0; f < o + n; ++f) {\\n                var c = e(_, 0);\\n                r(_, c, 0, null, a, i);\\n                var s = _.createFramebuffer();\\n                _.bindFramebuffer(_.FRAMEBUFFER, s);\\n                var b = _.COLOR_ATTACHMENT0;\\n                _.framebufferTexture2D(_.FRAMEBUFFER, b, _.TEXTURE_2D, c, 0), u[f] = {\\n                  fbo: s,\\n                  texture: c\\n                };\\n              }\\n              return _.bindFramebuffer(_.FRAMEBUFFER, null), u;\\n            },\\n            set_framebuffer: function (e, r, t, _) {\\n              e.bindFramebuffer(e.FRAMEBUFFER, r), e.viewport(0, 0, t, _);\\n            },\\n            get_fbo_texture: function (e, r) {\\n              return (((e || {}).fbo_data || [])[r] || {}).texture;\\n            },\\n            get_fbo: function (e, r) {\\n              return (((e || {}).fbo_data || [])[r] || {}).fbo;\\n            }\\n          };\\n          function e(e, r) {\\n            e.activeTexture(e.TEXTURE0 + (r || 0));\\n            var t = e.createTexture();\\n            return e.bindTexture(e.TEXTURE_2D, t), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_S, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_WRAP_T, e.CLAMP_TO_EDGE), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MIN_FILTER, e.LINEAR), e.texParameteri(e.TEXTURE_2D, e.TEXTURE_MAG_FILTER, e.LINEAR), t;\\n          }\\n          function r(e, r, t, _, o, n) {\\n            e.activeTexture(e.TEXTURE0 + (t || 0)), e.bindTexture(e.TEXTURE_2D, r);\\n            var a = e.RGBA,\\n              i = e.RGBA,\\n              u = e.UNSIGNED_BYTE,\\n              f = _,\\n              c = f ? [e.TEXTURE_2D, 0, a, i, u, f] : [e.TEXTURE_2D, 0, a, o, n, 0, i, u, f];\\n            try {\\n              e.texImage2D.apply(e, c);\\n            } catch (e) {\\n              console.warn(\\\"Error loading image\\\", _);\\n            }\\n          }\\n        }();\\n      },\\n      286: (e, r, t) => {\\n        t.d(r, {\\n          r: () => o\\n        });\\n        var _ = t(853);\\n        function o(e, r) {\\n          let t = (0, _.Vh)(e, {\\n            program: r\\n          });\\n          return Object.keys(t.uniforms).reduce((e, r) => (e[r] = {\\n            get: () => t.uniforms[r].loc,\\n            set: o.bind(null, t.uniforms[r])\\n          }, e), {});\\n          function o(e, r, t, _, o) {\\n            r[\\\"uniform\\\" + _].apply(r, [].concat(e.loc, o));\\n          }\\n        }\\n      },\\n      853: (e, r, t) => {\\n        t.d(r, {\\n          B0: () => n,\\n          HO: () => a,\\n          Lo: () => u,\\n          VU: () => s,\\n          Vh: () => c,\\n          c0: () => _,\\n          jr: () => i,\\n          kQ: () => o,\\n          uX: () => f\\n        });\\n        const _ = function (e, r, t, _, o) {\\n            var n = r,\\n              a = r + _,\\n              i = t,\\n              u = t + o;\\n            e.bufferData(e.ARRAY_BUFFER, new Float32Array([n, i, a, i, n, u, n, u, a, i, a, u]), e.STATIC_DRAW);\\n          },\\n          o = function (e, r, t, _, o, n) {\\n            e.bindBuffer(e.ARRAY_BUFFER, r), e.enableVertexAttribArray(t), e.vertexAttribPointer(t, _, n || e.FLOAT, o || !1, 0, 0);\\n          },\\n          n = function (e, r, t, _) {\\n            const o = _ || E,\\n              n = e.createShader(t);\\n            return e.shaderSource(n, r), e.compileShader(n), e.getShaderParameter(n, e.COMPILE_STATUS) || e.isContextLost() ? n : (o(\\\"*** Error compiling shader '\\\" + n + \\\"':\\\" + e.getShaderInfoLog(n)), e.deleteShader(n), null);\\n          },\\n          a = function (e, r, t, _, o) {\\n            const n = o || E,\\n              a = e.createProgram();\\n            return r.forEach(function (r) {\\n              e.attachShader(a, r);\\n            }), t && t.forEach(function (r, t) {\\n              e.bindAttribLocation(a, _ ? _[t] : t, r);\\n            }), e.linkProgram(a), e.getProgramParameter(a, e.LINK_STATUS) || e.isContextLost() ? a : (n(\\\"Error in program linking:\\\" + e.getProgramInfoLog(a)), e.deleteProgram(a), null);\\n          },\\n          i = function (e, r, t, _, o) {\\n            const i = [];\\n            for (let t = 0; t < r.length; ++t) i.push(n(e, r[t], e[b[t]], o));\\n            return {\\n              shaders: i,\\n              program: a(e, i, t, _, o)\\n            };\\n          },\\n          u = function (e, r) {\\n            r = r || 1;\\n            const t = e.clientWidth * r | 0,\\n              _ = e.clientHeight * r | 0;\\n            return (e.width !== t || e.height !== _) && (e.width = t, e.height = _, !0);\\n          },\\n          f = function (e, r, t, _) {\\n            var o = l(r) || e.TRIANGLES,\\n              n = l(t) || 0,\\n              a = l(_) || 6;\\n            e.drawArrays(o, n, a);\\n          },\\n          c = function (e, r) {\\n            const t = r.program;\\n            r.attributes = {}, r.uniforms = {};\\n            const _ = e.getProgramParameter(t, e.ACTIVE_ATTRIBUTES);\\n            let o = r.attributes;\\n            for (let r = 0; r < _; r++) {\\n              const _ = e.getActiveAttrib(t, r);\\n              o[_.name] = {\\n                loc: e.getAttribLocation(t, _.name),\\n                def: _\\n              };\\n            }\\n            const n = e.getProgramParameter(t, e.ACTIVE_UNIFORMS);\\n            o = r.uniforms;\\n            for (let r = 0; r < n; r++) {\\n              const _ = e.getActiveUniform(t, r);\\n              o[_.name] = {\\n                loc: e.getUniformLocation(t, _.name),\\n                def: _\\n              };\\n            }\\n            return r;\\n          },\\n          s = function () {\\n            let e = new Uint32Array([287454020]),\\n              r = new Uint8Array(e.buffer);\\n            return 68 === r[0] || (r[0], !1);\\n          },\\n          b = [\\\"VERTEX_SHADER\\\", \\\"FRAGMENT_SHADER\\\"];\\n        function E(e) {\\n          window.top.console && (window.top.console.error ? window.top.console.error(e) : window.top.console.log && window.top.console.log(e));\\n        }\\n        function l(e) {\\n          return null != e ? e : null;\\n        }\\n      },\\n      961: (e, r, t) => {\\n        t.d(r, {\\n          D: () => o\\n        });\\n        var _ = t(853);\\n        const o = function (e, r) {\\n          let t = {};\\n          return t.vao = e.createVertexArray(), e.bindVertexArray(t.vao), t.positionAttributeLocation = e.getAttribLocation(r, \\\"a_position\\\"), t.texCoodAttributeLocation = e.getAttribLocation(r, \\\"a_texCoord\\\"), t.pos_buffer = e.createBuffer(), t.coord_buffer = e.createBuffer(), e.bindBuffer(e.ARRAY_BUFFER, t.pos_buffer), (0, _.c0)(e, 0, 0, e.canvas.clientWidth, e.canvas.clientHeight), (0, _.kQ)(e, t.pos_buffer, t.positionAttributeLocation, 2), e.bindBuffer(e.ARRAY_BUFFER, t.coord_buffer), (0, _.c0)(e, 0, 0, 1, 1), (0, _.kQ)(e, t.coord_buffer, t.texCoodAttributeLocation, 2, !0), e.bindVertexArray(null), t;\\n        };\\n      }\\n    },\\n    __webpack_module_cache__ = {};\\n  function __nested_webpack_require_9779__(e) {\\n    var r = __webpack_module_cache__[e];\\n    if (void 0 !== r) return r.exports;\\n    var t = __webpack_module_cache__[e] = {\\n      exports: {}\\n    };\\n    return __webpack_modules__[e](t, t.exports, __nested_webpack_require_9779__), t.exports;\\n  }\\n  __nested_webpack_require_9779__.d = (e, r) => {\\n    for (var t in r) __nested_webpack_require_9779__.o(r, t) && !__nested_webpack_require_9779__.o(e, t) && Object.defineProperty(e, t, {\\n      enumerable: !0,\\n      get: r[t]\\n    });\\n  }, __nested_webpack_require_9779__.o = (e, r) => Object.prototype.hasOwnProperty.call(e, r), __nested_webpack_require_9779__.r = e => {\\n    \\\"undefined\\\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {\\n      value: \\\"Module\\\"\\n    }), Object.defineProperty(e, \\\"__esModule\\\", {\\n      value: !0\\n    });\\n  };\\n  var __nested_webpack_exports__ = {};\\n  return (() => {\\n    __nested_webpack_require_9779__.r(__nested_webpack_exports__), __nested_webpack_require_9779__.d(__nested_webpack_exports__, {\\n      bind_attribute: () => _.kQ,\\n      buffer_data: () => p,\\n      createProgram: () => _.HO,\\n      createProgramFromSources: () => _.jr,\\n      create_program: () => b,\\n      default: () => A,\\n      draw_shapes: () => _.uX,\\n      fill_position_buffer: () => d,\\n      generate_attributes_from_config: () => l,\\n      get_program_data: () => e.$C,\\n      get_program_elements: () => _.Vh,\\n      get_program_uniforms: () => t.r,\\n      get_ubo: () => n,\\n      get_uniforms_in_ubo: () => a,\\n      init_program: () => e.ax,\\n      init_program_fbos: () => e.fh,\\n      init_vao: () => E,\\n      init_vertex_data: () => o.D,\\n      isSystemLittleEndian: () => _.VU,\\n      loadShader: () => _.B0,\\n      resizeCanvasToDisplaySize: () => _.Lo,\\n      set_rectangle_coords: () => _.c0,\\n      set_uniforms: () => g,\\n      set_unique_ubo_in_program: () => i,\\n      setup_indices: () => m,\\n      texture_data: () => r.K,\\n      update_ubo_buffer: () => u\\n    });\\n    var e = __nested_webpack_require_9779__(880),\\n      r = __nested_webpack_require_9779__(370),\\n      t = __nested_webpack_require_9779__(286),\\n      _ = __nested_webpack_require_9779__(853),\\n      o = __nested_webpack_require_9779__(961);\\n    const n = function (e, r, t, _) {\\n        const o = e.getUniformBlockIndex(r, t),\\n          n = e.getActiveUniformBlockParameter(r, o, e.UNIFORM_BLOCK_DATA_SIZE),\\n          a = e.createBuffer();\\n        e.bindBuffer(e.UNIFORM_BUFFER, a), e.bufferData(e.UNIFORM_BUFFER, n, e.DYNAMIC_DRAW);\\n        const u = {\\n          uboIndex: o,\\n          uboBuffer: a,\\n          blockSize: n,\\n          uboUniqueBind: _\\n        };\\n        return void 0 !== _ && (e.bindBufferBase(e.UNIFORM_BUFFER, _, a), i(e, r, u)), e.bindBuffer(e.UNIFORM_BUFFER, null), u;\\n      },\\n      a = function (e, r, t) {\\n        const {\\n            uboIndex: _,\\n            uboBuffer: o,\\n            uboUniqueBind: n,\\n            ubo_variable_names: a\\n          } = t,\\n          i = e.getUniformIndices(r, a),\\n          u = e.getActiveUniforms(r, i, e.UNIFORM_TYPE),\\n          f = e.getActiveUniforms(r, i, e.UNIFORM_OFFSET),\\n          c = e.getActiveUniforms(r, i, e.UNIFORM_SIZE),\\n          s = e.getActiveUniforms(r, i, e.UNIFORM_ARRAY_STRIDE);\\n        return Object.assign(t, {\\n          ubo_variable_info: a.reduce((e, r, t) => Object.assign(e, {\\n            [r]: {\\n              index: i[t],\\n              type: u[t],\\n              size: c[t],\\n              offset: f[t],\\n              stride: s[t]\\n            }\\n          }), {})\\n        });\\n      },\\n      i = function (e, r, t) {\\n        const {\\n          uboIndex: _,\\n          uboUniqueBind: o\\n        } = t;\\n        e.uniformBlockBinding(r, _, o);\\n      },\\n      u = function (e, r, t, _) {\\n        const {\\n          uboBuffer: o,\\n          ubo_variable_info: n,\\n          blockSize: a\\n        } = r;\\n        e.bindBuffer(e.UNIFORM_BUFFER, o);\\n        const i = function (e, r, t, _, o) {\\n          const n = new ArrayBuffer(r),\\n            a = new DataView(n),\\n            i = Object.keys(t);\\n          for (let r = 0; r < i.length; r++) {\\n            const n = i[r],\\n              u = t[n],\\n              b = o[n].opts,\\n              E = _[n],\\n              l = E.buffer || Array.isArray(E) ? E : [E],\\n              d = c[b.fn],\\n              m = u.type === e.FLOAT_VEC2 || u.type === e.INT_VEC2 ? 2 : u.type === e.FLOAT_VEC3 || u.type === e.INT_VEC3 ? 3 : 1,\\n              p = s[b.fn];\\n            if (0 === u.stride) for (let e = 0; e < l.length; e++) {\\n              const r = u.offset + e * d;\\n              a[p](r, l[e], f);\\n            } else {\\n              let e = 0;\\n              for (let r = 0; r < l.length; r += m) {\\n                const t = u.offset + e * u.stride;\\n                for (let e = 0; e < m; e++) a[p](t + d * e, l[r + e], f);\\n                e++;\\n              }\\n            }\\n          }\\n          return a;\\n        }(e, a, n, t, _);\\n        e.bufferSubData(e.UNIFORM_BUFFER, 0, i, 0, i.length), e.bindBuffer(e.UNIFORM_BUFFER, null);\\n      },\\n      f = (0, _.VU)(),\\n      c = {\\n        \\\"1i\\\": Int16Array.BYTES_PER_ELEMENT,\\n        \\\"1iv\\\": Int16Array.BYTES_PER_ELEMENT,\\n        \\\"2iv\\\": Int16Array.BYTES_PER_ELEMENT,\\n        \\\"3iv\\\": Int16Array.BYTES_PER_ELEMENT,\\n        \\\"1f\\\": Float32Array.BYTES_PER_ELEMENT,\\n        \\\"1fv\\\": Float32Array.BYTES_PER_ELEMENT,\\n        \\\"2fv\\\": Float32Array.BYTES_PER_ELEMENT,\\n        \\\"3fv\\\": Float32Array.BYTES_PER_ELEMENT,\\n        Matrix2fv: Float32Array.BYTES_PER_ELEMENT,\\n        Matrix3fv: Float32Array.BYTES_PER_ELEMENT,\\n        Matrix4fv: Float32Array.BYTES_PER_ELEMENT\\n      },\\n      s = {\\n        \\\"1i\\\": \\\"setInt16\\\",\\n        \\\"1iv\\\": \\\"setInt16\\\",\\n        \\\"2iv\\\": \\\"setInt16\\\",\\n        \\\"3iv\\\": \\\"setInt16\\\",\\n        \\\"1f\\\": \\\"setFloat32\\\",\\n        \\\"1fv\\\": \\\"setFloat32\\\",\\n        \\\"2fv\\\": \\\"setFloat32\\\",\\n        \\\"3fv\\\": \\\"setFloat32\\\",\\n        Matrix2fv: \\\"setFloat32\\\",\\n        Matrix3fv: \\\"setFloat32\\\",\\n        Matrix4fv: \\\"setFloat32\\\"\\n      },\\n      b = function (e, r, t) {\\n        let o = (0, _.B0)(e, r, e.VERTEX_SHADER),\\n          n = (0, _.B0)(e, t, e.FRAGMENT_SHADER);\\n        return (0, _.HO)(e, [o, n]);\\n      },\\n      E = function (e, r) {\\n        const {\\n            program: t,\\n            attributes: _,\\n            uniforms: o\\n          } = r,\\n          i = r.vao || e.createVertexArray();\\n        e.useProgram(t), e.bindVertexArray(i);\\n        const u = e.createBuffer(),\\n          f = e.ARRAY_BUFFER;\\n        return e.bindBuffer(f, u), Object.keys(_).forEach(o => {\\n          let n = _[o],\\n            a = e.getAttribLocation(t, n.name);\\n          e.vertexAttribPointer.apply(e, [a].concat(n.opts)), e.enableVertexAttribArray(a), Object.assign(r.attributes[n.name], {\\n            location: a,\\n            buffer: u,\\n            buffer_bind: f\\n          }, {\\n            is_position: n.is_position\\n          });\\n        }), Object.keys(o).forEach(_ => {\\n          r.uniforms[_].ubo || Object.assign(r.uniforms[_], {\\n            location: e.getUniformLocation(t, _)\\n          });\\n        }), r = function (e, r) {\\n          const {\\n              program: t,\\n              uniforms: _,\\n              program_index: o\\n            } = r,\\n            i = Object.keys(Object.keys(_).reduce((e, r) => Object.assign(e, _[r].ubo ? {\\n              [_[r].ubo]: !0\\n            } : {}), {})).length;\\n          let u = 0;\\n          const f = Object.keys(_).reduce((r, a) => {\\n            if (_[a].ubo) {\\n              const f = _[a].ubo;\\n              if (r[f]) r[f].ubo_variable_names.push(a);else {\\n                let _ = n(e, t, f, u + i * o);\\n                _.ubo_variable_names = [a], r[f] = _, u++;\\n              }\\n            }\\n            return r;\\n          }, {});\\n          return Object.keys(f).forEach(_ => {\\n            r.ubos = r.ubos || {}, r.ubos[_] = a(e, t, f[_]);\\n          }), r;\\n        }(e, r), e.bindVertexArray(null), e.bindBuffer(f, null), e.useProgram(null), {\\n          vao: i\\n        };\\n      },\\n      l = function (e, r, t, _) {\\n        return Object.assign(r, t, {\\n          attributes: Object.keys(t.attributes).reduce((r, o) => {\\n            let n = t.attributes[o],\\n              a = n.opts;\\n            return n.opts = [a.size || _ || 3, e[a.data_type], a.normalized, a.stride, a.offset], Object.assign(r, {\\n              [o]: n\\n            });\\n          }, {})\\n        });\\n      },\\n      d = function (e, r, t) {\\n        const {\\n          attributes: _\\n        } = r;\\n        return Object.keys(_).filter(e => _[e].is_position).forEach(_ => {\\n          R(e, {\\n            [_]: t\\n          }, r);\\n        }), r;\\n      },\\n      m = function (e, r) {\\n        const t = e.createBuffer();\\n        e.bindBuffer(e.ELEMENT_ARRAY_BUFFER, t);\\n        const _ = r;\\n        return e.bufferData(e.ELEMENT_ARRAY_BUFFER, new Uint16Array(_), e.STATIC_DRAW), t;\\n      },\\n      p = R,\\n      g = function (e, r, t) {\\n        const {\\n            program_info: _\\n          } = t,\\n          {\\n            ubos: o,\\n            uniforms: n\\n          } = _;\\n        let a = [];\\n        Object.keys(r).forEach(t => {\\n          if (-1 !== a.indexOf(t)) return;\\n          let i = !1;\\n          if (Object.keys(o || {}).forEach(_ => {\\n            -1 !== o[_].ubo_variable_names.indexOf(t) && (u(e, o[_], r, n), i = !0, a = a.concat(o[_].ubo_variable_names));\\n          }), !i) {\\n            const o = _.uniforms[t],\\n              {\\n                opts: n,\\n                location: a\\n              } = o;\\n            if (null === a) return;\\n            let i = r[t],\\n              u = -1 === n.fn.indexOf(\\\"Matrix\\\") ? [a, i] : [a, !1, i];\\n            e[\\\"uniform\\\" + n.fn].apply(e, u);\\n          }\\n        });\\n      };\\n    function R(e, r, t) {\\n      e.bindVertexArray(t.vao), Object.keys(r).forEach(_ => {\\n        const {\\n            buffer: o,\\n            buffer_bind: n\\n          } = t.attributes[_],\\n          a = r[_];\\n        e.bindBuffer(n, o), e.bufferData(n, a, e.STATIC_DRAW, 0), e.bindBuffer(n, null);\\n      }), e.bindVertexArray(null);\\n    }\\n    const A = {\\n      init_program: e.ax,\\n      init_program_fbos: e.fh,\\n      get_program_data: e.$C,\\n      texture_data: r.K,\\n      get_program_uniforms: t.r,\\n      set_rectangle_coords: _.c0,\\n      bind_attribute: _.kQ,\\n      loadShader: _.B0,\\n      createProgram: _.HO,\\n      createProgramFromSources: _.jr,\\n      resizeCanvasToDisplaySize: _.Lo,\\n      draw_shapes: _.uX,\\n      get_program_elements: _.Vh,\\n      isSystemLittleEndian: _.VU,\\n      init_vertex_data: o.D,\\n      create_program: b,\\n      init_vao: E,\\n      generate_attributes_from_config: l,\\n      fill_position_buffer: d,\\n      setup_indices: m,\\n      buffer_data: p,\\n      set_uniforms: g,\\n      get_ubo: n,\\n      get_uniforms_in_ubo: a,\\n      set_unique_ubo_in_program: i,\\n      update_ubo_buffer: u\\n    };\\n  })(), __nested_webpack_exports__;\\n})());\\n\\n//# sourceURL=webpack://wplug/./node_modules/wbase/dist/wbase.js?\");\n\n/***/ }),\n\n/***/ \"./src/index.js\":\n/*!**********************!*\\\n  !*** ./src/index.js ***!\n  \\**********************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__),\\n/* harmony export */   plugins: () => (/* binding */ plugins)\\n/* harmony export */ });\\n/* harmony import */ var _plugins__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./plugins */ \\\"./src/plugins/index.js\\\");\\n\\nconst plugins_api = Object.keys(_plugins__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"]).reduce((o, plug_key) => {\\n  const def = _plugins__WEBPACK_IMPORTED_MODULE_0__[\\\"default\\\"][plug_key].default;\\n  return Object.assign(o, {\\n    [plug_key]: _flatten_logic_into(def)\\n  });\\n}, {});\\nconst plugins = plugins_api;\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (plugins);\\n\\n/////////////////////////////////////////////////////////////////////////\\n/////////////////////////////////////////////////////////////////////////\\n\\nfunction _flatten_logic_into(main_o) {\\n  return Object.keys(main_o).reduce((o, l_key) => {\\n    let default_o = main_o[l_key].default,\\n      logic = default_o.logic || {},\\n      no_logic_o = Object.keys(default_o).filter(k => k !== 'logic').reduce(_flat_obj.bind(null, default_o), {}),\\n      flat_o = Object.keys(logic).reduce(_flat_obj.bind(null, logic), no_logic_o);\\n    return Object.assign(o, {\\n      [l_key]: flat_o\\n    });\\n  }, {});\\n}\\nfunction _flat_obj(o_tobe_flat, o_dest, k) {\\n  return Object.assign(o_dest, {\\n    [k]: o_tobe_flat[k]\\n  });\\n}\\n\\n//# sourceURL=webpack://wplug/./src/index.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/antialiasing/fs_derivatives/index.js\":\n/*!**********************************************************!*\\\n  !*** ./src/plugins/antialiasing/fs_derivatives/index.js ***!\n  \\**********************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"var _config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache;\\n__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _logic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logic */ \\\"./src/plugins/antialiasing/fs_derivatives/logic.js\\\");\\n/* harmony import */ var _config_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.json */ \\\"./src/plugins/antialiasing/fs_derivatives/config.json\\\");\\n/* harmony import */ var _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shaders/vert.glsl */ \\\"./src/plugins/antialiasing/fs_derivatives/shaders/vert.glsl\\\");\\n/* harmony import */ var _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__);\\n/* harmony import */ var _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shaders/frag.glsl */ \\\"./src/plugins/antialiasing/fs_derivatives/shaders/frag.glsl\\\");\\n/* harmony import */ var _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__);\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils */ \\\"./src/plugins/utils.js\\\");\\n\\n\\n\\n\\n\\n\\n/*\\n  fragment-shader-based partial derivatives approach \\n  to implement antialiasing effects. It's basically a fragment-shader-only set of functions\\n  \\n  Took from \\\"Procedural Textures in GLSL\\\" by Stefan Gustavson\\n*/\\n\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Object.assign({\\n  logic: _logic__WEBPACK_IMPORTED_MODULE_0__,\\n  config: _utils__WEBPACK_IMPORTED_MODULE_4__.get_config.bind(null, /*#__PURE__*/ (_config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache || (_config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache = __webpack_require__.t(_config_json__WEBPACK_IMPORTED_MODULE_1__, 2)))),\\n  shaders: {\\n    vert: _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__,\\n    frag: _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__\\n  }\\n}));\\n\\n//# sourceURL=webpack://wplug/./src/plugins/antialiasing/fs_derivatives/index.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/antialiasing/fs_derivatives/logic.js\":\n/*!**********************************************************!*\\\n  !*** ./src/plugins/antialiasing/fs_derivatives/logic.js ***!\n  \\**********************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   cleanup: () => (/* binding */ cleanup),\\n/* harmony export */   draw_loop_callback: () => (/* binding */ draw_loop_callback),\\n/* harmony export */   get_active: () => (/* binding */ get_active),\\n/* harmony export */   get_model: () => (/* binding */ get_model),\\n/* harmony export */   program_init: () => (/* binding */ program_init),\\n/* harmony export */   set_active: () => (/* binding */ set_active)\\n/* harmony export */ });\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ \\\"./src/plugins/utils.js\\\");\\n\\nconst get_model = _get_model;\\nconst program_init = _program_init;\\nconst draw_loop_callback = _draw_loop_callback;\\nconst cleanup = _cleanup;\\nconst {\\n  _get_active,\\n  _set_active\\n} = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.get_active_logic)();\\nconst set_active = _set_active.bind(null, _init);\\nconst get_active = _get_active;\\n\\n///////////////////////////////////////////////////////////\\n///////////////////////////////////////////////////////////\\n\\nfunction _init(scene_config) {\\n  //currently not used\\n  return scene_config;\\n}\\nfunction _get_model(scene_config) {\\n  return {};\\n}\\nfunction _program_init(scene_config) {\\n  return scene_config;\\n}\\nfunction _draw_loop_callback(object_config, scene_config) {}\\nfunction _cleanup(scene_config) {\\n  return scene_config;\\n}\\n\\n//# sourceURL=webpack://wplug/./src/plugins/antialiasing/fs_derivatives/logic.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/antialiasing/index.js\":\n/*!*******************************************!*\\\n  !*** ./src/plugins/antialiasing/index.js ***!\n  \\*******************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _fs_derivatives__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fs_derivatives */ \\\"./src/plugins/antialiasing/fs_derivatives/index.js\\\");\\n/* harmony import */ var _postp_gaussian__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./postp_gaussian */ \\\"./src/plugins/antialiasing/postp_gaussian/index.js\\\");\\n\\n\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\\n  fs_derivatives: _fs_derivatives__WEBPACK_IMPORTED_MODULE_0__,\\n  postp_gaussian: _postp_gaussian__WEBPACK_IMPORTED_MODULE_1__\\n});\\n\\n//# sourceURL=webpack://wplug/./src/plugins/antialiasing/index.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/antialiasing/postp_gaussian/index.js\":\n/*!**********************************************************!*\\\n  !*** ./src/plugins/antialiasing/postp_gaussian/index.js ***!\n  \\**********************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"var _config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache;\\n__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _logic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logic */ \\\"./src/plugins/antialiasing/postp_gaussian/logic.js\\\");\\n/* harmony import */ var _config_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.json */ \\\"./src/plugins/antialiasing/postp_gaussian/config.json\\\");\\n/* harmony import */ var _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shaders/vert.glsl */ \\\"./src/plugins/antialiasing/postp_gaussian/shaders/vert.glsl\\\");\\n/* harmony import */ var _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__);\\n/* harmony import */ var _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shaders/frag.glsl */ \\\"./src/plugins/antialiasing/postp_gaussian/shaders/frag.glsl\\\");\\n/* harmony import */ var _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__);\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils */ \\\"./src/plugins/utils.js\\\");\\n\\n\\n\\n\\n\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Object.assign({\\n  logic: _logic__WEBPACK_IMPORTED_MODULE_0__,\\n  config: _utils__WEBPACK_IMPORTED_MODULE_4__.get_config.bind(null, /*#__PURE__*/ (_config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache || (_config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache = __webpack_require__.t(_config_json__WEBPACK_IMPORTED_MODULE_1__, 2)))),\\n  shaders: {\\n    vert: _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__,\\n    frag: _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__\\n  },\\n  requires: {\\n    postprocessing: {\\n      id: \\\"fbo\\\",\\n      framebuffers_n: 1,\\n      framebuffers_offset: 1,\\n      base_active_texture: 0\\n    }\\n  }\\n}));\\n\\n//# sourceURL=webpack://wplug/./src/plugins/antialiasing/postp_gaussian/index.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/antialiasing/postp_gaussian/logic.js\":\n/*!**********************************************************!*\\\n  !*** ./src/plugins/antialiasing/postp_gaussian/logic.js ***!\n  \\**********************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   cleanup: () => (/* binding */ cleanup),\\n/* harmony export */   draw_loop_callback: () => (/* binding */ draw_loop_callback),\\n/* harmony export */   get_active: () => (/* binding */ get_active),\\n/* harmony export */   get_model: () => (/* binding */ get_model),\\n/* harmony export */   program_init: () => (/* binding */ program_init),\\n/* harmony export */   set_active: () => (/* binding */ set_active)\\n/* harmony export */ });\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ \\\"./src/plugins/utils.js\\\");\\n\\nconst get_model = _get_model;\\nconst program_init = _program_init;\\nconst draw_loop_callback = _draw_loop_callback;\\nconst cleanup = _cleanup;\\nconst {\\n  _get_active,\\n  _set_active\\n} = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.get_active_logic)();\\nconst set_active = _set_active.bind(null, _init);\\nconst get_active = _get_active;\\nfunction _init(scene_config) {\\n  //currently not used\\n  return scene_config;\\n}\\nfunction _get_model(scene_config) {\\n  return {};\\n}\\nfunction _program_init(scene_config) {\\n  return scene_config;\\n}\\nfunction _draw_loop_callback(obj, scene_config) {\\n  return scene_config;\\n}\\nfunction _cleanup(scene_config) {\\n  return scene_config;\\n}\\n\\n//# sourceURL=webpack://wplug/./src/plugins/antialiasing/postp_gaussian/logic.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/base/index.js\":\n/*!***********************************!*\\\n  !*** ./src/plugins/base/index.js ***!\n  \\***********************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _model__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./model */ \\\"./src/plugins/base/model/index.js\\\");\\n\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\\n  model: _model__WEBPACK_IMPORTED_MODULE_0__\\n});\\n\\n//# sourceURL=webpack://wplug/./src/plugins/base/index.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/base/model/index.js\":\n/*!*****************************************!*\\\n  !*** ./src/plugins/base/model/index.js ***!\n  \\*****************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"var _config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache;\\n__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _logic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logic */ \\\"./src/plugins/base/model/logic.js\\\");\\n/* harmony import */ var _config_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.json */ \\\"./src/plugins/base/model/config.json\\\");\\n/* harmony import */ var _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shaders/vert.glsl */ \\\"./src/plugins/base/model/shaders/vert.glsl\\\");\\n/* harmony import */ var _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__);\\n/* harmony import */ var _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shaders/frag.glsl */ \\\"./src/plugins/base/model/shaders/frag.glsl\\\");\\n/* harmony import */ var _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__);\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils */ \\\"./src/plugins/utils.js\\\");\\n\\n\\n\\n\\n\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Object.assign({\\n  logic: _logic__WEBPACK_IMPORTED_MODULE_0__,\\n  config: _utils__WEBPACK_IMPORTED_MODULE_4__.get_config.bind(null, /*#__PURE__*/ (_config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache || (_config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache = __webpack_require__.t(_config_json__WEBPACK_IMPORTED_MODULE_1__, 2)))),\\n  shaders: {\\n    vert: _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__,\\n    frag: _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__\\n  },\\n  is_base: true\\n}));\\n\\n//# sourceURL=webpack://wplug/./src/plugins/base/model/index.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/base/model/logic.js\":\n/*!*****************************************!*\\\n  !*** ./src/plugins/base/model/logic.js ***!\n  \\*****************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   cleanup: () => (/* binding */ cleanup),\\n/* harmony export */   draw_loop_callback: () => (/* binding */ draw_loop_callback),\\n/* harmony export */   get_active: () => (/* binding */ get_active),\\n/* harmony export */   get_model: () => (/* binding */ get_model),\\n/* harmony export */   program_init: () => (/* binding */ program_init),\\n/* harmony export */   set_active: () => (/* binding */ set_active)\\n/* harmony export */ });\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ \\\"./src/plugins/utils.js\\\");\\n\\nconst get_model = _get_model;\\nconst program_init = _program_init;\\nconst draw_loop_callback = _draw_loop_callback;\\nconst cleanup = _cleanup;\\nconst {\\n  _get_active,\\n  _set_active\\n} = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.get_active_logic)();\\nconst set_active = _set_active.bind(null, _init);\\nconst get_active = _get_active;\\nfunction _init(scene_config) {\\n  //currently not used\\n  return scene_config;\\n}\\nfunction _get_model(scene_config) {\\n  return {};\\n}\\nfunction _program_init(scene_config) {\\n  return scene_config;\\n}\\nfunction _draw_loop_callback(obj, scene_config) {\\n  return scene_config;\\n}\\nfunction _cleanup(scene_config) {\\n  return scene_config;\\n}\\n\\n//# sourceURL=webpack://wplug/./src/plugins/base/model/logic.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/geometry/index.js\":\n/*!***************************************!*\\\n  !*** ./src/plugins/geometry/index.js ***!\n  \\***************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _quad__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./quad */ \\\"./src/plugins/geometry/quad/index.js\\\");\\n\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\\n  quad: _quad__WEBPACK_IMPORTED_MODULE_0__\\n});\\n\\n//# sourceURL=webpack://wplug/./src/plugins/geometry/index.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/geometry/quad/config.js\":\n/*!*********************************************!*\\\n  !*** ./src/plugins/geometry/quad/config.js ***!\n  \\*********************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   config_getter: () => (/* binding */ config_getter)\\n/* harmony export */ });\\nfunction config_getter(shad_data) {\\n  //change the stride to all attributes to include the texcood attribute\\n  Object.keys((shad_data || {}).attributes || {}).forEach(sd_key => {\\n    shad_data.attributes[sd_key].opts.stride = 20;\\n  });\\n  return {\\n    \\\"attributes\\\": {\\n      \\\"a_texcoord\\\": {\\n        \\\"name\\\": \\\"a_texcoord\\\",\\n        \\\"opts\\\": {\\n          \\\"size\\\": 2,\\n          \\\"data_type\\\": \\\"UNSIGNED_SHORT\\\",\\n          \\\"normalized\\\": true,\\n          \\\"stride\\\": 20,\\n          \\\"offset\\\": 16\\n        }\\n      }\\n    },\\n    \\\"uniforms\\\": {}\\n  };\\n}\\n\\n//# sourceURL=webpack://wplug/./src/plugins/geometry/quad/config.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/geometry/quad/index.js\":\n/*!********************************************!*\\\n  !*** ./src/plugins/geometry/quad/index.js ***!\n  \\********************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _logic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logic */ \\\"./src/plugins/geometry/quad/logic.js\\\");\\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config */ \\\"./src/plugins/geometry/quad/config.js\\\");\\n/* harmony import */ var _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shaders/vert.glsl */ \\\"./src/plugins/geometry/quad/shaders/vert.glsl\\\");\\n/* harmony import */ var _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__);\\n/* harmony import */ var _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shaders/frag.glsl */ \\\"./src/plugins/geometry/quad/shaders/frag.glsl\\\");\\n/* harmony import */ var _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__);\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils */ \\\"./src/plugins/utils.js\\\");\\n\\n\\n\\n\\n\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Object.assign({\\n  logic: _logic__WEBPACK_IMPORTED_MODULE_0__,\\n  config: _utils__WEBPACK_IMPORTED_MODULE_4__.get_config.bind(null, _config__WEBPACK_IMPORTED_MODULE_1__.config_getter),\\n  shaders: {\\n    vert: _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__,\\n    frag: _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__\\n  }\\n}));\\n\\n//# sourceURL=webpack://wplug/./src/plugins/geometry/quad/index.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/geometry/quad/logic.js\":\n/*!********************************************!*\\\n  !*** ./src/plugins/geometry/quad/logic.js ***!\n  \\********************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   add_data_to_buffer: () => (/* binding */ add_data_to_buffer),\\n/* harmony export */   cleanup: () => (/* binding */ cleanup),\\n/* harmony export */   draw_loop_callback: () => (/* binding */ draw_loop_callback),\\n/* harmony export */   get_active: () => (/* binding */ get_active),\\n/* harmony export */   get_model: () => (/* binding */ get_model),\\n/* harmony export */   program_init: () => (/* binding */ program_init),\\n/* harmony export */   set_active: () => (/* binding */ set_active)\\n/* harmony export */ });\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ \\\"./src/plugins/utils.js\\\");\\n\\nconst get_model = _get_model;\\nconst program_init = _program_init;\\nconst draw_loop_callback = _draw_loop_callback;\\nconst cleanup = _cleanup;\\nconst {\\n  _get_active,\\n  _set_active\\n} = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.get_active_logic)();\\nconst set_active = _set_active.bind(null, _init);\\nconst get_active = _get_active;\\nconst add_data_to_buffer = _add_data_to_buffer;\\nfunction _init(scene_config) {\\n  //generate the coordinates\\n  const {\\n    scene_desc,\\n    objects_desc,\\n    canvas\\n  } = scene_config;\\n  const {\\n    geometry,\\n    objects\\n  } = scene_desc;\\n  const {\\n    fullscreen,\\n    width,\\n    height\\n  } = geometry || {};\\n  Object.keys(objects).forEach(obj_id => {\\n    const obj_conf = objects[obj_id];\\n    if (!obj_conf.quad) return;\\n    const {\\n        quad\\n      } = obj_conf,\\n      obj = objects_desc.find(o => o.id === obj_id);\\n    let w = quad.fullscreen || fullscreen ? canvas.width : quad.width || width,\\n      h = quad.fullscreen || fullscreen ? canvas.height : quad.height || height,\\n      aspect = h / w,\\n      half_asp = 0.5 * aspect;\\n    obj.coordinates_def = obj.coordinates_def || [[-0.5, -half_asp, 0.5], [0.5, -half_asp, 0.5], [-0.5, half_asp, 0.5], [0.5, half_asp, 0.5]];\\n    obj.indices = obj.indices || [0, 1, 2, 2, 1, 3];\\n  });\\n  return scene_config;\\n}\\nfunction _add_data_to_buffer(data_conf) {\\n  const {\\n      coordinate_index,\\n      current_bytes_pos,\\n      buffer,\\n      littleEndian\\n    } = data_conf,\\n    data_map = [[0, 0], [1, 0], [0, 1], [1, 1]],\\n    texcoord = data_map[coordinate_index] || [0, 0];\\n  buffer.setUint16(current_bytes_pos + Uint16Array.BYTES_PER_ELEMENT * 0, texcoord[0] * 0xffff, littleEndian);\\n  buffer.setUint16(current_bytes_pos + Uint16Array.BYTES_PER_ELEMENT * 1, texcoord[1] * 0xffff, littleEndian);\\n  return data_conf;\\n}\\nfunction _get_model(scene_config) {\\n  return {};\\n}\\nfunction _program_init(scene_config) {\\n  return scene_config;\\n}\\nfunction _draw_loop_callback(obj, scene_config) {\\n  return scene_config;\\n}\\nfunction _cleanup(scene_config) {\\n  return scene_config;\\n}\\n\\n//# sourceURL=webpack://wplug/./src/plugins/geometry/quad/logic.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/index.js\":\n/*!******************************!*\\\n  !*** ./src/plugins/index.js ***!\n  \\******************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _lighting__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./lighting */ \\\"./src/plugins/lighting/index.js\\\");\\n/* harmony import */ var _antialiasing__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./antialiasing */ \\\"./src/plugins/antialiasing/index.js\\\");\\n/* harmony import */ var _postprocessing__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./postprocessing */ \\\"./src/plugins/postprocessing/index.js\\\");\\n/* harmony import */ var _geometry__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./geometry */ \\\"./src/plugins/geometry/index.js\\\");\\n/* harmony import */ var _base__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./base */ \\\"./src/plugins/base/index.js\\\");\\n\\n\\n\\n\\n\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\\n  lighting: _lighting__WEBPACK_IMPORTED_MODULE_0__,\\n  antialiasing: _antialiasing__WEBPACK_IMPORTED_MODULE_1__,\\n  postprocessing: _postprocessing__WEBPACK_IMPORTED_MODULE_2__,\\n  geometry: _geometry__WEBPACK_IMPORTED_MODULE_3__,\\n  base: _base__WEBPACK_IMPORTED_MODULE_4__\\n});\\n\\n//# sourceURL=webpack://wplug/./src/plugins/index.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/lighting/blinn_phong/index.js\":\n/*!***************************************************!*\\\n  !*** ./src/plugins/lighting/blinn_phong/index.js ***!\n  \\***************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"var _config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache;\\n__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _logic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logic */ \\\"./src/plugins/lighting/blinn_phong/logic.js\\\");\\n/* harmony import */ var _config_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.json */ \\\"./src/plugins/lighting/blinn_phong/config.json\\\");\\n/* harmony import */ var _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shaders/vert.glsl */ \\\"./src/plugins/lighting/blinn_phong/shaders/vert.glsl\\\");\\n/* harmony import */ var _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__);\\n/* harmony import */ var _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shaders/frag.glsl */ \\\"./src/plugins/lighting/blinn_phong/shaders/frag.glsl\\\");\\n/* harmony import */ var _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__);\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils */ \\\"./src/plugins/utils.js\\\");\\n\\n\\n\\n\\n\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Object.assign({\\n  logic: _logic__WEBPACK_IMPORTED_MODULE_0__,\\n  config: _utils__WEBPACK_IMPORTED_MODULE_4__.get_config.bind(null, /*#__PURE__*/ (_config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache || (_config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache = __webpack_require__.t(_config_json__WEBPACK_IMPORTED_MODULE_1__, 2)))),\\n  shaders: {\\n    vert: _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__,\\n    frag: _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__\\n  }\\n}));\\n\\n//# sourceURL=webpack://wplug/./src/plugins/lighting/blinn_phong/index.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/lighting/blinn_phong/logic.js\":\n/*!***************************************************!*\\\n  !*** ./src/plugins/lighting/blinn_phong/logic.js ***!\n  \\***************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   cleanup: () => (/* binding */ cleanup),\\n/* harmony export */   draw_loop_callback: () => (/* binding */ draw_loop_callback),\\n/* harmony export */   get_active: () => (/* binding */ get_active),\\n/* harmony export */   get_model: () => (/* binding */ get_model),\\n/* harmony export */   program_init: () => (/* binding */ program_init),\\n/* harmony export */   set_active: () => (/* binding */ set_active)\\n/* harmony export */ });\\n/* harmony import */ var wbase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wbase */ \\\"./node_modules/wbase/dist/wbase.js\\\");\\n/* harmony import */ var wbase__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(wbase__WEBPACK_IMPORTED_MODULE_0__);\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../utils */ \\\"./src/plugins/utils.js\\\");\\n\\n\\nconst get_model = _get_model;\\nconst program_init = _program_init;\\nconst draw_loop_callback = _draw_loop_callback;\\nconst cleanup = _cleanup;\\nconst {\\n  _get_active,\\n  _set_active\\n} = (0,_utils__WEBPACK_IMPORTED_MODULE_1__.get_active_logic)();\\nconst set_active = _set_active.bind(null, _init);\\nconst get_active = _get_active;\\n\\n///////////////////////////////////////////////////////////\\n///////////////////////////////////////////////////////////\\n\\nfunction _init(scene_config) {\\n  //currently not used\\n  return scene_config;\\n}\\nfunction _get_model(scene_config) {\\n  const {\\n    scene_desc\\n  } = scene_config;\\n  const {\\n    lighting\\n  } = scene_desc;\\n  const lid = (lighting || []).findIndex(l => l.id === 'blinn_phong');\\n  if (lid === -1) return {};\\n  lighting[lid].light_positions = lighting[lid].lights.reduce((poss, l) => poss.concat(l.position), []);\\n  lighting[lid].light_colors = lighting[lid].lights.reduce((cols, l) => cols.concat(l.color), []);\\n  lighting[lid].light_intensities = lighting[lid].lights.reduce((ints, l) => ints.concat(l.intensity), []);\\n  lighting[lid].light_specular_exp = lighting[lid].lights.reduce((exps, l) => exps.concat(l.specular_exp), []);\\n  lighting[lid].number_of_lights = lighting[lid].lights.length;\\n  return {\\n    lighting\\n  };\\n}\\nfunction _program_init(scene_config) {\\n  return scene_config;\\n}\\nfunction _draw_loop_callback(object_config, scene_config) {\\n  Object.assign(scene_config.scene_desc, _get_model(scene_config)); //update the lighting model to allow lighting changes during time\\n  const {\\n    gl,\\n    scene_desc\\n  } = scene_config;\\n  const {\\n    lighting\\n  } = scene_desc;\\n  const lighting_conf = (lighting || []).find(l => l.id === 'blinn_phong');\\n  const {\\n    object_program,\\n    material\\n  } = object_config;\\n  const {\\n    ka,\\n    kd,\\n    ks\\n  } = material;\\n  const {\\n    ambient,\\n    number_of_lights,\\n    light_positions,\\n    light_colors,\\n    light_intensities,\\n    light_specular_exp\\n  } = lighting_conf;\\n  (0,wbase__WEBPACK_IMPORTED_MODULE_0__.set_uniforms)(gl, {\\n    u_ka: ka,\\n    u_kd: kd,\\n    u_ks: ks,\\n    u_nlights: number_of_lights,\\n    u_ambient_color: ambient.color,\\n    u_ambient_intensity: ambient.intensity,\\n    u_light_positions: light_positions,\\n    u_light_colors: light_colors,\\n    u_light_intensities: light_intensities,\\n    u_light_specular_exp: light_specular_exp\\n  }, object_program);\\n}\\nfunction _cleanup(scene_config) {\\n  return scene_config;\\n}\\n\\n//# sourceURL=webpack://wplug/./src/plugins/lighting/blinn_phong/logic.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/lighting/index.js\":\n/*!***************************************!*\\\n  !*** ./src/plugins/lighting/index.js ***!\n  \\***************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _blinn_phong__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./blinn_phong */ \\\"./src/plugins/lighting/blinn_phong/index.js\\\");\\n\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\\n  blinn_phong: _blinn_phong__WEBPACK_IMPORTED_MODULE_0__\\n});\\n\\n//# sourceURL=webpack://wplug/./src/plugins/lighting/index.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/postprocessing/fbo/index.js\":\n/*!*************************************************!*\\\n  !*** ./src/plugins/postprocessing/fbo/index.js ***!\n  \\*************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"var _config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache;\\n__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _logic__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./logic */ \\\"./src/plugins/postprocessing/fbo/logic.js\\\");\\n/* harmony import */ var _config_json__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config.json */ \\\"./src/plugins/postprocessing/fbo/config.json\\\");\\n/* harmony import */ var _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./shaders/vert.glsl */ \\\"./src/plugins/postprocessing/fbo/shaders/vert.glsl\\\");\\n/* harmony import */ var _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__);\\n/* harmony import */ var _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./shaders/frag.glsl */ \\\"./src/plugins/postprocessing/fbo/shaders/frag.glsl\\\");\\n/* harmony import */ var _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__);\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../utils */ \\\"./src/plugins/utils.js\\\");\\n\\n\\n\\n\\n\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Object.assign({\\n  logic: _logic__WEBPACK_IMPORTED_MODULE_0__,\\n  config: _utils__WEBPACK_IMPORTED_MODULE_4__.get_config.bind(null, /*#__PURE__*/ (_config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache || (_config_json__WEBPACK_IMPORTED_MODULE_1___namespace_cache = __webpack_require__.t(_config_json__WEBPACK_IMPORTED_MODULE_1__, 2)))),\\n  shaders: {\\n    vert: _shaders_vert_glsl__WEBPACK_IMPORTED_MODULE_2__,\\n    frag: _shaders_frag_glsl__WEBPACK_IMPORTED_MODULE_3__\\n  }\\n}));\\n\\n//# sourceURL=webpack://wplug/./src/plugins/postprocessing/fbo/index.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/postprocessing/fbo/logic.js\":\n/*!*************************************************!*\\\n  !*** ./src/plugins/postprocessing/fbo/logic.js ***!\n  \\*************************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   cleanup: () => (/* binding */ cleanup),\\n/* harmony export */   draw_loop_callback: () => (/* binding */ draw_loop_callback),\\n/* harmony export */   get_active: () => (/* binding */ get_active),\\n/* harmony export */   get_model: () => (/* binding */ get_model),\\n/* harmony export */   program_init: () => (/* binding */ program_init),\\n/* harmony export */   set_active: () => (/* binding */ set_active)\\n/* harmony export */ });\\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../utils */ \\\"./src/plugins/utils.js\\\");\\n/* harmony import */ var wbase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! wbase */ \\\"./node_modules/wbase/dist/wbase.js\\\");\\n/* harmony import */ var wbase__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(wbase__WEBPACK_IMPORTED_MODULE_1__);\\n\\n\\nconst get_model = _get_model;\\nconst program_init = _program_init;\\nconst draw_loop_callback = _draw_loop_callback;\\nconst cleanup = _cleanup;\\nconst {\\n  _get_active,\\n  _set_active\\n} = (0,_utils__WEBPACK_IMPORTED_MODULE_0__.get_active_logic)();\\nconst set_active = _set_active.bind(null, _init);\\nconst get_active = _get_active;\\n\\n///////////////////////////////////////////////////////////\\n///////////////////////////////////////////////////////////\\n\\nfunction _init(scene_config) {\\n  //currently not used\\n  return scene_config;\\n}\\nfunction _get_model(scene_config) {\\n  return {};\\n}\\nfunction _program_init(scene_config) {\\n  const\\n    //////////////////////////\\n    {\\n      gl,\\n      canvas,\\n      objects_to_draw,\\n      scene_desc\\n    } = scene_config,\\n    {\\n      postprocessing\\n    } = scene_desc,\\n    fbo_conf = (postprocessing || []).find(cfg => cfg.id === 'fbo'),\\n    {\\n      base_active_texture\\n    } = fbo_conf;\\n  let texture_unit = gl.TEXTURE0 + (base_active_texture !== undefined ? base_active_texture : 0);\\n  gl.activeTexture(texture_unit);\\n  objects_to_draw.forEach(otd => {\\n    const\\n    ///////////////////////\\n    {\\n      object_program,\\n      fbo\\n    } = otd;\\n    object_program.fbo_opts = Object.assign({}, fbo_conf, fbo || {});\\n    let opts = object_program.fbo_opts;\\n\\n    //function _init_program_fbos(current_program, gl, opts)\\n    otd.object_program = (0,wbase__WEBPACK_IMPORTED_MODULE_1__.init_program_fbos)(object_program, gl, Object.assign({}, opts, {\\n      canvas\\n    }));\\n  });\\n  return scene_config;\\n}\\nfunction _draw_loop_callback(object_config, scene_config) {\\n  const\\n    ////////////////////////\\n    {\\n      gl,\\n      canvas,\\n      draw_fn\\n    } = scene_config,\\n    {\\n      object_program\\n    } = object_config,\\n    {\\n      fbo_opts,\\n      base_texture\\n    } = object_program,\\n    {\\n      has_framebuffer,\\n      framebuffers_n,\\n      framebuffers_offset\\n    } = fbo_opts || {};\\n  if (has_framebuffer === false) return scene_config;\\n  if (base_texture) {\\n    gl.bindTexture(gl.TEXTURE_2D, base_texture);\\n  }\\n  (0,wbase__WEBPACK_IMPORTED_MODULE_1__.set_uniforms)(gl, {\\n    u_on_fbo: 1,\\n    u_tex: 0\\n  }, object_program);\\n  for (var ii = framebuffers_offset; ii < framebuffers_n + framebuffers_offset; ++ii) {\\n    // Setup to draw into one of the framebuffers.\\n    wbase__WEBPACK_IMPORTED_MODULE_1__.texture_data.set_framebuffer(gl, wbase__WEBPACK_IMPORTED_MODULE_1__.texture_data.get_fbo(object_program, ii), canvas.width, canvas.height);\\n    draw_fn(object_config, scene_config);\\n\\n    // for the next draw, use as input texture (associated to gl.TEXTURE0) the texture we just rendered to.\\n    gl.bindTexture(gl.TEXTURE_2D, wbase__WEBPACK_IMPORTED_MODULE_1__.texture_data.get_fbo_texture(object_program, ii));\\n  }\\n  wbase__WEBPACK_IMPORTED_MODULE_1__.texture_data.set_framebuffer(gl, null, canvas.width, canvas.height);\\n  (0,wbase__WEBPACK_IMPORTED_MODULE_1__.set_uniforms)(gl, {\\n    u_on_fbo: -1\\n  }, object_program);\\n  return scene_config;\\n}\\nfunction _cleanup(scene_config) {\\n  const\\n  ////////////////////////\\n  {\\n    gl,\\n    objects_to_draw\\n  } = scene_config;\\n  objects_to_draw.forEach(object_config => {\\n    const {\\n        object_program\\n      } = object_config,\\n      {\\n        fbo_opts\\n      } = object_program,\\n      {\\n        framebuffers_n,\\n        framebuffers_offset\\n      } = fbo_opts;\\n    for (var ii = framebuffers_offset; ii < framebuffers_n + framebuffers_offset; ++ii) {\\n      gl.deleteTexture(wbase__WEBPACK_IMPORTED_MODULE_1__.texture_data.get_fbo_texture(object_program, ii));\\n      gl.deleteFramebuffer(wbase__WEBPACK_IMPORTED_MODULE_1__.texture_data.get_fbo(object_program, ii));\\n    }\\n    object_program.fbo_data = null;\\n  });\\n  return scene_config;\\n}\\n\\n//# sourceURL=webpack://wplug/./src/plugins/postprocessing/fbo/logic.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/postprocessing/index.js\":\n/*!*********************************************!*\\\n  !*** ./src/plugins/postprocessing/index.js ***!\n  \\*********************************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   \\\"default\\\": () => (__WEBPACK_DEFAULT_EXPORT__)\\n/* harmony export */ });\\n/* harmony import */ var _fbo__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./fbo */ \\\"./src/plugins/postprocessing/fbo/index.js\\\");\\n\\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\\n  fbo: _fbo__WEBPACK_IMPORTED_MODULE_0__\\n});\\n\\n//# sourceURL=webpack://wplug/./src/plugins/postprocessing/index.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/utils.js\":\n/*!******************************!*\\\n  !*** ./src/plugins/utils.js ***!\n  \\******************************/\n/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {\n\n\"use strict\";\neval(\"__webpack_require__.r(__webpack_exports__);\\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\\n/* harmony export */   get_active_logic: () => (/* binding */ get_active_logic),\\n/* harmony export */   get_config: () => (/* binding */ get_config)\\n/* harmony export */ });\\nconst get_active_logic = _get_active_logic;\\nconst get_config = _get_config;\\nfunction _get_active_logic() {\\n  return (() => {\\n    let __ACTIVE = false;\\n    return {\\n      _set_active,\\n      _get_active\\n    };\\n    function _set_active(_init, active, config) {\\n      __ACTIVE = !!active;\\n      return __ACTIVE ? _init(config) : config;\\n    }\\n    function _get_active() {\\n      return __ACTIVE;\\n    }\\n  })();\\n}\\nfunction _get_config(cfg_getter_or_json, opts) {\\n  const json = typeof cfg_getter_or_json === 'function' ? cfg_getter_or_json(opts) : cfg_getter_or_json.default || cfg_getter_or_json;\\n  return JSON.parse(JSON.stringify(json));\\n}\\n\\n//# sourceURL=webpack://wplug/./src/plugins/utils.js?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/antialiasing/fs_derivatives/shaders/frag.glsl\":\n/*!*******************************************************************!*\\\n  !*** ./src/plugins/antialiasing/fs_derivatives/shaders/frag.glsl ***!\n  \\*******************************************************************/\n/***/ ((module) => {\n\neval(\"module.exports = \\\"/* <antialiasing.fs_derivatives.frag> */\\\\n\\\\n// ' threshold ' is constant , ' value ' is smoothly varying\\\\nfloat aastep(float threshold , float value) {\\\\n    float afwidth = 0.7 * length(vec2(dFdx(value), dFdy(value)));\\\\n    // GLSL ' s fwidth ( value ) is abs ( dFdx ( value ) ) + abs ( dFdy ( value ) )\\\\n    return smoothstep(threshold - afwidth , threshold + afwidth , value);\\\\n}\\\\n\\\\nvec2 aastep2d(float threshold , vec2 value) {\\\\n    vec2 afwidth = 0.7 * fwidth(value);\\\\n    return smoothstep(threshold - afwidth , threshold + afwidth , value);\\\\n}\\\\n\\\\n//value in this case is typically a color\\\\nvec3 aastep3d(float threshold , vec3 value) {\\\\n    vec3 afwidth = 0.7 * fwidth(value);\\\\n    return smoothstep(threshold - afwidth , threshold + afwidth , value);\\\\n}\\\\n\\\\n/* </antialiasing.fs_derivatives.frag> */\\\"\\n\\n//# sourceURL=webpack://wplug/./src/plugins/antialiasing/fs_derivatives/shaders/frag.glsl?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/antialiasing/fs_derivatives/shaders/vert.glsl\":\n/*!*******************************************************************!*\\\n  !*** ./src/plugins/antialiasing/fs_derivatives/shaders/vert.glsl ***!\n  \\*******************************************************************/\n/***/ ((module) => {\n\neval(\"module.exports = \\\"/* <antialiasing.fs_derivatives.vert> */\\\\n\\\\nvoid fs_derivatives_vert() {}\\\\n\\\\n/* </antialiasing.fs_derivatives.vert> */\\\"\\n\\n//# sourceURL=webpack://wplug/./src/plugins/antialiasing/fs_derivatives/shaders/vert.glsl?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/antialiasing/postp_gaussian/shaders/frag.glsl\":\n/*!*******************************************************************!*\\\n  !*** ./src/plugins/antialiasing/postp_gaussian/shaders/frag.glsl ***!\n  \\*******************************************************************/\n/***/ ((module) => {\n\neval(\"module.exports = \\\"/* <antialiasing.postp_gaussian.frag> */\\\\n\\\\n//from postprocessing.fbo we expect:\\\\n//uniform int u_on_fbo;\\\\n//uniform sampler2D u_tex;\\\\n\\\\nvec3 postp_gaussian_frag(vec3 base_color, vec2 texcoord, float resolution_dim, float divider) {\\\\n    vec3 col = base_color;\\\\n    \\\\n    float div = divider == 0. ? 16.0 : divider;\\\\n    float gaussian_kernel[9] = float[9](\\\\n        1.0 / div, 2.0 / div, 1.0 / div,\\\\n        2.0 / div, 4.0 / div, 2.0 / div,\\\\n        1.0 / div, 2.0 / div, 1.0 / div\\\\n    );\\\\n    \\\\n    float offset = 1.0 / max(resolution_dim, 0.01);\\\\n    vec2 offsets[9] = vec2[9](\\\\n        vec2(-offset, offset), // top-left\\\\n        vec2(0.0, offset), // top-center\\\\n        vec2(offset, offset), // top-right\\\\n        vec2(-offset, 0.0), // center-left\\\\n        vec2(0.0, 0.0), // center-center\\\\n        vec2(offset, 0.0), // center-right\\\\n        vec2(-offset, - offset), // bottom-left\\\\n        vec2(0.0, - offset), // bottom-center\\\\n        vec2(offset, - offset)// bottom-right\\\\n    );\\\\n    \\\\n    if (float(u_on_fbo) != 1.) {\\\\n        //we'll blur\\\\n        for(int i = 0; i < 9; i ++ ) {\\\\n            vec3 sample_tex = vec3(texture(u_tex, texcoord + offsets[i]));\\\\n            col += sample_tex * gaussian_kernel[i];\\\\n        }\\\\n    }\\\\n    return col;\\\\n}\\\\n\\\\n/* </antialiasing.postp_gaussian.frag> */\\\"\\n\\n//# sourceURL=webpack://wplug/./src/plugins/antialiasing/postp_gaussian/shaders/frag.glsl?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/antialiasing/postp_gaussian/shaders/vert.glsl\":\n/*!*******************************************************************!*\\\n  !*** ./src/plugins/antialiasing/postp_gaussian/shaders/vert.glsl ***!\n  \\*******************************************************************/\n/***/ ((module) => {\n\neval(\"module.exports = \\\"/* <antialiasing.postp_gaussian.vert> */\\\\n\\\\nvoid postp_gaussian_vert() {}\\\\n\\\\n/* </antialiasing.postp_gaussian.vert> */\\\"\\n\\n//# sourceURL=webpack://wplug/./src/plugins/antialiasing/postp_gaussian/shaders/vert.glsl?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/base/model/shaders/frag.glsl\":\n/*!**************************************************!*\\\n  !*** ./src/plugins/base/model/shaders/frag.glsl ***!\n  \\**************************************************/\n/***/ ((module) => {\n\neval(\"module.exports = \\\"/* <base.model.frag> */\\\\n\\\\n//Base-config Uniform Buffer Object\\\\nlayout(std140)uniform base_model_UBO {\\\\n    mat4 u_model;\\\\n    mat4 u_view;\\\\n    mat4 u_projection;\\\\n    float u_time;\\\\n    vec2 u_resolution;\\\\n    vec2 u_mmin_resolution;\\\\n    vec2 u_mmax_resolution;\\\\n    int u_should_remap_resolution;\\\\n};\\\\n\\\\nvec2 remap_resolution_in_01(vec2 fragCoord) {\\\\n    vec2 mp = fragCoord;\\\\n    if (u_should_remap_resolution == 1) {\\\\n        vec2 fc = fragCoord;\\\\n        vec2 c = u_mmin_resolution;\\\\n        vec2 d = u_mmax_resolution;\\\\n        \\\\n        fc = fc - c;        //from fc in [c, d] to ==> fc in [0, d - c]\\\\n        fc = fc / (d - c);  //from fc in [0, d - c] to ==> fc in [0, 1]\\\\n        mp = fc;\\\\n    }\\\\n    \\\\n    return mp;\\\\n}\\\\n\\\\nvec2 remap_resolution(vec2 fragCoord) {\\\\n    vec2 mp = fragCoord;\\\\n    if (u_should_remap_resolution == 1) {\\\\n        /*\\\\n        * hypothesis: fragCoord.xy in [[0, 0], [u_resolution.x, u_resolution.y]]\\\\n        * we want to map it in [[u_mmin_resolution.x, u_mmin_resolution.y], [u_max_resolution.x, u_mmax_resolution.y]]\\\\n        *\\\\n        * algorithm:\\\\n        * x in [a, b] ==> we want to find x' s.t. x' in [c, d]\\\\n        * ==> x - a                                 //in [0, b - a]\\\\n        * ==> (x - a) / (b - a)                     //in [0, 1]\\\\n        * ==> ((x - a) * (d - c)) / (b - a)         //in [0, (d - c)]\\\\n        * ==> c + (((x - a) * (d - c)) / (b - a))   //in [c, d]\\\\n        */\\\\n        vec2 fc = fragCoord;\\\\n        vec2 a = vec2(0.0);\\\\n        vec2 b = u_resolution;\\\\n        vec2 c = u_mmin_resolution;\\\\n        vec2 d = u_mmax_resolution;\\\\n        \\\\n        fc = fc - a;\\\\n        fc = fc / (b - a);\\\\n        fc = fc * (d - c);\\\\n        fc = fc + c;\\\\n        mp = fc;\\\\n    }\\\\n    \\\\n    return mp;\\\\n}\\\\n/* <//base.model.frag> */\\\"\\n\\n//# sourceURL=webpack://wplug/./src/plugins/base/model/shaders/frag.glsl?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/base/model/shaders/vert.glsl\":\n/*!**************************************************!*\\\n  !*** ./src/plugins/base/model/shaders/vert.glsl ***!\n  \\**************************************************/\n/***/ ((module) => {\n\neval(\"module.exports = \\\"/* <base.model.vert> */\\\\n\\\\n//Base-config Uniform Buffer Object\\\\nlayout(std140)uniform base_model_UBO {\\\\n    mat4 u_model;\\\\n    mat4 u_view;\\\\n    mat4 u_projection;\\\\n    float u_time;\\\\n    vec2 u_resolution;\\\\n    vec2 u_mmin_resolution;\\\\n    vec2 u_mmax_resolution;\\\\n    int u_should_remap_resolution;\\\\n};\\\\n\\\\nin vec3 a_position;\\\\nin vec3 a_normal;\\\\n\\\\nout vec4 normal;\\\\n\\\\n/* <//base.model.vert> */\\\"\\n\\n//# sourceURL=webpack://wplug/./src/plugins/base/model/shaders/vert.glsl?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/geometry/quad/shaders/frag.glsl\":\n/*!*****************************************************!*\\\n  !*** ./src/plugins/geometry/quad/shaders/frag.glsl ***!\n  \\*****************************************************/\n/***/ ((module) => {\n\neval(\"module.exports = \\\"/* <geometry.quad.frag> */\\\\n\\\\nin vec2 texcoord;\\\\n\\\\nvoid geometry_quad_frag() {}\\\\n\\\\n/* <//geometry.quad.frag> */\\\"\\n\\n//# sourceURL=webpack://wplug/./src/plugins/geometry/quad/shaders/frag.glsl?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/geometry/quad/shaders/vert.glsl\":\n/*!*****************************************************!*\\\n  !*** ./src/plugins/geometry/quad/shaders/vert.glsl ***!\n  \\*****************************************************/\n/***/ ((module) => {\n\neval(\"module.exports = \\\"/* <geometry.quad.vert> */\\\\n\\\\nin vec2 a_texcoord;\\\\nout vec2 texcoord;\\\\n\\\\nvoid geometry_quad_vert() {\\\\n    texcoord = a_texcoord;\\\\n}\\\\n\\\\n/* <//geometry.quad.vert> */\\\"\\n\\n//# sourceURL=webpack://wplug/./src/plugins/geometry/quad/shaders/vert.glsl?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/lighting/blinn_phong/shaders/frag.glsl\":\n/*!************************************************************!*\\\n  !*** ./src/plugins/lighting/blinn_phong/shaders/frag.glsl ***!\n  \\************************************************************/\n/***/ ((module) => {\n\neval(\"module.exports = \\\"/* <lighting.blinn_phong.frag> */\\\\n\\\\n//max number of allowed lights\\\\nconst int MAX_LIGHTS_N = 8;\\\\n\\\\nlayout (std140) uniform lighting_blinn_phong_UBO {\\\\n    //material for the object\\\\n    float u_ka;\\\\n    float u_kd;\\\\n    float u_ks;\\\\n    \\\\n    vec3 u_ambient_color;\\\\n    float u_ambient_intensity;\\\\n    \\\\n    int u_nlights;\\\\n    \\\\n    float u_light_intensities[MAX_LIGHTS_N];\\\\n    float u_light_specular_exp[MAX_LIGHTS_N];\\\\n    vec3 u_light_positions[MAX_LIGHTS_N];\\\\n    vec3 u_light_colors[MAX_LIGHTS_N];\\\\n};\\\\n\\\\nin vec4 normal;\\\\nin vec3 light_dirs[MAX_LIGHTS_N];\\\\nin vec3 light_half_vects[MAX_LIGHTS_N];\\\\n\\\\nvec3 compute_lighting_frag(vec3 start_color) {\\\\n    vec3 color = start_color;\\\\n    vec3 n = normalize(normal.xyz);\\\\n    \\\\n    color += u_ka * u_ambient_color;\\\\n    \\\\n    for(int i = 0; i < int(u_nlights); i ++ ) {\\\\n        vec3 l = normalize(light_dirs[i]);\\\\n        vec3 h = normalize(light_half_vects[i]);\\\\n        float I = u_light_intensities[i];\\\\n        vec3 Lc = u_light_colors[i];\\\\n        \\\\n        color += (\\\\n            (u_kd * I*max(0.0, dot(n, l)) * Lc) +\\\\n            (u_ks * I*pow(max(0.0, dot(n, h)), u_light_specular_exp[i]) * Lc)\\\\n        );\\\\n    }\\\\n    \\\\n    return color;\\\\n}\\\\n\\\\n/* </lighting.blinn_phong.frag> */\\\"\\n\\n//# sourceURL=webpack://wplug/./src/plugins/lighting/blinn_phong/shaders/frag.glsl?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/lighting/blinn_phong/shaders/vert.glsl\":\n/*!************************************************************!*\\\n  !*** ./src/plugins/lighting/blinn_phong/shaders/vert.glsl ***!\n  \\************************************************************/\n/***/ ((module) => {\n\neval(\"module.exports = \\\"/* <lighting.blinn_phong.vert> */\\\\n\\\\n//we'll use as inspiration the approach described here\\\\n//https://stackoverflow.com/a/62630376\\\\n\\\\nconst int MAX_LIGHTS_N = 8;\\\\n\\\\nlayout (std140) uniform lighting_blinn_phong_UBO {\\\\n    //material for the object\\\\n    float u_ka;\\\\n    float u_kd;\\\\n    float u_ks;\\\\n    \\\\n    vec3 u_ambient_color;\\\\n    float u_ambient_intensity;\\\\n    \\\\n    int u_nlights;\\\\n    \\\\n    float u_light_intensities[MAX_LIGHTS_N];\\\\n    float u_light_specular_exp[MAX_LIGHTS_N];\\\\n    vec3 u_light_positions[MAX_LIGHTS_N];\\\\n    vec3 u_light_colors[MAX_LIGHTS_N];\\\\n};\\\\n\\\\nout vec3 light_dirs[MAX_LIGHTS_N];\\\\nout vec3 light_half_vects[MAX_LIGHTS_N];\\\\n\\\\nint compute_lighting_vert(mat4 view_m, mat4 modelview_m) {\\\\n    vec4 view_pos = modelview_m * vec4(a_position, 1.0);\\\\n    \\\\n    for(int i = 0; i < int(u_nlights); i ++ ) {\\\\n        vec4 lpos = view_m * vec4(u_light_positions[i], 1.0);\\\\n        \\\\n        light_dirs[i] = normalize(lpos.xyz - view_pos.xyz);\\\\n        \\\\n        vec3 pos2eye = vec3(-view_pos.xyz);\\\\n        light_half_vects[i] = normalize(pos2eye + light_dirs[i]);\\\\n    }\\\\n    \\\\n    mat4 Mti = transpose(inverse(modelview_m));\\\\n    \\\\n    //normal and a_normal from \\\\\\\"base.model\\\\\\\"\\\\n    normal = (Mti * vec4(a_normal, 0.0));\\\\n    \\\\n    return 1;\\\\n}\\\\n\\\\n/* </lighting.blinn_phong.vert> */\\\"\\n\\n//# sourceURL=webpack://wplug/./src/plugins/lighting/blinn_phong/shaders/vert.glsl?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/postprocessing/fbo/shaders/frag.glsl\":\n/*!**********************************************************!*\\\n  !*** ./src/plugins/postprocessing/fbo/shaders/frag.glsl ***!\n  \\**********************************************************/\n/***/ ((module) => {\n\neval(\"module.exports = \\\"/* <postprocessing.fbo.frag> */\\\\n\\\\n//we're not using a uniform block here since sampler2D type is not supported and then an ubo for a single float\\\\n//is not so useful :)\\\\nuniform int u_on_fbo;\\\\nuniform sampler2D u_tex;\\\\n\\\\n/* </postprocessing.fbo.frag> */\\\\n\\\"\\n\\n//# sourceURL=webpack://wplug/./src/plugins/postprocessing/fbo/shaders/frag.glsl?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/postprocessing/fbo/shaders/vert.glsl\":\n/*!**********************************************************!*\\\n  !*** ./src/plugins/postprocessing/fbo/shaders/vert.glsl ***!\n  \\**********************************************************/\n/***/ ((module) => {\n\neval(\"module.exports = \\\"/* <postprocessing.fbo.vert> */\\\\n\\\\n//we're not using a uniform block here since sampler2D type is not supported and then an ubo for a single float\\\\n//is not so useful :)\\\\nuniform int u_on_fbo;\\\\nuniform sampler2D u_tex;\\\\n\\\\n//none needed here\\\\nvoid fbo_vert() {}\\\\n\\\\n/* </postprocessing.fbo.vert> */\\\"\\n\\n//# sourceURL=webpack://wplug/./src/plugins/postprocessing/fbo/shaders/vert.glsl?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/antialiasing/fs_derivatives/config.json\":\n/*!*************************************************************!*\\\n  !*** ./src/plugins/antialiasing/fs_derivatives/config.json ***!\n  \\*************************************************************/\n/***/ ((module) => {\n\n\"use strict\";\neval(\"module.exports = /*#__PURE__*/JSON.parse('{\\\"attributes\\\":{},\\\"uniforms\\\":{}}');\\n\\n//# sourceURL=webpack://wplug/./src/plugins/antialiasing/fs_derivatives/config.json?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/antialiasing/postp_gaussian/config.json\":\n/*!*************************************************************!*\\\n  !*** ./src/plugins/antialiasing/postp_gaussian/config.json ***!\n  \\*************************************************************/\n/***/ ((module) => {\n\n\"use strict\";\neval(\"module.exports = /*#__PURE__*/JSON.parse('{\\\"attributes\\\":{},\\\"uniforms\\\":{}}');\\n\\n//# sourceURL=webpack://wplug/./src/plugins/antialiasing/postp_gaussian/config.json?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/base/model/config.json\":\n/*!********************************************!*\\\n  !*** ./src/plugins/base/model/config.json ***!\n  \\********************************************/\n/***/ ((module) => {\n\n\"use strict\";\neval(\"module.exports = /*#__PURE__*/JSON.parse('{\\\"attributes\\\":{\\\"a_position\\\":{\\\"name\\\":\\\"a_position\\\",\\\"is_position\\\":true,\\\"opts\\\":{\\\"size\\\":3,\\\"data_type\\\":\\\"FLOAT\\\",\\\"normalized\\\":false,\\\"stride\\\":16,\\\"offset\\\":0}},\\\"a_normal\\\":{\\\"name\\\":\\\"a_normal\\\",\\\"is_normals\\\":true,\\\"opts\\\":{\\\"size\\\":4,\\\"data_type\\\":\\\"BYTE\\\",\\\"normalized\\\":true,\\\"stride\\\":16,\\\"offset\\\":12}}},\\\"uniforms\\\":{\\\"u_time\\\":{\\\"name\\\":\\\"u_time\\\",\\\"ubo\\\":\\\"base_model_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"1f\\\"}},\\\"u_model\\\":{\\\"name\\\":\\\"u_model\\\",\\\"ubo\\\":\\\"base_model_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"Matrix4fv\\\"}},\\\"u_view\\\":{\\\"name\\\":\\\"u_view\\\",\\\"ubo\\\":\\\"base_model_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"Matrix4fv\\\"}},\\\"u_projection\\\":{\\\"name\\\":\\\"u_projection\\\",\\\"ubo\\\":\\\"base_model_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"Matrix4fv\\\"}},\\\"u_resolution\\\":{\\\"name\\\":\\\"u_resolution\\\",\\\"ubo\\\":\\\"base_model_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"2fv\\\"}},\\\"u_mmin_resolution\\\":{\\\"name\\\":\\\"u_mmin_resolution\\\",\\\"ubo\\\":\\\"base_model_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"2fv\\\"}},\\\"u_mmax_resolution\\\":{\\\"name\\\":\\\"u_mmax_resolution\\\",\\\"ubo\\\":\\\"base_model_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"2fv\\\"}},\\\"u_should_remap_resolution\\\":{\\\"name\\\":\\\"u_should_remap_resolution\\\",\\\"ubo\\\":\\\"base_model_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"1i\\\"}}}}');\\n\\n//# sourceURL=webpack://wplug/./src/plugins/base/model/config.json?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/lighting/blinn_phong/config.json\":\n/*!******************************************************!*\\\n  !*** ./src/plugins/lighting/blinn_phong/config.json ***!\n  \\******************************************************/\n/***/ ((module) => {\n\n\"use strict\";\neval(\"module.exports = /*#__PURE__*/JSON.parse('{\\\"attributes\\\":{},\\\"uniforms\\\":{\\\"u_nlights\\\":{\\\"name\\\":\\\"u_nlights\\\",\\\"ubo\\\":\\\"lighting_blinn_phong_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"1i\\\"}},\\\"u_ka\\\":{\\\"name\\\":\\\"u_ka\\\",\\\"ubo\\\":\\\"lighting_blinn_phong_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"1f\\\"}},\\\"u_kd\\\":{\\\"name\\\":\\\"u_kd\\\",\\\"ubo\\\":\\\"lighting_blinn_phong_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"1f\\\"}},\\\"u_ks\\\":{\\\"name\\\":\\\"u_ks\\\",\\\"ubo\\\":\\\"lighting_blinn_phong_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"1f\\\"}},\\\"u_ambient_color\\\":{\\\"name\\\":\\\"u_ambient_color\\\",\\\"ubo\\\":\\\"lighting_blinn_phong_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"3fv\\\"}},\\\"u_ambient_intensity\\\":{\\\"name\\\":\\\"u_ambient_intensity\\\",\\\"ubo\\\":\\\"lighting_blinn_phong_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"1f\\\"}},\\\"u_light_positions\\\":{\\\"name\\\":\\\"u_light_positions\\\",\\\"ubo\\\":\\\"lighting_blinn_phong_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"3fv\\\"}},\\\"u_light_colors\\\":{\\\"name\\\":\\\"u_light_colors\\\",\\\"ubo\\\":\\\"lighting_blinn_phong_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"3fv\\\"}},\\\"u_light_intensities\\\":{\\\"name\\\":\\\"u_light_intensities\\\",\\\"ubo\\\":\\\"lighting_blinn_phong_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"1fv\\\"}},\\\"u_light_specular_exp\\\":{\\\"name\\\":\\\"u_light_specular_exp\\\",\\\"ubo\\\":\\\"lighting_blinn_phong_UBO\\\",\\\"opts\\\":{\\\"fn\\\":\\\"1fv\\\"}}}}');\\n\\n//# sourceURL=webpack://wplug/./src/plugins/lighting/blinn_phong/config.json?\");\n\n/***/ }),\n\n/***/ \"./src/plugins/postprocessing/fbo/config.json\":\n/*!****************************************************!*\\\n  !*** ./src/plugins/postprocessing/fbo/config.json ***!\n  \\****************************************************/\n/***/ ((module) => {\n\n\"use strict\";\neval(\"module.exports = /*#__PURE__*/JSON.parse('{\\\"attributes\\\":{},\\\"uniforms\\\":{\\\"u_on_fbo\\\":{\\\"name\\\":\\\"u_on_fbo\\\",\\\"opts\\\":{\\\"fn\\\":\\\"1i\\\"}},\\\"u_tex\\\":{\\\"name\\\":\\\"u_tex\\\",\\\"opts\\\":{\\\"fn\\\":\\\"1i\\\"}}}}');\\n\\n//# sourceURL=webpack://wplug/./src/plugins/postprocessing/fbo/config.json?\");\n\n/***/ })\n\n/******/ \t});\n/************************************************************************/\n/******/ \t// The module cache\n/******/ \tvar __webpack_module_cache__ = {};\n/******/ \t\n/******/ \t// The require function\n/******/ \tfunction __nested_webpack_require_83016__(moduleId) {\n/******/ \t\t// Check if module is in cache\n/******/ \t\tvar cachedModule = __webpack_module_cache__[moduleId];\n/******/ \t\tif (cachedModule !== undefined) {\n/******/ \t\t\treturn cachedModule.exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = __webpack_module_cache__[moduleId] = {\n/******/ \t\t\t// no module.id needed\n/******/ \t\t\t// no module.loaded needed\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/ \t\n/******/ \t\t// Execute the module function\n/******/ \t\t__webpack_modules__[moduleId](module, module.exports, __nested_webpack_require_83016__);\n/******/ \t\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/ \t\n/************************************************************************/\n/******/ \t/* webpack/runtime/compat get default export */\n/******/ \t(() => {\n/******/ \t\t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t\t__nested_webpack_require_83016__.n = (module) => {\n/******/ \t\t\tvar getter = module && module.__esModule ?\n/******/ \t\t\t\t() => (module['default']) :\n/******/ \t\t\t\t() => (module);\n/******/ \t\t\t__nested_webpack_require_83016__.d(getter, { a: getter });\n/******/ \t\t\treturn getter;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/create fake namespace object */\n/******/ \t(() => {\n/******/ \t\tvar getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\n/******/ \t\tvar leafPrototypes;\n/******/ \t\t// create a fake namespace object\n/******/ \t\t// mode & 1: value is a module id, require it\n/******/ \t\t// mode & 2: merge all properties of value into the ns\n/******/ \t\t// mode & 4: return value when already ns object\n/******/ \t\t// mode & 16: return value when it's Promise-like\n/******/ \t\t// mode & 8|1: behave like require\n/******/ \t\t__nested_webpack_require_83016__.t = function(value, mode) {\n/******/ \t\t\tif(mode & 1) value = this(value);\n/******/ \t\t\tif(mode & 8) return value;\n/******/ \t\t\tif(typeof value === 'object' && value) {\n/******/ \t\t\t\tif((mode & 4) && value.__esModule) return value;\n/******/ \t\t\t\tif((mode & 16) && typeof value.then === 'function') return value;\n/******/ \t\t\t}\n/******/ \t\t\tvar ns = Object.create(null);\n/******/ \t\t\t__nested_webpack_require_83016__.r(ns);\n/******/ \t\t\tvar def = {};\n/******/ \t\t\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n/******/ \t\t\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n/******/ \t\t\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n/******/ \t\t\t}\n/******/ \t\t\tdef['default'] = () => (value);\n/******/ \t\t\t__nested_webpack_require_83016__.d(ns, def);\n/******/ \t\t\treturn ns;\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/define property getters */\n/******/ \t(() => {\n/******/ \t\t// define getter functions for harmony exports\n/******/ \t\t__nested_webpack_require_83016__.d = (exports, definition) => {\n/******/ \t\t\tfor(var key in definition) {\n/******/ \t\t\t\tif(__nested_webpack_require_83016__.o(definition, key) && !__nested_webpack_require_83016__.o(exports, key)) {\n/******/ \t\t\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n/******/ \t\t\t\t}\n/******/ \t\t\t}\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/hasOwnProperty shorthand */\n/******/ \t(() => {\n/******/ \t\t__nested_webpack_require_83016__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))\n/******/ \t})();\n/******/ \t\n/******/ \t/* webpack/runtime/make namespace object */\n/******/ \t(() => {\n/******/ \t\t// define __esModule on exports\n/******/ \t\t__nested_webpack_require_83016__.r = (exports) => {\n/******/ \t\t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t\t}\n/******/ \t\t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t\t};\n/******/ \t})();\n/******/ \t\n/************************************************************************/\n/******/ \t\n/******/ \t// startup\n/******/ \t// Load entry module and return exports\n/******/ \t// This entry module can't be inlined because the eval devtool is used.\n/******/ \tvar __nested_webpack_exports__ = __nested_webpack_require_83016__(\"./src/index.js\");\n/******/ \t\n/******/ \treturn __nested_webpack_exports__;\n/******/ })()\n;\n});\n\n//# sourceURL=webpack://wod/./node_modules/wplug/dist/wplug.js?");

/***/ }),

/***/ "./src/config_parser.js":
/*!******************************!*\
  !*** ./src/config_parser.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   init_data: () => (/* binding */ init_data)\n/* harmony export */ });\n/* harmony import */ var wplug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wplug */ \"./node_modules/wplug/dist/wplug.js\");\n/* harmony import */ var wplug__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(wplug__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _plugins__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plugins */ \"./src/plugins.js\");\nconst init_data = _init_data;\r\n\r\n\r\n\r\n\r\nfunction _init_data(data) {\r\n    return new Promise((res, err) => {\r\n        data = data || {};\r\n        if (!data.scene_desc_url) return err();\r\n        Promise.all(\r\n            (data.objects_desc_url ? [_get_url(data.objects_desc_url)] : [])\r\n                .concat([_get_url(data.scene_desc_url)])\r\n        ).then((json_files) => {\r\n            let {\r\n                objects,\r\n                objects_keys,\r\n                scene_desc\r\n            } = _parse_first_json_files(json_files);\r\n\r\n            //this will read pugins' requires and and add them into the scene_desc config\r\n            scene_desc = (0,_plugins__WEBPACK_IMPORTED_MODULE_1__.set_plugins_requires_into_config)(scene_desc);\r\n\r\n            Promise.all(objects_keys\r\n                .map((obj_key) => _get_url(objects[obj_key]))\r\n            )\r\n                .then((objects_jsons) => {\r\n                    objects_jsons.forEach((oj, i) => {\r\n                        oj.id = objects_keys[i];\r\n\r\n                        oj.program_info_def = _set_program_info_def(oj, scene_desc);\r\n                        oj.program_info_def.shaders_data = (0,_plugins__WEBPACK_IMPORTED_MODULE_1__.plugins_config_into_shaders_data)(oj.program_info_def.shaders_data);   //loads the plugins config in the \"uniforms\" and \"attributes\" fields of program_info structure being built\r\n                    });\r\n\r\n                    _get_shaders_files(objects_jsons, scene_desc)\r\n                        .then((shaders_code_arr_of_objs) => {\r\n                            let _n_objects = objects_jsons.length;\r\n                            const _loops_end = () => {\r\n                                res({\r\n                                    scene_desc,\r\n                                    objects_desc: objects_jsons\r\n                                });\r\n                            };\r\n\r\n                            objects_jsons.forEach((o, i) => {\r\n                                const ///////////////////\r\n                                    _after_loop = (shaders_code) => {\r\n                                        const ////////////////////////////\r\n                                            { program_info_def } = o,\r\n                                            { shaders } = program_info_def;\r\n\r\n                                        shaders_code.vertex = glsl_includes_for_active_plugins(scene_desc, shaders_code.vertex, 'vert', wplug__WEBPACK_IMPORTED_MODULE_0__.plugins);\r\n                                        shaders.vertex.code = glsl_replace_includes(shaders_code.vertex, wplug__WEBPACK_IMPORTED_MODULE_0__.plugins);\r\n\r\n                                        shaders_code.fragment = glsl_includes_for_active_plugins(scene_desc, shaders_code.fragment, 'frag', wplug__WEBPACK_IMPORTED_MODULE_0__.plugins);\r\n                                        shaders.fragment.code = glsl_replace_includes(shaders_code.fragment, wplug__WEBPACK_IMPORTED_MODULE_0__.plugins);\r\n\r\n                                        if (--_n_objects === 0) _loops_end();\r\n                                    },\r\n                                    shaders_code_map = shaders_code_arr_of_objs[i],\r\n                                    shaders_code = {},\r\n                                    map_keys = shaders_code_map.keys(),\r\n                                    map_entries = shaders_code_map.entries();\r\n\r\n\r\n                                let map_n = shaders_code_map.size,\r\n                                    shader_key;\r\n                                while ((shader_key = map_keys.next()).done === false) {\r\n                                    const entry_then = ((shad_key, shader_src) => {\r\n                                        shaders_code[shad_key] = shader_src || \"\";\r\n                                        if (--map_n === 0) _after_loop(shaders_code);\r\n                                    }).bind(null, shader_key.value);\r\n\r\n                                    //this still contains a promise to be evaluated\r\n                                    map_entries.next().value[1].then(entry_then);\r\n                                }\r\n                            });\r\n\r\n                        });\r\n                })\r\n        });\r\n    });\r\n}\r\n\r\nfunction _parse_first_json_files(json_files) {\r\n    let objects, objects_keys, scene_desc;\r\n    if (json_files.length === 2) {\r\n        objects = json_files[0];\r\n        scene_desc = json_files[1];\r\n        objects_keys = Object.keys(objects);\r\n    }\r\n    else if (json_files.length === 1) {\r\n        //we've just the scene_desc file as input and the objects descriptions are therein (this is to be able to remove one desc file for each scene!)\r\n        scene_desc = json_files[0];\r\n\r\n        //this is to be able to remove some objects from one scene without the need to remove their keys \r\n        //(the objects keys are structural if we've not a separate objects_desc.json file!)\r\n        objects_keys = Object.keys(scene_desc.objects)\r\n            .filter(okey => scene_desc.objects[okey].enabled);\r\n\r\n        //desc_url will contain the same url for an object json as it was with the objects_desc.json file\r\n        objects = objects_keys.reduce((o, okey) => Object.assign(o, {\r\n            [okey]: scene_desc.objects[okey].desc_url\r\n        }), {});\r\n    }\r\n\r\n    return {\r\n        objects,\r\n        objects_keys,\r\n        scene_desc\r\n    };\r\n}\r\n\r\n//this allows a scene file to define a program_info_def overwrite (to prevent many object files which differ just for shaders)\r\nfunction _set_program_info_def(object_json, scene_desc) {\r\n    let { id } = object_json;\r\n    return Object.assign(\r\n        object_json.program_info_def,\r\n        ((scene_desc.objects || {})[id] || {}).program_info_def || {}\r\n    );\r\n}\r\n\r\nfunction _get_shaders_files(objects_jsons) {\r\n    return Promise.all(\r\n        objects_jsons.map((object_def) => {\r\n            //The object definition inside a scene can overwrite the default \"program_info_def\" object defined inside the object def file itself. \r\n            //See the \"_set_program_info_def\" func above\r\n            let program_shaders = object_def.program_info_def.shaders;\r\n            return obj2map(\r\n                Object.assign({\r\n                    vertex: _get_url(program_shaders.vertex.url, 'text'),\r\n                    fragment: _get_url(program_shaders.fragment.url, 'text')\r\n                })\r\n            );\r\n        })\r\n    )\r\n}\r\n\r\n//we'll use the same approach described here \r\n//https://stackoverflow.com/a/62630376\r\n//AND \r\n//we'll use a plugin-based approach using the wplug library\r\n//\r\n//in wplug we've plugins belonging to \"types\" (e.g. lighting, antialiasing, ...) and specific \"ids\" (e.g. \"blinn_phong\")\r\n//in each object's shader, when a plugin must be included, we can write a line like\r\n//include \"lighting.blinn_phong.vert\"\r\n//\r\n//as you can see we have a plugin_type.plugin_id.shader_type pattern:\r\n//so we can take the specific shader from the plugin and plug it into our current shader. Cool!\r\n//\r\n//TODO maybe a easier way to manage that would be to replace the line \"main(...)\" with a new line where the plugin code is pasted\r\n//in this way we'll remove the requirement of having the include line matching the plugins structure\r\nconst INCLUDE_REGEXP = /#include\\s+\\\"(\\w+).?-?_?(\\w+).?-?_?(\\w+)\\\"/g;\r\nfunction glsl_replace_includes(src, plugins) {\r\n    return src.replace(INCLUDE_REGEXP, (m, plugin_type, plugin_id, shader_type) => {\r\n        return plugins[plugin_type][plugin_id].shaders[shader_type];\r\n    });\r\n}\r\n\r\n//this function inserts a string like '#include \"plugin_type.plugin_id.shader_type\"' in a shader source if it's needed\r\n//that's because needed plugins code can be requested either directly from scene config or implicitly from plugins requires\r\n//so the user is not directly aware of them but their code must be inserted as well\r\nfunction glsl_includes_for_active_plugins(scene_desc, src, src_type, plugins) {\r\n    return Object.keys(scene_desc)\r\n        .reduce((str, plugin_type) => {\r\n            let ret_str = str;\r\n            if (plugins[plugin_type]) {\r\n                //is a plugin type\r\n                scene_desc[plugin_type] = Array.isArray(scene_desc[plugin_type]) ? scene_desc[plugin_type] : [scene_desc[plugin_type]];\r\n                scene_desc[plugin_type].forEach((plugin_with_type) => {\r\n                    let plugin_id = plugin_with_type.id,\r\n                        INCLUDE_SEP_TOKEN = '.?-?_?',\r\n                        NEEDED_INCLUDE_REGEXP = '#include\\\\s+\\\\\"' + plugin_type + INCLUDE_SEP_TOKEN + plugin_id + INCLUDE_SEP_TOKEN + src_type + '\\\\\"',\r\n                        BASE_INCLUDE_REGEXP = '#include\\\\s+\\\\\"base' + INCLUDE_SEP_TOKEN,\r\n                        NEEDED_INCLUDE_STR = '#include \"' + plugin_type + '.' + plugin_id + '.' + src_type + '\"',\r\n                        SPLIT_TOKEN = \"void main() {\";\r\n\r\n                    if (!str.match(new RegExp(NEEDED_INCLUDE_REGEXP, \"g\"))) {\r\n                        //there isn't our needed include directive in shader: we'll generate it\r\n                        let any_includes = str.match(INCLUDE_REGEXP);\r\n                        if (any_includes) {\r\n                            //if there are other includes we'll put our new include before them\r\n                            //BUT we'll have some care to put \"base*\" plugins includes before all the others (because they declare base variables and things)\r\n                            SPLIT_TOKEN = any_includes\r\n                                .filter(inc => inc.match(new RegExp(BASE_INCLUDE_REGEXP)) === null)[0];\r\n                        }\r\n\r\n                        let sp_str = str.split(SPLIT_TOKEN);\r\n                        ret_str = sp_str[0] + '\\n' + NEEDED_INCLUDE_STR + '\\n' + SPLIT_TOKEN + '\\n' + sp_str[1];\r\n                    }\r\n                });\r\n            }\r\n\r\n            return ret_str;\r\n        }, src);\r\n}\r\n\r\nfunction _get_url(url, type) {\r\n    return fetch(url).then(o => o[type || 'json']());\r\n}\r\n\r\n//for Promise.all we need an iterable object. We'll use a Map\r\nfunction obj2map(o) {\r\n    let m = new Map();\r\n    Object.keys(o).forEach(o_key => {\r\n        m.set(o_key, o[o_key]);\r\n    });\r\n    return m;\r\n}\n\n//# sourceURL=webpack://wod/./src/config_parser.js?");

/***/ }),

/***/ "./src/debug.js":
/*!**********************!*\
  !*** ./src/debug.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   debug_print_buffer: () => (/* binding */ debug_print_buffer),\n/* harmony export */   debug_print_transforms: () => (/* binding */ debug_print_transforms),\n/* harmony export */   print_debug: () => (/* binding */ print_debug)\n/* harmony export */ });\nconst print_debug = _print_debug;\nconst debug_print_buffer = _debug_print_buffer;\nconst debug_print_transforms = _debug_print_transforms;\n\n///////////////////////////////////////////////////////\n///////////////////////////////////////////////////////\n//this prints the final results of the graphics pipeline computation, i.e. what arrives to the fragment shader\nfunction _print_debug(OI, canvas) {\n    OI.objects_to_draw.forEach((obj) => {\n        console.info(\"M MODELVIEW\", obj.model_view_matrix.elements);\n        console.info(\"M PROJECTION\", OI.projection_matrix.elements);\n        let ////////////////////////////////\n            model_view_matrix = obj.model_view_matrix,\n            projection_matrix = OI.projection_matrix,\n            mvp = OI.projection_matrix.mul(\n                obj.model_view_matrix\n            );\n        console.info(\"M MVP\", mvp.elements);\n\n        let //////////////////////////////////\n            a = [],\n            coords = obj.coords,\n            j = 0,\n            f32a = new Float32Array(coords.length * (obj.coords_dim + 1)); //obj.coords_dim + 1 because we're sending homogeneous coordinates to the GPU\n\n        for (let i = 0; i < coords.length; i += obj.coords_dim) {\n            console.info(\"IT\", i, coords[i], coords[i + 1], coords[i + 2]);\n            let ////////////////////////////////\n                transf_vec_mv = model_view_matrix.mul(\n                    glm.vec4(coords[i], coords[i + 1], coords[i + 2], 1.)\n                ),\n                transf_vec_pj = projection_matrix.mul(transf_vec_mv),\n                tr_elems = transf_vec_pj.elements;\n\n            console.info(\"TRANSFORMED COORDS MODELVIEW\", transf_vec_mv.elements);\n            console.info(\"TRANSFORMED COORDS PROJ\", transf_vec_pj.elements);\n\n            f32a[j] = tr_elems[0];\n            f32a[j + 1] = tr_elems[1];\n            f32a[j + 2] = tr_elems[2];\n            f32a[j + 3] = tr_elems[3];\n\n            a.push(glm.vec4(\n                tr_elems[0] / tr_elems[3],\n                tr_elems[1] / tr_elems[3],\n                tr_elems[2] / tr_elems[3],\n                1.\n            ));\n\n            j += 4;\n        }\n        let vl = 0,\n            vr = canvas.width,\n            vt = canvas.height,\n            vb = 0,\n            viewport_mat = glm.mat4(\n                (vr - vl) / 2, 0, 0, 0,\n                0, (vt - vb) / 2, 0, 0,\n                0, 0, 1 / 2, 0,\n                (vr + vl) / 2, (vt + vb) / 2, 1 / 2, 1\n            );\n        a = a.map(vec => viewport_mat.mul(vec));\n        console.info(\"TRANSFORMED ARRS\", f32a, a.map(vec => vec.elements).flat());\n    });\n}\n\nfunction _debug_print_transforms(scene_config) {\n    let o = scene_config.objects_to_draw[0];\n\n    let P = scene_config.M_persp;\n    let O = scene_config.M_ortho;\n    let V = scene_config.view_matrix;\n    let M = o.model_matrix;\n    let canvas = scene_config.canvas;\n    let dims = [canvas.width, canvas.height, 1];\n    let screenPoints = o.coordinates_def.map((c, pi) => {\n        let p = glm.vec4(c.concat(c.length === 3 ? [1] : []));\n        console.info(\"p\" + pi, p.elements);\n        console.info(\"M*p\" + pi, o.model_matrix.mul(p).elements);\n\n        let VM = V.mul(M);\n        console.info(\"VM*p\" + pi, VM.mul(p).elements);\n\n        let PVM = P.mul(VM);\n        console.info(\"PVM*p\" + pi, PVM.mul(p).elements);\n\n        let OPVM = O.mul(PVM);\n        let OPVMp = OPVM.mul(p);\n        console.info(\"OPVM*p\" + pi, OPVMp.elements);\n\n        let cc = OPVMp;\n        let pv = [cc[0] / cc[3], cc[1] / cc[3], cc[2] / cc[3]];\n        let sc = pv.map((p, i) => {\n            return ((p * .5) + .5) * dims[i];\n        });\n        return sc;\n    });\n\n    console.info(\"SCREEN POINTS\", screenPoints);\n\n    let\n        DIMS = dims,\n        targetPoints = [\n            [\n                596,\n                888\n            ],\n            [\n                999,\n                799\n            ],\n            [\n                1236,\n                577\n            ],\n            [\n                596,\n                577\n            ]\n        ],\n        pointsW = 0.9000000357627869,\n        SPoints = targetPoints.map(sp => sp.concat(0.8897876385932113)),\n        REVTransform = (parr) => {\n            return parr.map((screenPoint, spi) => {\n                let sp = screenPoint.map((pcoord, i) => {\n                    return ((pcoord / DIMS[i]) - 0.5) * 2 * pointsW;\n                });\n                let spv = glm.vec4(sp.concat(pointsW));\n                let O_inv = glm.inverse(O);\n                let spv_O = O_inv.mul(spv);\n                let P_inv = glm.inverse(P);\n                let spv_OP = P_inv.mul(spv_O);\n                let V_inv = glm.inverse(V);\n                let spv_OPV = V_inv.mul(spv_OP);\n                let M_inv = glm.inverse(M);\n                let spv_OPVM = M_inv.mul(spv_OPV);\n                return spv_OPVM;\n            });\n        };\n\n    let rev = REVTransform(SPoints).map(revv => {\n        let els = revv.elements;\n        return [els[0], els[1], els[2]]\n    });\n    console.info(\"REVERSED\", rev);\n    console.info(JSON.stringify(rev));\n}\n\n\nfunction _debug_print_buffer(buffer, stride, i, littleEndian, has_texcoords) {\n    const pos = stride * i;\n    console.info(\"COORD\", i, pos);\n    console.info(\n        buffer.getFloat32(pos + Float32Array.BYTES_PER_ELEMENT * 0, littleEndian),\n        buffer.getFloat32(pos + Float32Array.BYTES_PER_ELEMENT * 1, littleEndian),\n        buffer.getFloat32(pos + Float32Array.BYTES_PER_ELEMENT * 2, littleEndian),\n        buffer.getInt8(pos + Float32Array.BYTES_PER_ELEMENT * 3 + Int8Array.BYTES_PER_ELEMENT * 0),\n        buffer.getInt8(pos + Float32Array.BYTES_PER_ELEMENT * 3 + Int8Array.BYTES_PER_ELEMENT * 1),\n        buffer.getInt8(pos + Float32Array.BYTES_PER_ELEMENT * 3 + Int8Array.BYTES_PER_ELEMENT * 2),\n        buffer.getInt8(pos + Float32Array.BYTES_PER_ELEMENT * 3 + Int8Array.BYTES_PER_ELEMENT * 3)\n    );\n    if (has_texcoords) {\n        console.info(\n            buffer.getUint16(pos + Float32Array.BYTES_PER_ELEMENT * 3 + Int8Array.BYTES_PER_ELEMENT * 4 + Uint16Array.BYTES_PER_ELEMENT * 0, littleEndian),\n            buffer.getUint16(pos + Float32Array.BYTES_PER_ELEMENT * 3 + Int8Array.BYTES_PER_ELEMENT * 4 + Uint16Array.BYTES_PER_ELEMENT * 1, littleEndian),\n        );\n    }\n}\n\n//# sourceURL=webpack://wod/./src/debug.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Interactions: () => (/* reexport module object */ _interactions__WEBPACK_IMPORTED_MODULE_3__),\n/* harmony export */   Transforms: () => (/* reexport module object */ _transforms__WEBPACK_IMPORTED_MODULE_2__),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   init_data: () => (/* reexport safe */ _config_parser__WEBPACK_IMPORTED_MODULE_1__.init_data),\n/* harmony export */   init_scene: () => (/* reexport safe */ _scene__WEBPACK_IMPORTED_MODULE_0__.init_scene),\n/* harmony export */   run_scene: () => (/* reexport safe */ _scene__WEBPACK_IMPORTED_MODULE_0__.run_scene),\n/* harmony export */   stop_scene: () => (/* reexport safe */ _scene__WEBPACK_IMPORTED_MODULE_0__.stop_scene)\n/* harmony export */ });\n/* harmony import */ var _scene__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./scene */ \"./src/scene.js\");\n/* harmony import */ var _config_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config_parser */ \"./src/config_parser.js\");\n/* harmony import */ var _transforms__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./transforms */ \"./src/transforms.js\");\n/* harmony import */ var _interactions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interactions */ \"./src/interactions.js\");\n\r\n\r\n\r\n\r\n\r\n/**\r\n * wod : WebGL2 Objects Drawer: a simple drawer with WebGL 2\r\n */\r\n\r\n\r\n\r\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ({\r\n    init_data: _config_parser__WEBPACK_IMPORTED_MODULE_1__.init_data,\r\n    init_scene: _scene__WEBPACK_IMPORTED_MODULE_0__.init_scene,\r\n    run_scene: _scene__WEBPACK_IMPORTED_MODULE_0__.run_scene,\r\n    stop_scene: _scene__WEBPACK_IMPORTED_MODULE_0__.stop_scene,\r\n    Transforms: _transforms__WEBPACK_IMPORTED_MODULE_2__,\r\n    Interactions: _interactions__WEBPACK_IMPORTED_MODULE_3__\r\n});\n\n//# sourceURL=webpack://wod/./src/index.js?");

/***/ }),

/***/ "./src/interactions.js":
/*!*****************************!*\
  !*** ./src/interactions.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auto_animation: () => (/* binding */ auto_animation),\n/* harmony export */   get_params: () => (/* binding */ get_params),\n/* harmony export */   listen_to_keys: () => (/* binding */ listen_to_keys)\n/* harmony export */ });\n\r\nconst listen_to_keys = _listen_to_keys;\r\nconst auto_animation = _auto_animation;\r\nconst get_params = _get_params;\r\n\r\nconst rot_amount = 5;\r\nlet camera_rot_x = 0, camera_rot_y = 0,\r\n    model_rot_x = 0, model_rot_y = 0;\r\n\r\nfunction _listen_to_keys() {\r\n    document.addEventListener('keydown', (e) => {\r\n        switch (e.key) {\r\n            case \"Down\": // IE/Edge specific value\r\n            case \"ArrowDown\":\r\n                camera_rot_x -= rot_amount;\r\n                break;\r\n            case \"Up\": // IE/Edge specific value\r\n            case \"ArrowUp\":\r\n                camera_rot_x += rot_amount;\r\n                break;\r\n            case \"Left\": // IE/Edge specific value\r\n            case \"ArrowLeft\":\r\n                camera_rot_y += rot_amount;\r\n                break;\r\n            case \"Right\": // IE/Edge specific value\r\n            case \"ArrowRight\":\r\n                camera_rot_y -= rot_amount;\r\n                break;\r\n        }\r\n        DEBUG.print && console.info(\"ROT\", camera_rot_x, camera_rot_y);\r\n    });\r\n}\r\n\r\nfunction _auto_animation() {\r\n    // camera_rot_y += rot_amount * .4;\r\n    // camera_rot_x += rot_amount * .2;\r\n    model_rot_y += rot_amount * .4;\r\n    model_rot_x += rot_amount * .2;\r\n\r\n    requestAnimationFrame(_auto_animation);\r\n}\r\n\r\nfunction _get_params() {\r\n    return {\r\n        camera_rot_x, camera_rot_y,\r\n        model_rot_x, model_rot_y\r\n    }\r\n}\n\n//# sourceURL=webpack://wod/./src/interactions.js?");

/***/ }),

/***/ "./src/plugins.js":
/*!************************!*\
  !*** ./src/plugins.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   get_active_plugins_as_array: () => (/* binding */ get_active_plugins_as_array),\n/* harmony export */   get_active_plugins_as_object: () => (/* binding */ get_active_plugins_as_object),\n/* harmony export */   get_plugins_model: () => (/* binding */ get_plugins_model),\n/* harmony export */   plugins_add_data_to_buffer: () => (/* binding */ plugins_add_data_to_buffer),\n/* harmony export */   plugins_clear_all: () => (/* binding */ plugins_clear_all),\n/* harmony export */   plugins_config_into_shaders_data: () => (/* binding */ plugins_config_into_shaders_data),\n/* harmony export */   plugins_drawloop_callback: () => (/* binding */ plugins_drawloop_callback),\n/* harmony export */   plugins_program_init: () => (/* binding */ plugins_program_init),\n/* harmony export */   set_plugins_requires_into_config: () => (/* binding */ set_plugins_requires_into_config),\n/* harmony export */   setup_active_plugins: () => (/* binding */ setup_active_plugins)\n/* harmony export */ });\n/* harmony import */ var wplug__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wplug */ \"./node_modules/wplug/dist/wplug.js\");\n/* harmony import */ var wplug__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(wplug__WEBPACK_IMPORTED_MODULE_0__);\n\n\nconst setup_active_plugins = _setup_active_plugins;\nconst set_plugins_requires_into_config = _set_plugins_requires_into_config;\nconst get_active_plugins_as_object = _get_active_plugins_o;\nconst get_active_plugins_as_array = _get_active_plugins_a;\nconst get_plugins_model = _get_plugins_model;\nconst plugins_config_into_shaders_data = _plugins_config_into_shaders_data;\nconst plugins_program_init = _plugins_program_init;\nconst plugins_add_data_to_buffer = _plugins_add_data_to_buffer;\nconst plugins_drawloop_callback = _plugins_drawloop_callback;\nconst plugins_clear_all = _plugins_clear_all;\n\nlet _active_plugins = null;\n\nfunction _set_plugins_requires_into_config(scene_desc) {\n    //1. first let's fill scene_desc with generated plugins' configurations got from \"requires\"\n    const _browse_plugins = (plugin_type) => {\n        if (wplug__WEBPACK_IMPORTED_MODULE_0__.plugins[plugin_type]) {\n            //the plugin_type key is a plugin's id\n            scene_desc[plugin_type] = Array.isArray(scene_desc[plugin_type]) ? scene_desc[plugin_type] : [scene_desc[plugin_type]];\n            scene_desc[plugin_type].forEach((plugin_with_type) => {\n                let plugin_id = plugin_with_type.id,\n                    plugin = wplug__WEBPACK_IMPORTED_MODULE_0__.plugins[plugin_type][plugin_id],\n                    reqs = plugin.requires;\n\n                plugin._active = true;\n                if (reqs) {\n                    reqs = Array.isArray(reqs) ? reqs : [reqs];\n                    reqs.forEach(req_plugin_desc => {\n                        //each requires element will be in the form {\"plugin_type\": {\"id\": plugin_id, /*other options*/}}\n                        Object\n                            .keys(req_plugin_desc)\n                            .filter(p_key => scene_desc[p_key] === undefined)   //if scene_desc has already a configuration for this plugin we'll skip it\n                            .forEach(p_key => {\n                                Object.assign(scene_desc,\n                                    {\n                                        [p_key]: Object.assign(\n                                            {},\n                                            req_plugin_desc[p_key],\n                                            { is_require: true }\n                                        )\n                                    },\n                                    scene_desc[p_key] || {} //if scene_desc already had defined the same plugin config, it wins\n                                );\n\n                                //recursive step: we'll set also requires to \"_active\" this way\n                                _browse_plugins(p_key);\n                            });\n                    });\n                }\n            })\n        }\n    };\n    Object.keys(scene_desc).forEach(_browse_plugins);\n\n    return scene_desc;\n}\n\n//currently plugins must be declared in the scene config, at \"scene level\" only:\n//since each scene has a config object for each object in the scene as well,\n//objects could contain options data for specific plugins\n//while the plugin's \"dependencies\" can be declared as scene level in the config file\nfunction _setup_active_plugins(config) {\n    const { scene_desc } = config;\n\n    //let's activate each plugin\n    return Object.keys(wplug__WEBPACK_IMPORTED_MODULE_0__.plugins).reduce((c, plugin_type) => {\n        if (scene_desc[plugin_type]) {\n            scene_desc[plugin_type] = Array.isArray(scene_desc[plugin_type]) ? scene_desc[plugin_type] : [scene_desc[plugin_type]];\n            return scene_desc[plugin_type].reduce((cc, plugin_with_type) => {\n                let plugin_id = plugin_with_type.id,\n                    plugin = wplug__WEBPACK_IMPORTED_MODULE_0__.plugins[plugin_type][plugin_id];\n\n                _active_plugins = _active_plugins || [];\n                _active_plugins.push(plugin);\n                return plugin.set_active(true, cc);  //set_active will return the config\n            }, c);\n        }\n        return c;\n    }, config);\n}\n\nfunction _get_active_plugins_o() {\n    return Object.keys(wplug__WEBPACK_IMPORTED_MODULE_0__.plugins)\n        .reduce((active_plugins, plugin_type) => {\n            return Object.assign(active_plugins, {\n                [plugin_type]: Object.keys(wplug__WEBPACK_IMPORTED_MODULE_0__.plugins[plugin_type])\n                    .filter(plugin_id => wplug__WEBPACK_IMPORTED_MODULE_0__.plugins[plugin_type][plugin_id].get_active() || wplug__WEBPACK_IMPORTED_MODULE_0__.plugins[plugin_type][plugin_id]._active)\n                    .reduce((plugs_o, plugin_id) => Object.assign(plugs_o, {\n                        [plugin_id]: wplug__WEBPACK_IMPORTED_MODULE_0__.plugins[plugin_type][plugin_id]\n                    }), {})\n            });\n        }, {});\n}\n\nfunction _get_active_plugins_a() {\n    return _active_plugins || Object.keys(wplug__WEBPACK_IMPORTED_MODULE_0__.plugins)\n        .flatMap(plug_type => {\n            return Object.keys(wplug__WEBPACK_IMPORTED_MODULE_0__.plugins[plug_type])\n                .filter(plug_id => wplug__WEBPACK_IMPORTED_MODULE_0__.plugins[plug_type][plug_id].get_active() || wplug__WEBPACK_IMPORTED_MODULE_0__.plugins[plug_type][plug_id]._active)\n                .map(plug_id => wplug__WEBPACK_IMPORTED_MODULE_0__.plugins[plug_type][plug_id]);\n        })\n        .sort((a, b) => (a.is_require || a.is_base) ? -1 : 1);\n}\n\nfunction _get_plugins_model(desc) {\n    return _get_active_plugins_a()\n        .reduce(\n            (o, plugin) => Object.assign(o, plugin.get_model(desc) || {}),\n            {}\n        );\n}\n\nfunction _plugins_config_into_shaders_data(shaders_data) {\n    return _get_active_plugins_a()\n        .reduce((shad_data, plugin) => {\n            const { config } = plugin;\n            let c = config(shad_data);\n\n            return Object.assign(shad_data, {\n                attributes: Object.assign({}, shad_data.attributes || {}, c.attributes || {}),\n                uniforms: Object.assign({}, shad_data.uniforms || {}, c.uniforms || {})\n            });\n        }, shaders_data);\n}\n\nfunction _plugins_program_init(scene_config) {\n    return _get_active_plugins_a()\n        .reduce(\n            (o, plugin) => plugin.program_init ? plugin.program_init(o) : o,\n            scene_config\n        );\n}\n\nfunction _plugins_add_data_to_buffer(conf_o) {\n    return _get_active_plugins_a()\n        .reduce(\n            (o, plugin) => plugin.add_data_to_buffer ? plugin.add_data_to_buffer(o) : o,\n            conf_o\n        );\n}\n\nfunction _plugins_drawloop_callback(obj_config, scene_config) {\n    return _get_active_plugins_a()\n        .reduce((o, plugin) => {\n            let p_o = plugin.draw_loop_callback ? plugin.draw_loop_callback(obj_config, scene_config) : {};\n            return Object.assign(o, p_o || {});\n        }, scene_config);\n}\n\nfunction _plugins_clear_all(scene_config) {\n    _get_active_plugins_a()\n        .reduce(\n            (o, plugin) => {\n                plugin._active = false;\n                plugin.set_active && plugin.set_active(false, o);\n                return plugin.cleanup ? plugin.cleanup(o) : o\n            },\n            scene_config\n        );\n    _active_plugins = null;\n    return scene_config;\n}\n\n//# sourceURL=webpack://wod/./src/plugins.js?");

/***/ }),

/***/ "./src/scene.js":
/*!**********************!*\
  !*** ./src/scene.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   init_scene: () => (/* binding */ init_scene),\n/* harmony export */   run_scene: () => (/* binding */ run_scene),\n/* harmony export */   stop_scene: () => (/* binding */ stop_scene)\n/* harmony export */ });\n/* harmony import */ var glm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! glm-js */ \"./node_modules/glm-js/build/glm-js.min.js\");\n/* harmony import */ var glm_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(glm_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _transforms__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./transforms */ \"./src/transforms.js\");\n/* harmony import */ var wbase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! wbase */ \"./node_modules/wbase/dist/wbase.js\");\n/* harmony import */ var wbase__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(wbase__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _interactions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./interactions */ \"./src/interactions.js\");\n/* harmony import */ var _webgl_scene__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./webgl_scene */ \"./src/webgl_scene.js\");\n/* harmony import */ var _plugins__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./plugins */ \"./src/plugins.js\");\n/* harmony import */ var _debug__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./debug */ \"./src/debug.js\");\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n/*********************************************************************\r\n * this module is responsible for the scene initialization\r\n * for what concerns the objects and scene structures and math operations\r\n * it creates vectors and matrices to be passed to the webgl_scene\r\n */\r\nlet DEBUG = {\r\n    print_coords: false,\r\n    print: false,\r\n    interactions: false,\r\n    animation: false\r\n};\r\n\r\nconst init_scene = _init_scene;\r\nconst run_scene = _run;\r\nconst stop_scene = _stop;\r\n\r\n\r\nlet ////////////////////////////////////////\r\n    program_running = false;\r\n\r\nfunction _init_scene(scene_config) {\r\n    const { canvas } = (scene_config || {});\r\n    if (!canvas || !scene_config) return;\r\n\r\n    let gl = scene_config.gl || canvas.getContext('webgl2', {\r\n        desynchronized: true, //hints the user agent to reduce the latency by desynchronizing the canvas paint cycle from the event loop\r\n        powerPreference: 'high-performance'\r\n    });\r\n    scene_config.gl = gl;\r\n\r\n    //the \"scene_config\" object will be augmented \r\n    //with all the needed data and that's all we'll need!\r\n\r\n    //plugins could generate coordinates or change the configuration descriptions\r\n    scene_config = (0,_plugins__WEBPACK_IMPORTED_MODULE_5__.setup_active_plugins)(scene_config);\r\n\r\n    //computes coordinates, normals and whatever\r\n    scene_config = _init_scene_struct(scene_config);\r\n\r\n    DEBUG = scene_config.DEBUG || DEBUG;\r\n    DEBUG.interactions && (0,_interactions__WEBPACK_IMPORTED_MODULE_3__.listen_to_keys)();\r\n    DEBUG.animation && (0,_interactions__WEBPACK_IMPORTED_MODULE_3__.auto_animation)();\r\n    DEBUG.print_coords && (0,_debug__WEBPACK_IMPORTED_MODULE_6__.debug_print_transforms)(scene_config);\r\n\r\n    return (0,_webgl_scene__WEBPACK_IMPORTED_MODULE_4__.init_scene_webgl)(scene_config);  //this will return the scene_config with enriched data for each object in objects_to_draw\r\n}\r\n\r\nfunction _init_scene_struct(scene_config) {\r\n    const { canvas, objects_desc } = scene_config,\r\n        { OP, M_ortho, M_persp } = _transforms__WEBPACK_IMPORTED_MODULE_1__.perspective(90, canvas.width / canvas.height, .1, 99);\r\n    return [\r\n        _compute_modelview,\r\n        _compute_objects_coords,\r\n        _plugins__WEBPACK_IMPORTED_MODULE_5__.get_plugins_model\r\n    ].reduce(\r\n        (d, fn) => Object.assign(d, fn(d)),\r\n        Object.assign(scene_config, {\r\n            objects_to_draw: objects_desc.slice(0), //this copy will be enriched with computed stuff\r\n            M_ortho, M_persp,\r\n            projection_matrix: OP,\r\n            resolution: [canvas.width, canvas.height]\r\n        })\r\n    );\r\n}\r\n\r\nfunction _compute_objects_coords(scene_config) {\r\n    // const { scene_desc, objects_desc } = scene_config;\r\n    const { objects_to_draw } = scene_config;\r\n    return {\r\n        objects_to_draw: objects_to_draw.map((obj_def) => {\r\n            return Object.assign(obj_def, {\r\n                ////////////////////\r\n                //Coordinates and normals put in a single Float32Array\r\n                coords: _compute_coords_and_normals(obj_def),\r\n\r\n                ////////////////////\r\n                //model transform computed multiplying up all the transformations in the object description file\r\n                // model_matrix: _compute_model_matrix(obj_def.id, scene_desc)\r\n            })\r\n        })\r\n    };\r\n}\r\n\r\n\r\n//this is put in a separate function because it's computed at each animation frame\r\nfunction _compute_modelview(scene_config) {\r\n    const {\r\n        scene_desc,\r\n        objects_to_draw,\r\n        M_ortho,\r\n        M_persp,\r\n        canvas\r\n    } = scene_config;\r\n    const C = scene_desc.camera;\r\n    let C_pos = glm_js__WEBPACK_IMPORTED_MODULE_0___default().vec3(1),\r\n        view_matrix = glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(1),\r\n        M_r = scene_config.get_modelview_transform ? scene_config.get_modelview_transform(scene_config) : glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(1);\r\n\r\n    //TODO: allow also the camera transforms to be updated from client\r\n    C_pos = glm_js__WEBPACK_IMPORTED_MODULE_0___default().vec4(C.position.concat(1.));\r\n    let C_up = glm_js__WEBPACK_IMPORTED_MODULE_0___default().vec4(C.up.concat(0.));\r\n    view_matrix = _transforms__WEBPACK_IMPORTED_MODULE_1__.lookAt(C_pos.xyz, glm_js__WEBPACK_IMPORTED_MODULE_0___default().vec3(C.center), glm_js__WEBPACK_IMPORTED_MODULE_0___default().vec3(C_up.x, C_up.y, C_up.z));\r\n\r\n    for (let i = 0; i < objects_to_draw.length; i++) {\r\n        let obj_def = objects_to_draw[i];\r\n        let M_r_obj = M_r.mul(obj_def.get_modelview_transform ? obj_def.get_modelview_transform(obj_def, scene_config) : glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(1));\r\n        obj_def.model_matrix = M_r_obj.mul(_compute_model_matrix(obj_def.id, scene_desc));\r\n\r\n        if (!obj_def.coordinates_def && obj_def.screen_coordinates) {\r\n            obj_def.coordinates_def = _transforms__WEBPACK_IMPORTED_MODULE_1__.get_model_coords_from_screen_coords(\r\n                {\r\n                    M_ortho, M_persp,\r\n                    M_view: view_matrix\r\n                },\r\n                obj_def.screen_coordinates,\r\n                obj_def,\r\n                canvas\r\n            );\r\n            if (obj_def.should_remap_resolution) {\r\n                const //////////////\r\n                    mins_maxs = (compare_fn, mins, coord) => {\r\n                        return mins.map((m, i) => Math.abs(compare_fn(m, coord[i])));\r\n                    },\r\n                    mins_xy = obj_def.screen_coordinates.reduce(mins_maxs.bind(null, Math.min), [Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER]),\r\n                    maxs_xy = obj_def.screen_coordinates.reduce(mins_maxs.bind(null, Math.max), [Number.MIN_SAFE_INTEGER, Number.MIN_SAFE_INTEGER])\r\n\r\n                Object.assign(obj_def, {\r\n                    should_remap_resolution: 1,\r\n                    mmin_resolution: mins_xy,\r\n                    mmax_resolution: maxs_xy\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    return {\r\n        view_matrix\r\n    };\r\n}\r\n\r\nfunction _compute_model_matrix(obj_id, scene_desc) {\r\n    let objs = scene_desc.objects,\r\n        objs_keys = Object.keys(objs),\r\n        M = glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(1);\r\n    for (let i = 0; i < objs_keys.length; i++) {\r\n        if (objs_keys[i] === obj_id) {\r\n            let o = objs[objs_keys[i]],\r\n                tr = o.transforms;\r\n\r\n            if (o.matrixTransform) {\r\n                M = glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(o.matrixTransform);\r\n            }\r\n            else {\r\n                for (let j = 0; j < tr.length; j++) {\r\n                    let transform_desc = tr[j],\r\n                        transform_fn = _transforms__WEBPACK_IMPORTED_MODULE_1__[transform_desc.type] || (() => glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(1));\r\n                    M = M.mul(transform_fn(glm_js__WEBPACK_IMPORTED_MODULE_0___default().vec3(transform_desc.amount)));\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return M;\r\n}\r\n\r\n\r\n/////////////////////////////////////////////////////\r\n// RUNNING\r\n/////////////////////////////////////////////////////\r\n\r\nfunction _run(scene_config) {\r\n    program_running = true;\r\n    _do_run(scene_config);\r\n}\r\n\r\nlet rafId = null;\r\nfunction _do_run(scene_config, time) {\r\n    const { canvas, gl } = scene_config;\r\n\r\n    if (program_running && !gl.isContextLost()) {\r\n        (0,_webgl_scene__WEBPACK_IMPORTED_MODULE_4__.draw_objects)(Object.assign(\r\n            scene_config,\r\n            { resolution: [canvas.width, canvas.height] },\r\n            _compute_modelview(scene_config),\r\n        ), time || 0);\r\n        rafId = requestAnimationFrame(_do_run.bind(null, scene_config));\r\n    }\r\n    else {\r\n        rafId !== null && cancelAnimationFrame(rafId);\r\n        rafId = null;\r\n        return;\r\n    }\r\n}\r\n\r\n\r\nfunction _stop(scene_config) {\r\n    program_running = false;\r\n\r\n    //call plugins' cleanup function\r\n    return (0,_plugins__WEBPACK_IMPORTED_MODULE_5__.plugins_clear_all)(\r\n        //clear objects' program, structures and data\r\n        (0,_webgl_scene__WEBPACK_IMPORTED_MODULE_4__.clear_scene_webgl)(scene_config)\r\n    );\r\n}\r\n\r\n\r\nfunction _compute_coords_and_normals(obj_def) {\r\n    const { coords_dim, coordinates_def, indices } = obj_def;\r\n\r\n    //IF we're using 3D and there's some attribute defined to contain \"normals\" (is_normals: true) then:\r\n    //\r\n    //for each coord (which has x,y,z) we'll have \"coords_dim\" values more (i.e. 1 normal vec coords)\r\n    //EXAMPLE \r\n    //coords_dim = 3 \r\n    //coords = [p1x, p1y, p1z, p2x, p2y, p2z] (two points)\r\n    //out = [\r\n    //    p1x, p1y, p1z, norm_p1_x, norm_p1_y, norm_p1_z, \r\n    //    p2x, p2y, p2z, norm_p2_x, norm_p2_y, norm_p2_z\r\n    //]\r\n    const { attributes } = obj_def.program_info_def.shaders_data,\r\n        has_normals = coords_dim === 3 && Object.keys(attributes).find(attr_key => attributes[attr_key].is_normals) !== undefined,\r\n        stride = attributes.a_position.opts.stride;\r\n\r\n    //see https://developer.mozilla.org/en-US/docs/Web/API/WebGLRenderingContext/vertexAttribPointer#examples\r\n    //for the general approach used here about interleaving attributes and keeping the data types as minimal as possible\r\n    //NOTE: indices management is not taken from that reference\r\n    const buffer_to_fill = new ArrayBuffer(stride * coordinates_def.length),\r\n        data_view = new DataView(buffer_to_fill),\r\n        littleEndian = (0,wbase__WEBPACK_IMPORTED_MODULE_2__.isSystemLittleEndian)(),\r\n        indices_to_process = indices || Array.from((new Array(coordinates_def.length)).keys()), //if no indices are provided we'll use a fake indices array with the indices in the coordinates_def array\r\n        processed_vertices = [];\r\n\r\n    let data = indices_to_process\r\n        .reduce((o, vertex_index_to_process, i, indices_a) => {\r\n            if (i > 0 && i % coords_dim === 0) {\r\n                //we keep a \"normal\" reference to compute the normal vector just once for each triangle\r\n                //if we're within this block then we're at the beginning of a new triangle,\r\n                //so let's clear the reference to \"normal\"\r\n                o.normal = null;\r\n            }\r\n            const n = has_normals ? (o.normal || _normal(coordinates_def, indices_a, i, coords_dim)) : null;\r\n            o.normal = n;\r\n\r\n            //we'll add just a single data block to the vbo for each vertex\r\n            //(even though it could occur several times in the indices array of course!)\r\n            if (processed_vertices.indexOf(vertex_index_to_process) === -1) {\r\n                const coord_buf = coordinates_def[vertex_index_to_process];\r\n                processed_vertices.push(vertex_index_to_process);\r\n\r\n                let icurr = vertex_index_to_process * stride,\r\n                    k = 0,\r\n                    j = icurr;\r\n\r\n                //1. fill the buffer with **vertex coordinates**\r\n                for (j = icurr; j < icurr + coords_dim * Float32Array.BYTES_PER_ELEMENT; j += Float32Array.BYTES_PER_ELEMENT) {\r\n                    o.ab.setFloat32(j, coord_buf[k], littleEndian);\r\n                    k++;\r\n                }\r\n\r\n                //2. fill the buffer with **normal vectors**\r\n                if (n) {\r\n                    icurr = j;\r\n                    k = 0;\r\n                    for (j = icurr; j < icurr + 3 * Int8Array.BYTES_PER_ELEMENT; j += Int8Array.BYTES_PER_ELEMENT) {\r\n                        o.ab.setInt8(j, n[k] * 0x7f);\r\n                        k++;\r\n                    }\r\n                    //fourth element just for data alignment (32 bit block for each normal)\r\n                    o.ab.setInt8(j, 0);\r\n                    j += Int8Array.BYTES_PER_ELEMENT;\r\n                }\r\n\r\n                //3. let each plugin to add data to the buffer (e.g. **texcoords** or whatever)\r\n                (0,_plugins__WEBPACK_IMPORTED_MODULE_5__.plugins_add_data_to_buffer)({\r\n                    coordinate_index: vertex_index_to_process,\r\n                    current_bytes_pos: j,\r\n                    buffer: o.ab,\r\n                    obj_def,\r\n                    littleEndian\r\n                });\r\n                // DEBUG.print_coords && debug_print_buffer(o.ab, stride, i, littleEndian);\r\n            }\r\n\r\n            return o;\r\n        }, {\r\n            ab: data_view,\r\n            normal: null\r\n        });\r\n\r\n    return data.ab;\r\n}\r\n\r\nfunction _normal(vertices, indices, i, coords_dim) {\r\n    let triangle_vertices = [];\r\n    if (indices) {\r\n        for (let j = 0; j < coords_dim; j++) {\r\n            triangle_vertices[j] = vertices[indices[i + j]];\r\n        }\r\n    }\r\n    else {\r\n        triangle_vertices = vertices.slice(i, i + coords_dim);\r\n    }\r\n\r\n    let a = glm_js__WEBPACK_IMPORTED_MODULE_0___default().vec3(triangle_vertices[0]),\r\n        b = glm_js__WEBPACK_IMPORTED_MODULE_0___default().vec3(triangle_vertices[1]),\r\n        c = glm_js__WEBPACK_IMPORTED_MODULE_0___default().vec3(triangle_vertices[2]);\r\n\r\n    return glm_js__WEBPACK_IMPORTED_MODULE_0___default().cross(b.sub(a), c.sub(a));\r\n}\n\n//# sourceURL=webpack://wod/./src/scene.js?");

/***/ }),

/***/ "./src/transforms.js":
/*!***************************!*\
  !*** ./src/transforms.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   create_reference_frame: () => (/* binding */ create_reference_frame),\n/* harmony export */   get_model_coords_from_screen_coords: () => (/* binding */ get_model_coords_from_screen_coords),\n/* harmony export */   lookAt: () => (/* binding */ lookAt),\n/* harmony export */   perspective: () => (/* binding */ perspective),\n/* harmony export */   rotate: () => (/* binding */ rotate),\n/* harmony export */   rotate_axis: () => (/* binding */ rotate_axis),\n/* harmony export */   scale: () => (/* binding */ scale),\n/* harmony export */   translate: () => (/* binding */ translate)\n/* harmony export */ });\n/* harmony import */ var glm_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! glm-js */ \"./node_modules/glm-js/build/glm-js.min.js\");\n/* harmony import */ var glm_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(glm_js__WEBPACK_IMPORTED_MODULE_0__);\n\r\n\r\nconst rotate_axis = _rotate_axis;\r\nconst rotate = _rotate;\r\nconst translate = _translate;\r\nconst scale = _scale;\r\nconst create_reference_frame = _create_reference_frame;\r\nconst lookAt = _lookAt;\r\nconst perspective = _perspective;\r\nconst get_model_coords_from_screen_coords = _get_model_coords_from_screen_coords;\r\n\r\n//////////////////////////////////////////////////////////\r\n//Functions implementation\r\n\r\nfunction _lookAt(/*vec3*/eye_pos, /*vec3*/eye_center, /*vec3*/eye_up) {\r\n    let gaze = eye_center.sub(eye_pos).mul(-1),\r\n        frame = create_reference_frame(gaze, eye_up),\r\n        minus_eye_pos = eye_pos.mul(-1),\r\n        translate_mat = _translate(minus_eye_pos);\r\n\r\n    return frame.mul(translate_mat);\r\n}\r\n\r\n/**\r\n * Rotates the invec_point about the arbitrary given <axis> for the amount given by <degrees>.\r\n * This rotation is implemented by creating a reference frame whose \"z\" axis is the \"axis\" vector and the \"t\" axis is \r\n * a non-collinear vector dynamically computed by the function. \r\n * See \"Fundamentals of Computer Graphics\" by Marschner & Shirley\r\n * @param {*} axis the axis to rotate about. It's a vec3\r\n * @param {*} degrees the amount to rotate, in degrees\r\n * @param {*} invec_point [optional] the input point to rotate. It should be a vec3\r\n * @returns if invec_point !== null, a vec3 which is the result of the computation, otherwise the rotation matrix\r\n */\r\nfunction _rotate_axis(/*vec3*/axis, degrees, /*vec3*/invec_point) {\r\n    let P = invec_point,\r\n        A = axis,\r\n        T = axis.clone(),\r\n        theta = glm_js__WEBPACK_IMPORTED_MODULE_0___default().radians(degrees),\r\n        cos_theta = Math.cos(theta),\r\n        sin_theta = Math.sin(theta),\r\n        change_vec_to_1 = (vec) => {\r\n            let found = false;\r\n            return [{\r\n                axis: 'x',\r\n                others: ['y', 'z']\r\n            }, {\r\n                axis: 'y',\r\n                others: ['x', 'z']\r\n            }, {\r\n                axis: 'z',\r\n                others: ['x', 'y']\r\n            }].reduce((v, o) => {\r\n                if (!found && o.others.every(oth_axis => v[o.axis] <= v[oth_axis])) {\r\n                    found = true;\r\n                    v[o.axis] = 1.;\r\n                }\r\n                return v;\r\n            }, vec);\r\n        };\r\n\r\n    T = change_vec_to_1(T); //create a non collinear vector T wrt A\r\n\r\n    let REF_M = _create_reference_frame(A, T),  //mat4\r\n        ROT_Z_M = glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(\r\n            cos_theta, sin_theta, 0, 0,\r\n            -sin_theta, cos_theta, 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 0, 0, 1\r\n        ),\r\n        REF_M_inv = glm_js__WEBPACK_IMPORTED_MODULE_0___default().inverse(REF_M),\r\n        M = REF_M_inv.mul(\r\n            ROT_Z_M.mul(REF_M)\r\n        );\r\n\r\n    return P ? (M.mul(glm_js__WEBPACK_IMPORTED_MODULE_0___default().vec4(P, 1))).xyz : M;\r\n}\r\n\r\nfunction _rotate(amount_vec3, invec) {\r\n    const\r\n        rad = (glm_js__WEBPACK_IMPORTED_MODULE_0___default().radians),\r\n        tx = rad(amount_vec3.x),\r\n        ty = rad(amount_vec3.y),\r\n        tz = rad(amount_vec3.z),\r\n        sin = Math.sin,\r\n        cos = Math.cos;\r\n\r\n    const\r\n        r_x = tx === 0 ? glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(1) : glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(\r\n            1, 0, 0, 0,\r\n            0, cos(tx), sin(tx), 0,\r\n            0, -sin(tx), cos(tx), 0,\r\n            0, 0, 0, 1\r\n        ),\r\n        r_y = ty === 0 ? glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(1) : glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(\r\n            cos(ty), 0, -sin(ty), 0,\r\n            0, 1, 0, 0,\r\n            sin(ty), 0, cos(ty), 0,\r\n            0, 0, 0, 1\r\n        ),\r\n        r_z = tz === 0 ? glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(1) : glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(\r\n            cos(tz), sin(tz), 0, 0,\r\n            -sin(tz), cos(tz), 0, 0,\r\n            0, 0, 1, 0,\r\n            0, 0, 0, 1\r\n        );\r\n    let M = r_x.mul(r_y).mul(r_z);\r\n\r\n    return invec ? M.mul(invec) : M;\r\n}\r\n\r\nfunction _translate(amount_vec3, invec) {\r\n    let translate_mat = glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(\r\n        1, 0, 0, 0,\r\n        0, 1, 0, 0,\r\n        0, 0, 1, 0,\r\n        amount_vec3.x, amount_vec3.y, amount_vec3.z, 1\r\n    );\r\n\r\n    return invec ? translate_mat.mul(invec) : translate_mat;\r\n}\r\n\r\nfunction _scale(amount_vec3, invec) {\r\n    let s_mat = glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(\r\n        amount_vec3.x, 0, 0, 0,\r\n        0, amount_vec3.y, 0, 0,\r\n        0, 0, amount_vec3.z, 0,\r\n        0, 0, 0, 1\r\n    );\r\n\r\n    return invec ? s_mat.mul(invec) : s_mat;\r\n}\r\n\r\nfunction _create_reference_frame(w_dir, up_vec) {\r\n    const ////////////\r\n        w = glm_js__WEBPACK_IMPORTED_MODULE_0___default().normalize(w_dir),\r\n        u = glm_js__WEBPACK_IMPORTED_MODULE_0___default().normalize(glm_js__WEBPACK_IMPORTED_MODULE_0___default().cross(up_vec, w)),\r\n        v = glm_js__WEBPACK_IMPORTED_MODULE_0___default().cross(w, u);\r\n\r\n    return glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(\r\n        u.x, v.x, w.x, 0,\r\n        u.y, v.y, w.y, 0,\r\n        u.z, v.z, w.z, 0,\r\n        0, 0, 0, 1\r\n    );\r\n}\r\n\r\n/* \r\n   We want the output of the MVP transform to be into the \"viewing volume\", which is generally defined\r\n   as [-1, 1]^3. But if you check the actual output from the perspective projection they're not within [-1, 1].\r\n\r\n   BUT see https://www.khronos.org/opengl/wiki/Vertex_Post-Processing\r\n\r\n   The viewing volume for a vertex is defined by (with vertex point defined as [P_x, P_y, P_z, P_w]):\r\n   -P_w <= P_x <= P_w\r\n   -P_w <= P_y <= P_w\r\n   -P_w <= P_z <= P_w\r\n\r\n   All P_x, P_y and P_z coords will be divided by P_w in the perspective divide stage, so the actual\r\n   range before the viewport transform will be [-1, 1]^3\r\n*/\r\nfunction _perspective(fov_y, aspect_ratio, near, far) {\r\n    const ////////////////// \r\n        half_theta = glm_js__WEBPACK_IMPORTED_MODULE_0___default().radians(fov_y) / 2,\r\n        tan_fov = Math.tan(half_theta),\r\n        n = Math.abs(near),\r\n        f = Math.abs(far),\r\n        t = tan_fov * n,                //t = \"top\". This works because sin(half_theta) = t / hyp and cos(half_theta) = n / hyp ==> tan(half_theta) = (t / hyp) / (n / hyp) = t / n\r\n        b = -t,                         //b = \"bottom\"\r\n        r = aspect_ratio * t,           //aspect_ratio = w / h and we can see that (w / h = r / t) ==> because pixels are assumed to be squared\r\n        l = -r;\r\n\r\n    let ///////////////////////\r\n        //M_ortho maps [[l, r], [b, t], [-n, -f]] ==> [-1, 1]^3\r\n        M_ortho = glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(\r\n            2 / (r - l), 0, 0, 0,\r\n            0, 2 / (t - b), 0, 0,\r\n            0, 0, 2 / (n - f), 0,\r\n            (-(r + l)) / (r - l), (-(t + b)) / (t - b), (n + f) / (n - f), 1\r\n        ),\r\n        //M_persp implements perspective projection. Note that it maps [-n, -f] to [-n, -f] after a perspective divide of -z (MINUS ZETA!!!)\r\n        M_persp = glm_js__WEBPACK_IMPORTED_MODULE_0___default().mat4(\r\n            n, 0, 0, 0,\r\n            0, n, 0, 0,\r\n            0, 0, n + f, -1,\r\n            0, 0, n * f, 0\r\n        );\r\n\r\n    //SAME AS DOING \r\n    //return glm.mat4(\r\n    //     (2 * n) / (r - l), 0, 0, 0,\r\n    //     0, (2 * n) / (t - b), 0, 0,\r\n    //     (l + r) / (r - l), (b + t) / (t - b), (f + n) / (n - f), -1,\r\n    //     0, 0, (2 * f * n) / (n - f), 0\r\n    // );\r\n\r\n    return {\r\n        M_ortho,\r\n        M_persp,\r\n        OP: M_ortho.mul(M_persp)\r\n    };\r\n}\r\n\r\nfunction _get_model_coords_from_screen_coords(transforms, points, object_to_draw, canvas) {\r\n    const ////////////////////////////////\r\n        { M_ortho, M_persp, M_view } = transforms,\r\n        M = object_to_draw.model_matrix,\r\n        pointsW = 0.9000000357627869,\r\n        pointsZ = 0.8897876385932113,\r\n        O_inv = glm_js__WEBPACK_IMPORTED_MODULE_0___default().inverse(M_ortho),\r\n        P_inv = glm_js__WEBPACK_IMPORTED_MODULE_0___default().inverse(M_persp),\r\n        V_inv = glm_js__WEBPACK_IMPORTED_MODULE_0___default().inverse(M_view),\r\n        M_inv = glm_js__WEBPACK_IMPORTED_MODULE_0___default().inverse(M),\r\n        DIMS = [canvas.width, canvas.height, 1];\r\n    return points.map((screenPoint) => {\r\n        let /////////////////////////////\r\n            spz = screenPoint.concat(pointsZ),\r\n            sp = spz.map((pcoord, i) => {\r\n                return ((pcoord / DIMS[i]) - 0.5) * 2 * pointsW;\r\n            }),\r\n            spv = glm_js__WEBPACK_IMPORTED_MODULE_0___default().vec4(sp.concat(pointsW)),\r\n            spv_O = O_inv.mul(spv),\r\n            spv_OP = P_inv.mul(spv_O),\r\n            spv_OPV = V_inv.mul(spv_OP),\r\n            spv_OPVM = M_inv.mul(spv_OPV),\r\n            spv_OPVM_a = Array.prototype.slice.call(spv_OPVM.elements);\r\n\r\n        return spv_OPVM_a;\r\n    });\r\n}\n\n//# sourceURL=webpack://wod/./src/transforms.js?");

/***/ }),

/***/ "./src/webgl_scene.js":
/*!****************************!*\
  !*** ./src/webgl_scene.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clear_scene_webgl: () => (/* binding */ clear_scene_webgl),\n/* harmony export */   draw_objects: () => (/* binding */ draw_objects),\n/* harmony export */   init_scene_webgl: () => (/* binding */ init_scene_webgl)\n/* harmony export */ });\n/* harmony import */ var wbase__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! wbase */ \"./node_modules/wbase/dist/wbase.js\");\n/* harmony import */ var wbase__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(wbase__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _plugins__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./plugins */ \"./src/plugins.js\");\n\r\n\r\n\r\n/*********************************************************************\r\n * this module is responsible for the scene initialization and management\r\n * from the point of view of webgl\r\n * so it takes vectors and matrices objects and creates webgl buffers\r\n * attributes uniforms etc etc to manage the actual webgl program.\r\n * \r\n * utilities are taken from wbase library\r\n */\r\n\r\nconst init_scene_webgl = _init_scene_webgl;\r\nconst draw_objects = _draw_objects;\r\nconst clear_scene_webgl = _clear_scene_webgl;\r\n\r\n\r\n////////////////////////////////////////////////////////////\r\n/*\r\n * we have the following data structure\r\n   scene_config: {\r\n    objects_to_draw: [\r\n        {id: obj1, object_program: {program_info: {program: ..., vao: ...}, ...}},\r\n        ...\r\n        {id: objn, object_program: {program_info: {program: ..., vao: ...}, ...}}\r\n    ]\r\n   }\r\n*/\r\nfunction _init_scene_webgl(scene_config) {\r\n    const { gl, objects_to_draw, } = scene_config;\r\n    objects_to_draw.forEach((obj_config, program_index) => {\r\n        const //////////\r\n            { program_info_def, coords_dim, coords, indices } = obj_config,\r\n            { vertex, fragment } = program_info_def.shaders,\r\n            { shaders_data } = program_info_def;\r\n\r\n        //ugly procedural writing but let's keep this as clear as possible\r\n        let program_info = { program_index, programs_number: objects_to_draw.length };\r\n        program_info = (0,wbase__WEBPACK_IMPORTED_MODULE_0__.generate_attributes_from_config)(gl, program_info, shaders_data, coords_dim);\r\n        program_info = _init_webgl_program(gl, program_info, vertex.code, fragment.code);\r\n        program_info = (0,wbase__WEBPACK_IMPORTED_MODULE_0__.fill_position_buffer)(gl, program_info, coords);\r\n\r\n        let index_buffer = indices ? (0,wbase__WEBPACK_IMPORTED_MODULE_0__.setup_indices)(gl, indices) : null;\r\n\r\n        Object.assign(obj_config, {\r\n            object_program: {\r\n                program_info,\r\n                index_buffer\r\n            }\r\n        });\r\n    });\r\n\r\n    //plugins init once programs are ready\r\n    scene_config = (0,_plugins__WEBPACK_IMPORTED_MODULE_1__.plugins_program_init)(scene_config);\r\n\r\n    //draw_fn possibly used in plugins' callbacks at runtime\r\n    return Object.assign(scene_config, { draw_fn: _draw_call });\r\n}\r\n\r\nfunction _init_webgl_program(gl, program_info, vert, frag) {\r\n    program_info.program = (0,wbase__WEBPACK_IMPORTED_MODULE_0__.create_program)(gl, vert, frag);\r\n    return Object.assign(\r\n        program_info,\r\n        (0,wbase__WEBPACK_IMPORTED_MODULE_0__.init_vao)(gl, program_info)\r\n    );\r\n}\r\n\r\n\r\nfunction _draw_objects(scene_config, time) {\r\n    const { gl, start_time } = scene_config;\r\n    const { view_matrix, projection_matrix, resolution } = scene_config;\r\n\r\n    gl.clearColor(0, 0, 0, 1);\r\n    gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\r\n    gl.enable(gl.DEPTH_TEST);\r\n\r\n    scene_config = (scene_config.draw_loop_callback && scene_config.draw_loop_callback(scene_config, time)) || scene_config;\r\n    scene_config.objects_to_draw.forEach((obj_config) => {\r\n        const\r\n            {\r\n                object_program,\r\n                draw_loop_callback,\r\n                afterdraw_loop_callback,\r\n                should_remap_resolution,\r\n                mmin_resolution,\r\n                mmax_resolution\r\n            } = obj_config,\r\n            { program_info } = object_program,\r\n            { program, vao } = program_info;\r\n\r\n        gl.useProgram(program);\r\n        gl.bindVertexArray(vao);\r\n        gl.viewport(\r\n            mmin_resolution[0] || 0,\r\n            mmin_resolution[1] || 0,\r\n            mmax_resolution[0] || gl.canvas.width,\r\n            mmax_resolution[1] || gl.canvas.height\r\n        );\r\n\r\n        scene_config = (draw_loop_callback && draw_loop_callback(scene_config, obj_config, time)) || scene_config;\r\n        scene_config = (0,_plugins__WEBPACK_IMPORTED_MODULE_1__.plugins_drawloop_callback)(obj_config, scene_config);\r\n\r\n        (0,wbase__WEBPACK_IMPORTED_MODULE_0__.set_uniforms)(gl, {\r\n            u_time: (start_time || 0) + (time || 0),\r\n            u_model: obj_config.model_matrix.elements,\r\n            u_view: view_matrix.elements,\r\n            u_projection: projection_matrix.elements,\r\n            u_resolution: resolution,\r\n            u_should_remap_resolution: should_remap_resolution,\r\n            u_mmin_resolution: mmin_resolution,\r\n            u_mmax_resolution: mmax_resolution\r\n        }, object_program);\r\n\r\n        _draw_call(obj_config, scene_config);\r\n\r\n        scene_config = (afterdraw_loop_callback && afterdraw_loop_callback(scene_config, obj_config, time)) || scene_config;\r\n        scene_config = (scene_config.afterdraw_loop_callback && scene_config.afterdraw_loop_callback(scene_config, time)) || scene_config;\r\n\r\n        gl.useProgram(null);\r\n        gl.bindVertexArray(null);\r\n    });\r\n}\r\n\r\nfunction _draw_call(obj_config, scene_config) {\r\n    const ////////////////////////////////////////\r\n        { gl } = scene_config,\r\n        { number_of_points, primitive, object_program } = obj_config,\r\n        { index_buffer } = object_program;\r\n\r\n    if (index_buffer) {\r\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, index_buffer);\r\n        gl.drawElements(gl[primitive], number_of_points, gl.UNSIGNED_SHORT, 0);\r\n    }\r\n    else {\r\n        gl.drawArrays(gl[primitive], 0, number_of_points);\r\n    }\r\n}\r\n\r\nfunction _clear_scene_webgl(scene_config) {\r\n    //TODO\r\n    return scene_config;\r\n}\n\n//# sourceURL=webpack://wod/./src/webgl_scene.js?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ 	return __webpack_exports__;
/******/ })()
;
});